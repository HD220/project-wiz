# Tabela Detalhada de Tarefas de Refatoração - Fase 5

Este documento rastreia o progresso da reescrita completa do código da Fase 5.

**Status:**
*   Pendente
*   Em Andamento
*   Concluído
*   Bloqueado
*   Revisão

**Complexidade (1-5):**
*   1: Muito Baixa (ex: criar um VO simples, uma interface pequena, schema Zod)
*   2: Baixa (ex: criar uma entidade pequena, um caso de uso CRUD básico)
*   3: Média (ex: criar uma entidade mais complexa com VOs, um caso de uso com alguma lógica)
*   4: Alta (ex: implementar um serviço com múltiplas interações, um componente de UI grande) -> Requer subdivisão em sub-tarefas de complexidade <= 2, idealmente 1.
*   5: Muito Alta (ex: integrar um subsistema inteiro) -> Requer subdivisão em sub-tarefas de complexidade <= 2, idealmente 1.

---

| ID da Tarefa | Descrição da Tarefa                                                                                                | Status        | Dependências (IDs) | Complexidade (1-5) | Responsável | Branch Git                                 | Commit da Conclusão (Link) | Notas/Decisões                                                                                                                               |
|--------------|--------------------------------------------------------------------------------------------------------------------|---------------|--------------------|--------------------|-------------|--------------------------------------------|----------------------------|----------------------------------------------------------------------------------------------------------------------------------------------|
| **SUB-FASE 5.B: CAMADA DE APLICAÇÃO (`src_refactored/core/application/`)**                                                         |               |                    |                    |                    |             |                                            |                            |                                                                                                                                              |
|              | **Serviços de Aplicação**                                                                                          |               |                    |                    |             |                                            |                            |                                                                                                                                              |
| APP-SVC-001  | Implementar `GenericAgentExecutor` (como `IAgentExecutor`)                                                         | Bloqueado     | DOM-AGENT-005, DOM-JOB-010, APP-PORT-004, DOM-TOOL-001 | 4 | Jules |                                            |                            | Subdividido em APP-SVC-001.0 a APP-SVC-001.8.                                                                                                |
| APP-SVC-001.8| Unit Tests for `GenericAgentExecutor`.                                                                               | Subdividido   | APP-SVC-001.7.2    | 2                  | Jules       | feat/refactor-phase5-app-generic-agent-executor-tests |                            | Subdividido em APP-SVC-001.8.1 a APP-SVC-001.8.10.                                                                                             |
| APP-SVC-001.8.1.IMPL| Implementar testes de configuração e inicialização para GenericAgentExecutor                                   | Concluído     | APP-SVC-001.8.1    | 1                  | Jules       | feat/refactor-phase5-app-generic-agent-executor-tests | Last commit on branch      | Implementar o teste conceitual definido em APP-SVC-001.8.1. Testes automatizados não puderam ser executados devido a problemas no ambiente. |
| APP-SVC-001.8.2.IMPL| Implementar testes para job simples sem tool_calls (sucesso) no GenericAgentExecutor                           | Pendente      | APP-SVC-001.8.2    | 1                  | Jules       | feat/refactor-phase5-app-generic-agent-executor-tests |                            | Implementar o teste conceitual definido em APP-SVC-001.8.2.                                                                                      |
| APP-SVC-001.8.3.IMPL| Implementar testes para job atingindo maxIterations no GenericAgentExecutor                                    | Pendente      | APP-SVC-001.8.3    | 1                  | Jules       | feat/refactor-phase5-app-generic-agent-executor-tests |                            | Implementar o teste conceitual definido em APP-SVC-001.8.3.                                                                                      |
| APP-SVC-001.8.4.IMPL| Implementar testes para erro no ILLMAdapter.generateText no GenericAgentExecutor                               | Pendente      | APP-SVC-001.8.4    | 1                  | Jules       | feat/refactor-phase5-app-generic-agent-executor-tests |                            | Implementar o teste conceitual definido em APP-SVC-001.8.4.                                                                                      |
| APP-SVC-001.8.5.IMPL| Implementar testes para job com tool_call bem-sucedido no GenericAgentExecutor                                 | Pendente      | APP-SVC-001.8.5    | 1                  | Jules       | feat/refactor-phase5-app-generic-agent-executor-tests |                            | Implementar o teste conceitual definido em APP-SVC-001.8.5.                                                                                      |
| APP-SVC-001.8.6.IMPL| Implementar testes para tool_call com ToolError recuperável no GenericAgentExecutor                              | Pendente      | APP-SVC-001.8.6    | 1                  | Jules       | feat/refactor-phase5-app-generic-agent-executor-tests |                            | Implementar o teste conceitual definido em APP-SVC-001.8.6.                                                                                      |
| APP-SVC-001.8.7.IMPL| Implementar testes para tool_call com ToolError não recuperável (crítico) no GenericAgentExecutor                | Pendente      | APP-SVC-001.8.7    | 1                  | Jules       | feat/refactor-phase5-app-generic-agent-executor-tests |                            | Implementar o teste conceitual definido em APP-SVC-001.8.7.                                                                                      |
| APP-SVC-001.8.8.IMPL| Implementar testes para erro "Tool not found" no GenericAgentExecutor                                            | Pendente      | APP-SVC-001.8.8    | 1                  | Jules       | feat/refactor-phase5-app-generic-agent-executor-tests |                            | Implementar o teste conceitual definido em APP-SVC-001.8.8.                                                                                      |
| APP-SVC-001.8.9.IMPL| Implementar testes para falha na validação de argumentos de ferramenta no GenericAgentExecutor                   | Pendente      | APP-SVC-001.8.9    | 1                  | Jules       | feat/refactor-phase5-app-generic-agent-executor-tests |                            | Implementar o teste conceitual definido em APP-SVC-001.8.9.                                                                                      |
| APP-SVC-001.8.10.IMPL| Implementar testes para lógica de re-planejamento (`attemptReplanForUnusableResponse`) no GenericAgentExecutor   | Pendente      | APP-SVC-001.8.10   | 1                  | Jules       | feat/refactor-phase5-app-generic-agent-executor-tests |                            | Implementar o teste conceitual definido em APP-SVC-001.8.10.                                                                                     |
| APP-SVC-002  | Implementar `WorkerService`                                                                                        | Pendente      | DOM-JOB-011, APP-SVC-001.8, APP-PORT-003 | 3       | Jules       |                                            |                            | Depende da conclusão de todas as sub-tarefas de APP-SVC-001.                                                                                 |
| ---          | ---                                                                                                                | ---           | ---                | ---                | ---         | ---                                        | ---                        | ---                                                                                                                                          |
| **SUB-FASE: CONFIGURAÇÃO E LIMPEZA**                                                                                               |               |                    |                    |                    |             |                                            |                            | Tarefas relacionadas à configuração geral do projeto e limpeza de arquivos legados.                                                          |
| CONFIG-ESLINT-001| Consolidar configuração do ESLint: Migrar `ignorePatterns` de `.eslintrc.json` para `eslint.config.js` e remover `.eslintrc.json` se for redundante. | Subdividido | -                  | 2                  | Jules       | refactor/eslint-config |                            | Subdividido em CONFIG-ESLINT-001.1 e CONFIG-ESLINT-001.2.                                                                                     |
| CONFIG-ESLINT-001.2| Migrar `ignorePatterns` para `eslint.config.js` e remover `.eslintrc.json`.                                    | Pendente    | CONFIG-ESLINT-001.1| 1                  | Jules       | refactor/eslint-config |                            | Validar com `npm run lint`. (Nota: `npm run lint` apresentou erro interno anteriormente, necessitando atenção).                                  |
| LINT-FIX-001 | Corrigir todos os erros de lint no projeto                                                                         | Pendente      | CONFIG-ESLINT-001.2| 3                  | Jules       |                        |                            |                                                                                                                                              |
| CLEANUP-001  | Remover pastas e arquivos internos não mais utilizados: `/.roo`, `/backup`, `/config`, `/scripts`, `/types` e conteúdo legado de `/tests`. | Pendente    | FASE-5-COMPLETA    | 3                  | Jules       |                        |                            | Verificar se Vitest ou outros scripts ainda usam algo em `/tests` antes da remoção total da pasta ou de subpastas específicas.                 |
| LINT-CUSTOM-001 | Pesquisar e configurar plugin (ou regras nativas) para impor modularidade de importações (similar a project-structure/independent-modules), adaptando para a arquitetura do src_refactored. | Pendente | CONFIG-ESLINT-001.2 | 3                  | Jules       | feat/lint-custom-rules |                            | Adaptar patterns e allowImportsFrom para src_refactored.                                                                                       |
| LINT-REACT-001  | Adicionar e configurar regra eslint para padronizar declaração de componentes React (react/function-component-definition). | Pendente | CONFIG-ESLINT-001.2 | 1                  | Jules       | feat/lint-react-rules  |                            |                                                                                                                                              |
| LINT-IMPORT-001 | Refinar configuração da regra import/order em eslint.config.js com base no exemplo fornecido (pathGroups, newlines-between, alphabetize). | Pendente | CONFIG-ESLINT-001.2 | 1                  | Jules       | feat/lint-import-order |                            |                                                                                                                                              |
| LINT-TS-001     | Adicionar e configurar regra @typescript-eslint/naming-convention para padronização de nomes em TypeScript.        | Pendente | CONFIG-ESLINT-001.2 | 2                  | Jules       | feat/lint-ts-naming    |                            | Requer discussão e acordo sobre as convenções.                                                                                               |
| LINT-COMPLEXITY-001 | Adicionar e configurar regras ESLint para limitar complexidade e tamanho: max-depth, id-length, max-lines-per-function, max-statements, max-lines (com overrides para domain/application). | Pendente | CONFIG-ESLINT-001.2 | 2                  | Jules       | feat/lint-complexity   |                            | Alinhado com Object Calisthenics e boas práticas.                                                                                            |
| DOC-LINT-RULES-001 | Revisar e aprovar o documento de propostas de regras ESLint em `docs/technical-documentation/eslint-rule-proposals.md`. | Pendente    | LINT-COMPLEXITY-001 | 1                  | Usuário/Revisor | N/A                        |                            | O documento detalha as regras LINT-CUSTOM-001, LINT-REACT-001, LINT-IMPORT-001, LINT-TS-001, LINT-COMPLEXITY-001.                             |
| ---          | ---                                                                                                                | ---           | ---                | ---                | ---         | ---                                        | ---                        | ---                                                                                                                                          |
| **SUB-FASE 5.C: CAMADA DE INFRAESTRUTURA (`src_refactored/infrastructure/`)**                                                      |               |                    |                    |                    |             |                                            |                            |                                                                                                                                              |
| ...          | (Repositórios Drizzle, Adaptadores de Tools, LLM, Fila, Worker Pool, IOC InversifyJS, Config)                       | Pendente      | ...                | ...                | Jules       |                                            |                            | Detalhar conforme progresso.                                                                                                                 |
| ---          | ---                                                                                                                | ---           | ---                | ---                | ---         | ---                                        | ---                        | ---                                                                                                                                          |
| **SUB-FASE 5.D: CAMADA DE APRESENTAÇÃO (UI e Electron)**                                                                           |               |                    |                    |                    |             |                                            |                            |                                                                                                                                              |
| ...          | (Electron Main/Preload, Handlers IPC, Componentes React UI, Páginas, Stores, Hooks, Serviços IPC)                  | Pendente      | ...                | ...                | Jules       |                                            |                            | Detalhar conforme progresso.                                                                                                                 |
| ---          | ---                                                                                                                | ---           | ---                | ---                | ---         | ---                                        | ---                        | ---                                                                                                                                          |
| **SUB-FASE 5.E: TESTES**                                                                                                           |               |                    |                    |                    |             |                                            |                            |                                                                                                                                              |
| TEST-FIX-001 | Corrigir todos os testes falhando no projeto                                                                       | Pendente      | -                  | 4                  | Jules       |                        |                            |                                                                                                                                              |
| ...          | (Testes Unitários, de Integração, E2E)                                                                             | Pendente      | ...                | ...                | Jules       |                                            |                            | Detalhar conforme progresso.                                                                                                                 |
| ---          | ---                                                                                                                | ---           | ---                | ---                | ---         | ---                                        | ---                        | ---                                                                                                                                          |
| **SUB-FASE 5.F: REMOÇÃO DE CÓDIGO LEGADO E MIGRAÇÃO**                                                                              |               |                    |                    |                    |             |                                            |                            |                                                                                                                                              |
| ...          | (Análise de `src/`, `src2/`, Exclusão, Movimentação de `src_refactored/` para `src/`, Ajustes finais)               | Pendente      | Todas anteriores   | ...                | Jules       |                                            |                            |                                                                                                                                              |
| DOC-REVIEW-001 | Revisar e reorganizar toda a documentação (exceto `docs/tecnico` e `docs/funcional`)                             | Pendente      | -                  | 4                  | Jules       |                        |                            | Excluir documentação obsoleta ou irrelevante. Reorganizar o restante para melhor clareza e utilidade.                                        |
---
