[{"filePath":"/app/src_refactored/presentation/ui/App.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/app/(app)/_layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/app/(app)/agents/$agentId/edit/index.tsx","messages":[{"ruleId":"max-lines-per-function","severity":1,"message":"Function 'EditAgentInstancePage' has too many lines (111). Maximum allowed is 100.","line":26,"column":1,"nodeType":"FunctionDeclaration","messageId":"exceed","endLine":153,"endColumn":2}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { createFileRoute, useRouter, useParams, Link } from '@tanstack/react-router';\nimport { ArrowLeft, Loader2, ServerCrash } from 'lucide-react'; // Added Loader2, ServerCrash\nimport React from 'react'; // Removed useEffect, useState\nimport { toast } from 'sonner';\n\nimport { Button } from '@/presentation/ui/components/ui/button';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/presentation/ui/components/ui/card';\nimport { AgentInstanceForm, AgentInstanceFormData } from '@/presentation/ui/features/agent/components/AgentInstanceForm';\nimport { useIpcMutation } from '@/presentation/ui/hooks/ipc/useIpcMutation';\nimport { useIpcQuery } from '@/presentation/ui/hooks/ipc/useIpcQuery';\n\nimport { IPC_CHANNELS } from '@/shared/ipc-channels';\nimport type {\n  GetPersonaTemplatesListResponseData,\n  GetLLMConfigsListResponseData,\n  GetAgentInstanceDetailsRequest,\n  GetAgentInstanceDetailsResponseData,\n  UpdateAgentInstanceRequest,\n  UpdateAgentInstanceResponseData,\n  IPCResponse,\n  PersonaTemplate, // For form props\n  LLMConfig        // For form props\n} from '@/shared/ipc-types';\n\n\nfunction EditAgentInstancePage() {\n  const router = useRouter();\n  const params = useParams({ from: '/(app)/agents/$agentId/edit/' });\n  const agentId = params.agentId;\n\n  // Query for existing Agent Instance data\n  const { data: agentInstance, isLoading: isLoadingAgent, error: agentError, refetch: refetchAgent } = useIpcQuery<\n    GetAgentInstanceDetailsRequest,\n    GetAgentInstanceDetailsResponseData\n  >(IPC_CHANNELS.GET_AGENT_INSTANCE_DETAILS, { agentId }, { staleTime: 5 * 60 * 1000 });\n\n  // Query for Persona Templates list\n  const { data: personaTemplates, isLoading: isLoadingPersonas, error: personasError } = useIpcQuery<\n    null, GetPersonaTemplatesListResponseData\n  >(IPC_CHANNELS.GET_PERSONA_TEMPLATES_LIST, null, { staleTime: 15 * 60 * 1000 });\n\n  // Query for LLM Configs list\n  const { data: llmConfigs, isLoading: isLoadingLLMs, error: llmsError } = useIpcQuery<\n    null, GetLLMConfigsListResponseData\n  >(IPC_CHANNELS.GET_LLM_CONFIGS_LIST, null, { staleTime: 15 * 60 * 1000 });\n\n\n  const updateAgentMutation = useIpcMutation<\n    UpdateAgentInstanceRequest,\n    IPCResponse<UpdateAgentInstanceResponseData>\n  >(\n    IPC_CHANNELS.UPDATE_AGENT_INSTANCE,\n    {\n      onSuccess: (response) => {\n        if (response.success && response.data) {\n          const agentDisplayName = response.data.agentName || `Agente (ID: ${response.data.id.substring(0,6)})`;\n          toast.success(`Instância de Agente \"${agentDisplayName}\" atualizada com sucesso!`);\n          refetchAgent(); // Refetch agent details\n          // Navigate back to the agent's detail page\n          router.navigate({ to: '/agents/$agentId', params: { agentId: response.data.id }, replace: true });\n        } else {\n          toast.error(`Falha ao atualizar a instância: ${response.error?.message || 'Erro desconhecido.'}`);\n        }\n      },\n      onError: (error) => {\n        toast.error(`Falha ao atualizar a instância: ${error.message}`);\n      },\n    }\n  );\n\n  const handleSubmit = async (formData: AgentInstanceFormData) => {\n    console.log('Dados atualizados da instância de agente:', agentId, formData);\n    updateAgentMutation.mutate({ agentId, data: formData });\n  };\n\n  const isLoadingAll = isLoadingAgent || isLoadingPersonas || isLoadingLLMs;\n  const anyError = agentError || personasError || llmsError;\n\n  if (isLoadingAll) {\n    return (\n      <div className=\"p-8 text-center flex flex-col items-center justify-center min-h-[300px]\">\n        <Loader2 className=\"h-10 w-10 animate-spin text-sky-500 mb-4\" />\n        <p className=\"text-lg text-slate-600 dark:text-slate-400\">Carregando dados para edição...</p>\n      </div>\n    );\n  }\n\n  if (anyError) {\n    let errorMessages = [];\n    if (agentError) errorMessages.push(`Detalhes do Agente: ${agentError.message}`);\n    if (personasError) errorMessages.push(`Templates de Persona: ${personasError.message}`);\n    if (llmsError) errorMessages.push(`Configurações LLM: ${llmsError.message}`);\n    return (\n      <div className=\"p-8 text-center flex flex-col items-center justify-center min-h-[300px] bg-red-50 dark:bg-red-900/10 rounded-lg\">\n        <ServerCrash className=\"h-12 w-12 text-red-500 dark:text-red-400 mb-4\" />\n        <h2 className=\"text-xl font-semibold text-red-700 dark:text-red-300 mb-2\">Falha ao carregar dados</h2>\n        <div className=\"text-sm text-red-600 dark:text-red-400 mb-4 space-y-1\">\n          {errorMessages.map((msg, idx) => <p key={idx}>{msg}</p>)}\n        </div>\n        <Button onClick={() => router.history.back()} variant=\"destructive\" className=\"mt-4\">\n          Voltar\n        </Button>\n      </div>\n    );\n  }\n  \n  if (!agentInstance) {\n    return (\n      <div className=\"p-8 text-center\">\n        <p>Instância de Agente não encontrada.</p>\n         <Button variant=\"outline\" className=\"mt-4\" asChild>\n            <Link to=\"/agents\"><ArrowLeft className=\"mr-2 h-4 w-4\" /> Voltar para Lista de Agentes</Link>\n        </Button>\n      </div>\n    );\n  }\n\n  const initialValues: Partial<AgentInstanceFormData> = {\n    agentName: agentInstance.agentName,\n    personaTemplateId: agentInstance.personaTemplateId,\n    llmProviderConfigId: agentInstance.llmProviderConfigId,\n    temperature: agentInstance.temperature,\n  };\n  \n  const agentDisplayName = agentInstance.agentName || `Agente (ID: ${agentInstance.id.substring(0,6)})`;\n\n  return (\n    <div className=\"p-4 md:p-6 lg:p-8 max-w-2xl mx-auto\">\n      <Button variant=\"outline\" size=\"sm\" className=\"mb-4\" asChild>\n        <Link to=\"/agents/$agentId\" params={{ agentId }}>\n          <ArrowLeft className=\"mr-2 h-4 w-4\" /> Voltar para Detalhes do Agente\n        </Link>\n      </Button>\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"text-2xl\">Editar Instância de Agente: {agentDisplayName}</CardTitle>\n          <CardDescription>\n            Modifique a configuração desta instância de Agente IA.\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          <AgentInstanceForm\n            onSubmit={handleSubmit}\n            initialValues={initialValues}\n            isSubmitting={updateAgentMutation.isLoading}\n            personaTemplates={(personaTemplates || []) as Pick<PersonaTemplate, 'id' | 'name'>[]}\n            llmConfigs={(llmConfigs || []) as Pick<LLMConfig, 'id' | 'name' | 'providerId'>[]}\n          />\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n\nexport const Route = createFileRoute('/(app)/agents/$agentId/edit/')({\n  component: EditAgentInstancePage,\n});\n","usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/app/(app)/agents/$agentId/index.tsx","messages":[{"ruleId":"max-lines-per-function","severity":1,"message":"Function 'AgentInstanceDetailPage' has too many lines (112). Maximum allowed is 100.","line":25,"column":1,"nodeType":"FunctionDeclaration","messageId":"exceed","endLine":147,"endColumn":2}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { createFileRoute, useParams, Link, useRouter } from '@tanstack/react-router';\nimport { ArrowLeft, Edit3, MessageSquare, Bot, Zap, AlertTriangle, Thermometer, Briefcase, Cpu, ListChecks, Activity, Loader2, ServerCrash } from 'lucide-react'; // Added Loader2, ServerCrash\nimport React from 'react'; // Removed useEffect, useState\nimport { toast } from 'sonner';\n\nimport { Badge } from '@/presentation/ui/components/ui/badge';\nimport { Button } from '@/presentation/ui/components/ui/button';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/presentation/ui/components/ui/card';\n// import { Separator } from '@/presentation/ui/components/ui/separator'; // Not used directly in the refactored version yet\nimport { useIpcQuery } from '@/presentation/ui/hooks/ipc/useIpcQuery';\nimport { cn } from '@/presentation/ui/lib/utils'; // For conditional classes\n\nimport { IPC_CHANNELS } from '@/shared/ipc-channels';\nimport type { AgentInstance, GetAgentInstanceDetailsRequest, GetAgentInstanceDetailsResponseData } from '@/shared/ipc-types'; // Adjusted imports\n\n// Kept statusDisplayMap as it's UI specific display logic\nconst statusDisplayMap: Record<AgentInstance['status'], { label: string; icon: React.ElementType; colorClasses: string }> = {\n  idle: { label: 'Ocioso', icon: Zap, colorClasses: 'bg-slate-500 text-slate-50' },\n  running: { label: 'Executando', icon: Zap, colorClasses: 'bg-sky-500 text-sky-50 animate-pulse' },\n  paused: { label: 'Pausado', icon: Zap, colorClasses: 'bg-yellow-500 text-yellow-50' },\n  error: { label: 'Erro', icon: AlertTriangle, colorClasses: 'bg-red-500 text-red-50' },\n  completed: { label: 'Concluído (Job)', icon: Zap, colorClasses: 'bg-green-500 text-green-50' },\n};\n\nfunction AgentInstanceDetailPage() {\n  const params = useParams({ from: '/(app)/agents/$agentId/' });\n  const agentId = params.agentId;\n  const router = useRouter();\n\n  const { data: instance, isLoading, error } = useIpcQuery<GetAgentInstanceDetailsRequest, GetAgentInstanceDetailsResponseData>(\n    IPC_CHANNELS.GET_AGENT_INSTANCE_DETAILS,\n    { agentId },\n    {\n      // staleTime: 5 * 60 * 1000, // Example: Cache for 5 minutes\n      // refetchOnWindowFocus: true,\n      onError: (err) => {\n        toast.error(`Erro ao buscar detalhes do agente: ${err.message}`);\n      }\n    }\n  );\n\n  if (isLoading) {\n    return (\n      <div className=\"p-8 text-center flex flex-col items-center justify-center min-h-[300px]\">\n        <Loader2 className=\"h-10 w-10 animate-spin text-sky-500 mb-4\" />\n        <p className=\"text-lg text-slate-600 dark:text-slate-400\">Carregando detalhes da instância do agente...</p>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"p-8 text-center flex flex-col items-center justify-center min-h-[300px] bg-red-50 dark:bg-red-900/10 rounded-lg\">\n        <ServerCrash className=\"h-12 w-12 text-red-500 dark:text-red-400 mb-4\" />\n        <h2 className=\"text-xl font-semibold text-red-700 dark:text-red-300 mb-2\">Falha ao carregar dados</h2>\n        <p className=\"text-sm text-red-600 dark:text-red-400 mb-4\">{error.message}</p>\n        <Button onClick={() => router.navigate({ to: '/agents' })} variant=\"destructive\" className=\"mt-4\">\n          <ArrowLeft className=\"mr-2 h-4 w-4\" /> Voltar para Lista de Agentes\n        </Button>\n      </div>\n    );\n  }\n  \n  if (!instance) {\n    return (\n      <div className=\"p-8 text-center\">\n        <h2 className=\"text-xl font-semibold mb-2\">Instância de Agente não encontrada</h2>\n        <Button onClick={() => router.navigate({ to: '/agents' })} variant=\"outline\" className=\"mt-4\">\n          <ArrowLeft className=\"mr-2 h-4 w-4\" /> Voltar para Lista de Agentes\n        </Button>\n      </div>\n    );\n  }\n\n  const statusInfo = statusDisplayMap[instance.status] || statusDisplayMap.idle; // Fallback to idle if status is unexpected\n\n  return (\n    <div className=\"p-4 md:p-6 lg:p-8 max-w-5xl mx-auto space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <Button variant=\"outline\" size=\"sm\" asChild>\n          <Link to=\"/agents\">\n            <ArrowLeft className=\"mr-2 h-4 w-4\" /> Voltar para Lista\n          </Link>\n        </Button>\n        <div className=\"flex items-center space-x-2\">\n            <Button variant=\"default\" asChild>\n              {/* Ensure instance.id is used for params */}\n              <Link to=\"/agents/$agentId/edit\" params={{ agentId: instance.id }}>\n                <Edit3 className=\"mr-2 h-4 w-4\" /> Editar Instância\n              </Link>\n            </Button>\n            <Button variant=\"outline\" className=\"bg-sky-500 hover:bg-sky-600 text-white dark:bg-sky-600 dark:hover:bg-sky-700\" asChild>\n                <Link to=\"/chat\" search={{ conversationId: `agent-${instance.id}` }}> {/* Ensure instance.id is used */}\n                    <MessageSquare className=\"mr-2 h-4 w-4\"/> Conversar\n                </Link>\n            </Button>\n        </div>\n      </div>\n\n      <Card className=\"overflow-hidden\">\n        <CardHeader className=\"bg-slate-50 dark:bg-slate-800/50 p-6\">\n          <div className=\"flex flex-col sm:flex-row items-start sm:items-center gap-4\">\n            <Bot className=\"h-16 w-16 text-emerald-500 dark:text-emerald-400 flex-shrink-0 sm:mt-1\" />\n            <div className=\"flex-1\">\n              {/* Use personaTemplateName from the enriched data */}\n              <CardTitle className=\"text-2xl lg:text-3xl mb-1\">{instance.agentName || `Agente (Base: ${instance.personaTemplateName || 'N/D'})`}</CardTitle>\n              <div className=\"flex items-center space-x-2\">\n                <Badge className={cn(\"text-xs\", statusInfo.colorClasses)}>\n                  <statusInfo.icon className=\"h-3.5 w-3.5 mr-1.5\" />\n                  {statusInfo.label}\n                </Badge>\n                {/* Use lastActivity from the enriched data */}\n                <span className=\"text-xs text-slate-500 dark:text-slate-400\">Última atividade: {instance.lastActivity || 'N/D'}</span>\n              </div>\n            </div>\n          </div>\n        </CardHeader>\n        <CardContent className=\"p-6 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-x-6 gap-y-5\">\n          {/* Use personaTemplateName and llmConfigName */}\n          <InfoItem icon={Briefcase} label=\"Persona Base\" value={instance.personaTemplateName || 'Não definida'} />\n          <InfoItem icon={Cpu} label=\"Configuração LLM\" value={instance.llmConfigName || 'Não definida'} />\n          <InfoItem icon={Thermometer} label=\"Temperatura\" value={instance.temperature?.toFixed(1) || 'N/D'} />\n          {instance.currentJobId && <InfoItem icon={ListChecks} label=\"Job Atual\" value={instance.currentJobId} className=\"font-mono text-sky-600 dark:text-sky-400\" />}\n        </CardContent>\n      </Card>\n\n      <Card>\n        <CardHeader>\n            <CardTitle className=\"flex items-center\"><Activity className=\"mr-2 h-5 w-5\"/> Logs de Atividade Recente</CardTitle>\n            <CardDescription>Eventos e ações realizadas por esta instância de agente.</CardDescription>\n        </CardHeader>\n        <CardContent>\n            {/* Placeholder for activity logs */}\n            <p className=\"text-sm text-slate-500 dark:text-slate-400\">\n                (Placeholder: Lista de logs de atividade do agente, como início/fim de jobs, ferramentas usadas, erros, etc.)\n            </p>\n            <ul className=\"mt-3 space-y-2 text-xs\">\n                <li className=\"flex items-start\"><span className=\"font-mono text-slate-500 dark:text-slate-400 mr-2\">[10:35:02]</span> Job 'task-abc-123' iniciado.</li>\n                <li className=\"flex items-start\"><span className=\"font-mono text-slate-500 dark:text-slate-400 mr-2\">[10:35:05]</span> Ferramenta 'filesystem.readFile' executada com sucesso.</li>\n                <li className=\"flex items-start\"><span className=\"font-mono text-red-500 dark:text-red-400 mr-2\">[10:36:12]</span> Erro ao processar 'subtask-xyz': Timeout.</li>\n            </ul>\n        </CardContent>\n      </Card>\n\n    </div>\n  );\n}\n\nconst InfoItem = ({icon: itemIcon, label, value, className}: {icon: React.ElementType, label: string, value: string | number | undefined, className?: string}) => {\n  const IconComponent = itemIcon; // Alias to use as a component\n  return (\n    <div>\n        <h4 className=\"text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider flex items-center mb-0.5\">\n            <IconComponent className=\"h-3.5 w-3.5 mr-1.5 text-slate-400 dark:text-slate-500\"/> {label}\n        </h4>\n        <p className={cn(\"text-sm text-slate-700 dark:text-slate-200\", className)}>{value !== undefined ? value : 'N/D'}</p>\n    </div>\n  );\n}\n\nexport const Route = createFileRoute('/(app)/agents/$agentId/')({\n  component: AgentInstanceDetailPage,\n});\n","usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/app/(app)/agents/index.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/app/(app)/agents/new/index.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/app/(app)/chat/index.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'MessageSquare' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Info' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":36,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":40},{"ruleId":"import/order","severity":1,"message":"There should be no empty line within import group","line":5,"column":1,"nodeType":"ImportDeclaration","endLine":5,"endColumn":65},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Button' is defined but never used. Allowed unused vars must match /^_/u.","line":5,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":16},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ConversationList' is defined but never used. Allowed unused vars must match /^_/u.","line":9,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":9,"endColumn":26},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ConversationItemUIData' is defined but never used. Allowed unused vars must match /^_/u.","line":13,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":13,"endColumn":33},{"ruleId":"@typescript-eslint/naming-convention","severity":1,"message":"Object Literal Property name `agent-001` must match one of the following formats: camelCase, PascalCase, UPPER_CASE, snake_case","line":34,"column":3,"nodeType":"Literal","messageId":"doesNotMatchFormat","endLine":34,"endColumn":14},{"ruleId":"@typescript-eslint/naming-convention","severity":1,"message":"Object Literal Property name `proj-phoenix-general` must match one of the following formats: camelCase, PascalCase, UPPER_CASE, snake_case","line":39,"column":3,"nodeType":"Literal","messageId":"doesNotMatchFormat","endLine":39,"endColumn":25},{"ruleId":"no-undef","severity":2,"message":"'MockConversation' is not defined.","line":45,"column":26,"nodeType":"Identifier","messageId":"undef","endLine":45,"endColumn":42}],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'currentMessages' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":57,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":57,"endColumn":25,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":1,"fatalErrorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { createFileRoute } from '@tanstack/react-router';\nimport { MessageSquare, Bot, Hash, Info } from 'lucide-react'; // Users, Settings removed\nimport React, { useState } from 'react';\n\nimport { Button } from '@/presentation/ui/components/ui/button'; // Button imported\n\n// Placeholder components - these will be created in subsequent steps\nimport { ChatWindow } from '@/presentation/ui/features/chat/components/ChatWindow';\nimport { ConversationList, ConversationItem } from '@/presentation/ui/features/chat/components/ConversationList'; // Import ConversationList and its type\n\n// Mock data for conversations/agents\n// Renamed MockConversation to ConversationItem to match the type from ConversationList.tsx\ninterface ConversationItemUIData extends ConversationItem { // Keep this, ChatWindow might use a more detailed type later\n  id: string;\n  name: string;\n  type: 'dm' | 'channel'; // Direct Message or Project Channel\n  avatarUrl?: string; // For DMs\n  lastMessage?: string;\n  timestamp?: string;\n  unreadCount?: number;\n  participants?: number;\n  // isActive is part of ConversationItem for UI state, not core data here\n}\n\n// Mock messages for the ChatWindow\ninterface MockMessage {\n  id: string;\n  sender: { name: string; type: 'user' | 'agent'; avatarUrl?: string };\n  content: string;\n  timestamp: string;\n}\n\nconst mockMessages: Record<string, MockMessage[]> = {\n  'agent-001': [\n    { id: 'm1', sender: { name: 'J.Doe', type: 'user' }, content: 'Olá CoderBot, pode me ajudar com um script Python?', timestamp: '10:28' },\n    { id: 'm2', sender: { name: 'CoderBot-Alpha', type: 'agent', avatarUrl: '/avatars/agent-coder.png' }, content: 'Claro! Qual é o problema ou requisito?', timestamp: '10:29' },\n    { id: 'm3', sender: { name: 'CoderBot-Alpha', type: 'agent', avatarUrl: '/avatars/agent-coder.png' }, content: 'Ok, estou analisando o código agora...', timestamp: '10:30' },\n  ],\n  'proj-phoenix-general': [\n     { id: 'm4', sender: { name: 'Alice', type: 'user', avatarUrl: '/avatars/01.png' }, content: 'Reunião de planejamento às 14h.', timestamp: '09:15' },\n  ]\n};\n\n\nconst mockConversations: MockConversation[] = [\n  { id: 'agent-001', name: 'CoderBot-Alpha', type: 'dm', avatarUrl: '/avatars/agent-coder.png', lastMessage: \"Ok, estou analisando o código agora...\", timestamp: \"10:30\", unreadCount: 1 },\n  { id: 'user-alice', name: 'Alice (Designer)', type: 'dm', avatarUrl: '/avatars/01.png', lastMessage: \"Você viu o novo layout?\", timestamp: \"Ontem\" },\n  { id: 'proj-phoenix-general', name: '# geral (Projeto Phoenix)', type: 'channel', lastMessage: \"Reunião de planejamento às 14h.\", timestamp: \"09:15\", participants: 12 },\n  { id: 'agent-002', name: 'TestMaster-7000', type: 'dm', avatarUrl: '/avatars/agent-qa.png', lastMessage: \"Todos os testes passaram!\", timestamp: \"08:50\" },\n  { id: 'proj-quimera-dev', name: '# dev (Operação Quimera)', type: 'channel', lastMessage: \"Nova PR aberta para o microsserviço X.\", timestamp: \"Segunda\", participants: 5 },\n];\n\n\nfunction ChatPage() {\n  const [selectedConversationId, setSelectedConversationId] = useState<string | null>(mockConversations[0]?.id || null);\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  const [currentMessages, setCurrentMessages] = useState<MockMessage[]>([]); // Will be populated by ChatWindow/MessageList\n\n  const selectedConversation = mockConversations.find(conv => conv.id === selectedConversationId);\n\n  const handleSendMessage = (content: string) => {\n    // This is a placeholder. In a real app, this would send the message via IPC/API\n    // and then update the local message list optimistically or upon confirmation.\n    console.log(`Sending message to ${selectedConversation?.name}: ${content}`);\n    const newMessage: MockMessage = {\n      id: `msg-${Date.now()}`,\n      sender: { name: 'J.Doe', type: 'user' }, // Assuming current user is J.Doe\n      content,\n      timestamp: new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' }),\n    };\n    // For UI testing, you might temporarily add to a local state managed here or in ChatWindow\n    // For now, just log it. MessageList will use its own mock or passed messages.\n    if (selectedConversationId) {\n        // This is just for local echo test, ChatWindow would handle its own state or receive updates\n        setCurrentMessages(prev => [...prev, newMessage]);\n        // In a real scenario, ChatWindow's messages prop would be updated via a central store or query refetch\n        const targetMessages = mockMessages[selectedConversationId] || [];\n        targetMessages.push(newMessage); // This mutates mockMessages, for demo only\n    }\n  };\n\n\n  return (\n    <div className=\"flex h-screen overflow-hidden bg-slate-100 dark:bg-slate-950\">\n      {/* Painel Esquerdo: Lista de Conversas/Agentes */}\n      <aside className=\"w-64 md:w-72 flex-shrink-0 border-r border-slate-200 dark:border-slate-800 bg-slate-50 dark:bg-slate-900 flex flex-col\">\n        <header className=\"p-3 border-b border-slate-200 dark:border-slate-800\">\n          <h2 className=\"text-lg font-semibold text-slate-800 dark:text-slate-100\">Conversas</h2>\n          {/* Pode ter um input de busca aqui */}\n        </header>\n        <nav className=\"flex-1 overflow-y-auto p-2 space-y-1\">\n          {mockConversations.map(conv => (\n            <button\n              key={conv.id}\n              onClick={() => setSelectedConversationId(conv.id)}\n              className={`w-full flex items-center space-x-3 p-2 rounded-md text-left hover:bg-slate-200 dark:hover:bg-slate-700/60 transition-colors\n                ${selectedConversationId === conv.id ? 'bg-sky-100 dark:bg-sky-700/50 text-sky-700 dark:text-sky-300 font-medium' : 'text-slate-700 dark:text-slate-300'}`}\n            >\n              {conv.type === 'dm' ? (\n                conv.avatarUrl ? <img src={conv.avatarUrl} alt={conv.name} className=\"h-8 w-8 rounded-full\" /> : <Bot className=\"h-7 w-7 text-slate-500\" />\n              ) : (\n                <Hash className=\"h-5 w-5 text-slate-500\" />\n              )}\n              <div className=\"flex-1 min-w-0\">\n                <span className=\"text-sm truncate block\">{conv.name}</span>\n                {conv.lastMessage && <span className=\"text-xs text-slate-500 dark:text-slate-400 truncate block\">{conv.lastMessage}</span>}\n              </div>\n              {conv.unreadCount && conv.unreadCount > 0 && (\n                <span className=\"ml-auto text-xs bg-red-500 text-white font-semibold rounded-full px-1.5 py-0.5\">\n                  {conv.unreadCount}\n                </span>\n              )}\n            </button>\n          ))}\n        </nav>\n        <footer className=\"p-2 border-t border-slate-200 dark:border-slate-800\">\n          {/* Pode ter info do usuário ou status aqui */}\n          <p className=\"text-xs text-slate-500 dark:text-slate-400 text-center\">Usuário: J.Doe</p>\n        </footer>\n      </aside>\n\n      {/* Painel Central: Janela de Chat */}\n      <main className=\"flex-1 flex flex-col overflow-hidden\">\n        <ChatWindow\n          conversation={selectedConversation || null}\n          messages={mockMessages[selectedConversationId || ''] || []} // Pass appropriate messages\n          onSendMessage={handleSendMessage}\n          isLoading={false} // Placeholder\n        />\n      </main>\n\n      {/* Painel Direito: Informações Contextuais (Opcional) */}\n      {/*\n      <aside className=\"w-64 md:w-72 flex-shrink-0 border-l border-slate-200 dark:border-slate-800 bg-slate-50 dark:bg-slate-900 p-4 hidden lg:block\">\n        <h3 className=\"text-lg font-semibold text-slate-800 dark:text-slate-100 mb-3\">Contexto</h3>\n        {selectedConversation ? (\n          <div>\n            <p className=\"text-sm\">Detalhes sobre: <span className=\"font-medium\">{selectedConversation.name}</span></p>\n            <p className=\"text-xs text-slate-500 dark:text-slate-400\">Tipo: {selectedConversation.type}</p>\n            {selectedConversation.type === 'channel' && selectedConversation.participants && (\n               <p className=\"text-xs text-slate-500 dark:text-slate-400\">{selectedConversation.participants} membros</p>\n            )}\n          </div>\n        ) : (\n          <p className=\"text-sm text-slate-500 dark:text-slate-400\">Nenhuma conversa selecionada.</p>\n        )}\n      </aside>\n      */}\n    </div>\n  );\n}\n\nexport const Route = createFileRoute('/(app)/chat/')({\n  component: ChatPage,\n});\n","usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/app/(app)/dashboard/index.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Users' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":31,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":36}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"output":"import { createFileRoute } from '@tanstack/react-router';\nimport { Activity, Briefcase, Users, Zap } from 'lucide-react'; // Icons for cards\nimport React from 'react';\n\nimport { Avatar, AvatarFallback, AvatarImage } from '@/presentation/ui/components/ui/avatar'; // For recent activity\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from '@/presentation/ui/components/ui/card';\n\nfunction DashboardPage() {\n  // Placeholder data\n  const stats = {\n    activeProjects: 3,\n    runningAgents: 5,\n    tasksCompletedToday: 12,\n  };\n\n  const recentActivities = [\n    { id: '1', user: 'Alice', action: 'iniciou um novo job em \"Projeto Phoenix\"', time: '5m atrás', avatar: '/avatars/01.png' },\n    { id: '2', user: 'Agente Coder', action: 'completou a tarefa \"Refatorar API\"', time: '15m atrás', avatar: '/avatars/agent.png' },\n    { id: '3', user: 'Bob', action: 'adicionou uma nova Persona \"QA Master\"', time: '1h atrás', avatar: '/avatars/02.png' },\n  ];\n\n  const user = {\n    name: 'J. Doe',\n  };\n\n  return (\n    <div className=\"p-4 md:p-6 lg:p-8 space-y-6\">\n      <header className=\"mb-6\">\n        <h1 className=\"text-3xl font-bold tracking-tight text-slate-900 dark:text-slate-50\">\n          Bem-vindo de volta, {user.name}!\n        </h1>\n        <p className=\"text-slate-600 dark:text-slate-400\">\n          Aqui está um resumo da sua fábrica de software autônoma.\n        </p>\n      </header>\n\n      {/* Stats Cards Grid */}\n      <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-3\">\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Projetos Ativos</CardTitle>\n            <Briefcase className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\">{stats.activeProjects}</div>\n            <p className=\"text-xs text-muted-foreground\">\n              +2 do que semana passada (placeholder)\n            </p>\n          </CardContent>\n        </Card>\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Agentes em Execução</CardTitle>\n            <Zap className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\">{stats.runningAgents}</div>\n            <p className=\"text-xs text-muted-foreground\">\n              +1 desde ontem (placeholder)\n            </p>\n          </CardContent>\n        </Card>\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Tarefas Concluídas (Hoje)</CardTitle>\n            <Activity className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\">{stats.tasksCompletedToday}</div>\n            <p className=\"text-xs text-muted-foreground\">\n              Total de 150 esta semana (placeholder)\n            </p>\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Recent Activity Section */}\n      <div className=\"grid gap-4 md:grid-cols-1\"> {/* Changed to 1 column for activity list */}\n        <Card>\n          <CardHeader>\n            <CardTitle>Atividade Recente</CardTitle>\n            <CardDescription>\n              O que aconteceu recentemente na sua fábrica.\n            </CardDescription>\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            {recentActivities.map((activity) => (\n              <div key={activity.id} className=\"flex items-center space-x-3\">\n                <Avatar className=\"h-9 w-9\">\n                  <AvatarImage src={activity.avatar} alt={`Avatar de ${activity.user}`} />\n                  <AvatarFallback>{activity.user.substring(0,1).toUpperCase()}</AvatarFallback>\n                </Avatar>\n                <div className=\"flex-1\">\n                  <p className=\"text-sm\">\n                    <span className=\"font-medium\">{activity.user}</span> {activity.action}\n                  </p>\n                  <p className=\"text-xs text-muted-foreground\">{activity.time}</p>\n                </div>\n              </div>\n            ))}\n            {recentActivities.length === 0 && (\n              <p className=\"text-sm text-muted-foreground text-center py-4\">\n                Nenhuma atividade recente.\n              </p>\n            )}\n          </CardContent>\n        </Card>\n      </div>\n    </div>\n  );\n}\n\nexport const Route = createFileRoute('/(app)/dashboard/')({\n  component: DashboardPage,\n});\n","usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/app/(app)/personas/$templateId/edit/index.tsx","messages":[{"ruleId":"max-lines-per-function","severity":1,"message":"Function 'EditPersonaTemplatePage' has too many lines (104). Maximum allowed is 100.","line":22,"column":1,"nodeType":"FunctionDeclaration","messageId":"exceed","endLine":135,"endColumn":2}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { createFileRoute, useRouter, useParams, Link } from '@tanstack/react-router';\nimport { ArrowLeft, Loader2, ServerCrash } from 'lucide-react'; // Added Loader2, ServerCrash\nimport React from 'react'; // Removed useEffect, useState\nimport { toast } from 'sonner';\n\nimport { Button } from '@/presentation/ui/components/ui/button';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/presentation/ui/components/ui/card';\nimport { PersonaTemplateForm, PersonaTemplateFormData } from '@/presentation/ui/features/persona/components/PersonaTemplateForm';\nimport { useIpcMutation } from '@/presentation/ui/hooks/ipc/useIpcMutation';\nimport { useIpcQuery } from '@/presentation/ui/hooks/ipc/useIpcQuery';\n\nimport { IPC_CHANNELS } from '@/shared/ipc-channels';\nimport type {\n  GetPersonaTemplateDetailsRequest,\n  GetPersonaTemplateDetailsResponseData,\n  UpdatePersonaTemplateRequest,\n  UpdatePersonaTemplateResponseData,\n  IPCResponse\n} from '@/shared/ipc-types';\n\n\nfunction EditPersonaTemplatePage() {\n  const router = useRouter();\n  const params = useParams({ from: '/(app)/personas/$templateId/edit/' });\n  const templateId = params.templateId;\n\n  const { data: personaTemplate, isLoading: isLoadingTemplate, error: templateError, refetch } = useIpcQuery<\n    GetPersonaTemplateDetailsRequest,\n    GetPersonaTemplateDetailsResponseData\n  >(\n    IPC_CHANNELS.GET_PERSONA_TEMPLATE_DETAILS,\n    { templateId },\n    {\n      staleTime: 5 * 60 * 1000, // Cache for 5 minutes\n      onError: (err) => {\n        toast.error(`Erro ao buscar detalhes do template: ${err.message}`);\n      }\n    }\n  );\n\n  const updatePersonaMutation = useIpcMutation<\n    UpdatePersonaTemplateRequest,\n    IPCResponse<UpdatePersonaTemplateResponseData>\n  >(\n    IPC_CHANNELS.UPDATE_PERSONA_TEMPLATE,\n    {\n      onSuccess: (response) => {\n        if (response.success && response.data) {\n          toast.success(`Template \"${response.data.name}\" atualizado com sucesso!`);\n          refetch(); // Refetch to update initialValues and header name\n          // Navigate back to the details page\n          router.navigate({ to: '/personas/$templateId', params: { templateId: response.data.id }, replace: true });\n        } else {\n          toast.error(`Falha ao atualizar o template: ${response.error?.message || 'Erro desconhecido.'}`);\n        }\n      },\n      onError: (error) => {\n        toast.error(`Falha ao atualizar o template: ${error.message}`);\n      },\n    }\n  );\n\n  const handleSubmit = async (formData: PersonaTemplateFormData) => {\n    console.log('Dados atualizados do template de persona:', templateId, formData);\n    updatePersonaMutation.mutate({ templateId, data: formData });\n  };\n\n  if (isLoadingTemplate) {\n    return (\n      <div className=\"p-8 text-center flex flex-col items-center justify-center min-h-[300px]\">\n        <Loader2 className=\"h-10 w-10 animate-spin text-sky-500 mb-4\" />\n        <p className=\"text-lg text-slate-600 dark:text-slate-400\">Carregando dados do template...</p>\n      </div>\n    );\n  }\n\n  if (templateError) {\n     return (\n      <div className=\"p-8 text-center flex flex-col items-center justify-center min-h-[300px] bg-red-50 dark:bg-red-900/10 rounded-lg\">\n        <ServerCrash className=\"h-12 w-12 text-red-500 dark:text-red-400 mb-4\" />\n        <h2 className=\"text-xl font-semibold text-red-700 dark:text-red-300 mb-2\">Falha ao carregar template</h2>\n        <p className=\"text-sm text-red-600 dark:text-red-400 mb-4\">{templateError.message}</p>\n        <Button variant=\"outline\" className=\"mt-4\" asChild>\n            <Link to=\"/personas\"><ArrowLeft className=\"mr-2 h-4 w-4\" /> Voltar para Lista</Link>\n        </Button>\n      </div>\n    );\n  }\n\n  if (!personaTemplate) {\n    return (\n      <div className=\"p-8 text-center\">\n        <p>Template de Persona não encontrado.</p>\n         <Button variant=\"outline\" className=\"mt-4\" asChild>\n            <Link to=\"/personas\"><ArrowLeft className=\"mr-2 h-4 w-4\" /> Voltar para Lista de Personas</Link>\n        </Button>\n      </div>\n    );\n  }\n  \n  // Prepare initialValues for the form once personaTemplate data is available\n  const initialValues: Partial<PersonaTemplateFormData> = {\n    name: personaTemplate.name,\n    role: personaTemplate.role,\n    goal: personaTemplate.goal,\n    backstory: personaTemplate.backstory,\n    toolNames: personaTemplate.toolNames || [],\n  };\n\n  return (\n    <div className=\"p-4 md:p-6 lg:p-8 max-w-3xl mx-auto\">\n       <Button variant=\"outline\" size=\"sm\" className=\"mb-4\" asChild>\n          <Link to=\"/personas/$templateId\" params={{templateId}}>\n            <ArrowLeft className=\"mr-2 h-4 w-4\" /> Voltar para Detalhes\n          </Link>\n        </Button>\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"text-2xl\">Editar Template de Persona: {personaTemplate.name}</CardTitle>\n          <CardDescription>\n            Modifique as características base deste template de Agente IA.\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          <PersonaTemplateForm\n            onSubmit={handleSubmit}\n            initialValues={initialValues}\n            isSubmitting={updatePersonaMutation.isLoading}\n            submitButtonText=\"Salvar Alterações\"\n          />\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n\nexport const Route = createFileRoute('/(app)/personas/$templateId/edit/')({\n  component: EditPersonaTemplatePage,\n});\n","usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/app/(app)/personas/$templateId/index.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/app/(app)/personas/index.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/app/(app)/personas/new/index.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/app/(app)/projects/$projectId/chat/index.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/app/(app)/projects/$projectId/docs/index.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/app/(app)/projects/$projectId/index.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/app/(app)/projects/$projectId/members/index.tsx","messages":[{"ruleId":"max-lines-per-function","severity":1,"message":"Function 'ProjectMembersPage' has too many lines (103). Maximum allowed is 100.","line":39,"column":1,"nodeType":"FunctionDeclaration","messageId":"exceed","endLine":145,"endColumn":2},{"ruleId":"id-length","severity":1,"message":"Identifier name 'e' is too short (< 2).","line":68,"column":26,"nodeType":"Identifier","messageId":"tooShort","endLine":68,"endColumn":27}],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setMembers' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":42,"column":19,"nodeType":null,"messageId":"unusedVar","endLine":42,"endColumn":29,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { createFileRoute, useParams } from '@tanstack/react-router';\nimport { UserPlus, Mail, ShieldCheck, Bot as BotIcon, Trash2 } from 'lucide-react'; // BotIcon to avoid conflict\nimport { MoreHorizontal } from 'lucide-react';\nimport React, { useState } from 'react';\n\nimport { Avatar, AvatarFallback, AvatarImage } from '@/presentation/ui/components/ui/avatar';\nimport { Badge } from '@/presentation/ui/components/ui/badge';\nimport { Button } from '@/presentation/ui/components/ui/button';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/presentation/ui/components/ui/card';\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n} from '@/presentation/ui/components/ui/dropdown-menu';\nimport { Input } from '@/presentation/ui/components/ui/input';\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from '@/presentation/ui/components/ui/table';\n\n\ninterface Member {\n  id: string;\n  name: string;\n  email?: string;\n  role: 'Admin' | 'Membro' | 'Editor' | 'Visualizador';\n  avatarUrl?: string;\n  type: 'human' | 'agent';\n  agentPersona?: string; // If type is 'agent'\n}\n\nconst mockMembers: Member[] = [\n  { id: 'user1', name: 'Alice Wonderland', email: 'alice@example.com', role: 'Admin', avatarUrl: '/avatars/01.png', type: 'human' },\n  { id: 'user2', name: 'Bob Construtor', email: 'bob@example.com', role: 'Editor', avatarUrl: '/avatars/02.png', type: 'human' },\n  { id: 'agent001', name: 'CoderBot-Alpha', role: 'Membro', type: 'agent', agentPersona: 'Eng. Software Sênior', avatarUrl: '/avatars/agent-coder.png' },\n  { id: 'user3', name: 'Charlie Reviewer', email: 'charlie@example.com', role: 'Visualizador', type: 'human' },\n  { id: 'agent002', name: 'TestMaster-7000', role: 'Membro', type: 'agent', agentPersona: 'Analista de QA', avatarUrl: '/avatars/agent-qa.png' },\n];\n\n\nfunction ProjectMembersPage() {\n  const params = useParams({ from: '/(app)/projects/$projectId/members' });\n  // const projectId = params.projectId; // Available if needed\n  const [members, setMembers] = useState<Member[]>(mockMembers); // eslint-disable-line @typescript-eslint/no-unused-vars\n  const [inviteEmail, setInviteEmail] = useState('');\n\n  const handleInviteMember = (event: React.FormEvent) => {\n    event.preventDefault();\n    if(inviteEmail.trim()){\n      alert(`Convite simulado enviado para: ${inviteEmail} (Projeto ID: ${params.projectId})`);\n      setInviteEmail('');\n    }\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <Card>\n        <CardHeader>\n          <CardTitle>Membros & Agentes do Projeto</CardTitle>\n          <CardDescription>\n            Gerencie quem tem acesso e quais agentes estão ativos neste projeto (ID: {params.projectId}).\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          <form onSubmit={handleInviteMember} className=\"flex items-center gap-2 mb-6 pb-6 border-b\">\n            <Input\n              type=\"email\"\n              placeholder=\"Email do novo membro ou ID do Agente\"\n              value={inviteEmail}\n              onChange={(e) => setInviteEmail(e.target.value)}\n              className=\"flex-grow\"\n            />\n            <Button type=\"submit\">\n              <UserPlus className=\"mr-2 h-4 w-4\" /> Convidar / Adicionar\n            </Button>\n          </form>\n\n          <h3 className=\"text-lg font-medium mb-3\">Lista de Participantes</h3>\n          <Table>\n            <TableHeader>\n              <TableRow>\n                <TableHead className=\"w-[300px]\">Nome / Agente</TableHead>\n                <TableHead>Tipo</TableHead>\n                <TableHead>Papel no Projeto</TableHead>\n                <TableHead>Email / Persona</TableHead>\n                <TableHead className=\"text-right\">Ações</TableHead>\n              </TableRow>\n            </TableHeader>\n            <TableBody>\n              {members.map((member) => (\n                <TableRow key={member.id}>\n                  <TableCell className=\"font-medium\">\n                    <div className=\"flex items-center gap-2\">\n                      <Avatar className=\"h-7 w-7 text-xs\">\n                        {member.avatarUrl && <AvatarImage src={member.avatarUrl} alt={member.name} />}\n                        <AvatarFallback className={member.type === 'agent' ? 'bg-emerald-500 text-white' : 'bg-slate-200 dark:bg-slate-700'}>\n                          {member.type === 'agent' ? <BotIcon size={14}/> : member.name.substring(0,1).toUpperCase()}\n                        </AvatarFallback>\n                      </Avatar>\n                      {member.name}\n                    </div>\n                  </TableCell>\n                   <TableCell>\n                    <Badge variant={member.type === 'agent' ? 'default' : 'secondary'} className={member.type === 'agent' ? 'bg-emerald-600 dark:bg-emerald-500' : ''}>\n                      {member.type === 'human' ? 'Humano' : 'Agente IA'}\n                    </Badge>\n                  </TableCell>\n                  <TableCell>{member.role}</TableCell>\n                  <TableCell className=\"text-xs text-slate-500 dark:text-slate-400\">\n                    {member.type === 'human' ? member.email : `Persona: ${member.agentPersona}`}\n                  </TableCell>\n                  <TableCell className=\"text-right\">\n                    <DropdownMenu>\n                      <DropdownMenuTrigger asChild>\n                        <Button variant=\"ghost\" size=\"icon\" className=\"h-7 w-7\">\n                          <MoreHorizontal className=\"h-4 w-4\" />\n                        </Button>\n                      </DropdownMenuTrigger>\n                      <DropdownMenuContent align=\"end\">\n                        <DropdownMenuItem>\n                          <ShieldCheck className=\"mr-2 h-3.5 w-3.5\" /> Alterar Papel (N/I)\n                        </DropdownMenuItem>\n                        {member.type === 'human' && member.email &&\n                          <DropdownMenuItem onClick={() => alert(`Enviar email para ${member.email}`)}>\n                            <Mail className=\"mr-2 h-3.5 w-3.5\" /> Enviar Email (N/I)\n                          </DropdownMenuItem>\n                        }\n                        <DropdownMenuItem className=\"text-red-500 focus:text-red-500\">\n                          <Trash2 className=\"mr-2 h-3.5 w-3.5\" /> Remover do Projeto (N/I)\n                        </DropdownMenuItem>\n                      </DropdownMenuContent>\n                    </DropdownMenu>\n                  </TableCell>\n                </TableRow>\n              ))}\n            </TableBody>\n          </Table>\n          {members.length === 0 && (\n            <p className=\"text-center text-sm text-slate-500 dark:text-slate-400 py-6\">\n              Nenhum membro ou agente neste projeto ainda.\n            </p>\n          )}\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n\nexport const Route = createFileRoute('/(app)/projects/$projectId/members/')({\n  component: ProjectMembersPage,\n});\n","usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/app/(app)/projects/$projectId/settings/index.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/app/(app)/projects/index.tsx","messages":[{"ruleId":"id-length","severity":1,"message":"Identifier name 'p' is too short (< 2).","line":35,"column":53,"nodeType":"Identifier","messageId":"tooShort","endLine":35,"endColumn":54},{"ruleId":"id-length","severity":1,"message":"Identifier name 'a' is too short (< 2).","line":38,"column":11,"nodeType":"Identifier","messageId":"tooShort","endLine":38,"endColumn":12},{"ruleId":"id-length","severity":1,"message":"Identifier name 'b' is too short (< 2).","line":38,"column":14,"nodeType":"Identifier","messageId":"tooShort","endLine":38,"endColumn":15},{"ruleId":"id-length","severity":1,"message":"Identifier name 'e' is too short (< 2).","line":70,"column":22,"nodeType":"Identifier","messageId":"tooShort","endLine":70,"endColumn":23}],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setProjects' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":29,"column":20,"nodeType":null,"messageId":"unusedVar","endLine":29,"endColumn":31,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { createFileRoute, Link } from '@tanstack/react-router';\nimport { PlusCircle, LayoutGrid, List } from 'lucide-react';\nimport React, { useState } from 'react'; // Assuming useState for mock data or future filters\n\nimport { Button } from '@/presentation/ui/components/ui/button';\nimport { Input } from '@/presentation/ui/components/ui/input';\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/presentation/ui/components/ui/select\";\nimport { ToggleGroup, ToggleGroupItem } from \"@/presentation/ui/components/ui/toggle-group\";\nimport { ProjectList } from '@/presentation/ui/features/project/components/ProjectList';\nimport { Project } from '@/presentation/ui/features/project/components/ProjectListItem'; // Assuming Project type is exported\n\n// Mock Data - Replace with API call and TanStack Query later\nconst mockProjects: Project[] = [\n  { id: '1', name: 'Projeto Phoenix', description: 'Reconstrução da plataforma principal com foco em escalabilidade e IA.', lastActivity: '2 horas atrás', status: 'active', agentCount: 5, taskCount: 23 },\n  { id: '2', name: 'Operação Quimera', description: 'Integração de múltiplos serviços legados em uma nova arquitetura de microfrontends.', lastActivity: '1 dia atrás', status: 'paused', agentCount: 2, taskCount: 8 },\n  { id: '3', name: 'Iniciativa Netuno', description: 'Desenvolvimento de um novo data lake para análise preditiva de mercado.', lastActivity: '5 dias atrás', status: 'planning', agentCount: 1, taskCount: 2 },\n  { id: '4', name: 'Projeto Alpha', description: 'Um projeto de exploração de novas tecnologias de IA.', lastActivity: '3 horas atrás', status: 'active', agentCount: 3, taskCount: 15 },\n  { id: '5', name: 'Legado Modernizado', description: 'Atualização de sistema legado para novas tecnologias.', lastActivity: '1 semana atrás', status: 'completed', agentCount: 0, taskCount: 50 },\n];\n\n\nfunction ProjectsPage() {\n  const [projects, setProjects] = useState<Project[]>(mockProjects); // eslint-disable-line @typescript-eslint/no-unused-vars\n  const [searchTerm, setSearchTerm] = useState('');\n  const [sortOrder, setSortOrder] = useState('name-asc');\n  const [viewMode, setViewMode] = useState<'grid' | 'list'>('grid');\n\n  // TODO: Implement filtering and sorting based on searchTerm and sortOrder\n  const filteredAndSortedProjects = projects.filter(p =>\n    p.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\n    p.description.toLowerCase().includes(searchTerm.toLowerCase())\n  ).sort((a, b) => {\n    if (sortOrder === 'name-asc') return a.name.localeCompare(b.name);\n    if (sortOrder === 'name-desc') return b.name.localeCompare(a.name);\n    // Add more sort options (e.g., by lastActivity)\n    return 0;\n  });\n\n\n  return (\n    <div className=\"p-4 md:p-6 lg:p-8 space-y-6\">\n      <header className=\"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4\">\n        <div>\n          <h1 className=\"text-3xl font-bold tracking-tight text-slate-900 dark:text-slate-50\">\n            Seus Projetos\n          </h1>\n          <p className=\"text-slate-600 dark:text-slate-400 mt-1\">\n            Visualize, gerencie e crie novos projetos de software.\n          </p>\n        </div>\n        <Button asChild>\n          <Link to=\"/projects/new\">\n            <PlusCircle className=\"mr-2 h-4 w-4\" />\n            Novo Projeto\n          </Link>\n        </Button>\n      </header>\n\n      {/* Filters and View Options Bar */}\n      <div className=\"flex flex-col sm:flex-row items-center gap-3 p-3 bg-slate-50 dark:bg-slate-800/50 rounded-lg border border-slate-200 dark:border-slate-700\">\n        <Input\n          placeholder=\"Buscar projetos...\"\n          value={searchTerm}\n          onChange={(e) => setSearchTerm(e.target.value)}\n          className=\"flex-grow sm:flex-grow-0 sm:w-auto md:min-w-[250px]\"\n        />\n        <Select value={sortOrder} onValueChange={setSortOrder}>\n          <SelectTrigger className=\"w-full sm:w-auto\">\n            <SelectValue placeholder=\"Ordenar por...\" />\n          </SelectTrigger>\n          <SelectContent>\n            <SelectItem value=\"name-asc\">Nome (A-Z)</SelectItem>\n            <SelectItem value=\"name-desc\">Nome (Z-A)</SelectItem>\n            <SelectItem value=\"activity-desc\" disabled>Última Atividade (Recente)</SelectItem>\n            <SelectItem value=\"activity-asc\" disabled>Última Atividade (Antiga)</SelectItem>\n          </SelectContent>\n        </Select>\n        <ToggleGroup type=\"single\" value={viewMode} onValueChange={(value) => value && setViewMode(value as 'grid' | 'list')} className=\"ml-auto\">\n          <ToggleGroupItem value=\"grid\" aria-label=\"Visualização em Grade\">\n            <LayoutGrid className=\"h-4 w-4\" />\n          </ToggleGroupItem>\n          <ToggleGroupItem value=\"list\" aria-label=\"Visualização em Lista\">\n            <List className=\"h-4 w-4\" />\n          </ToggleGroupItem>\n        </ToggleGroup>\n      </div>\n\n\n      {filteredAndSortedProjects.length > 0 ? (\n        <ProjectList projects={filteredAndSortedProjects} viewMode={viewMode} />\n      ) : (\n        <div className=\"text-center py-10 border-2 border-dashed border-slate-200 dark:border-slate-700 rounded-lg mt-6\">\n          <svg className=\"mx-auto h-12 w-12 text-slate-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" aria-hidden=\"true\">\n            <path vectorEffect=\"non-scaling-stroke\" strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9.53 16.122a3 3 0 00-5.78 1.128 2.25 2.25 0 01-2.4 2.245 4.5 4.5 0 008.4-2.245c0-.399-.078-.78-.22-1.128zm0 0a15.998 15.998 0 003.388-1.62m-5.043-.025a15.994 15.994 0 011.622-3.395m3.42 3.42a15.995 15.995 0 004.764-4.648l3.876-5.814a1.151 1.151 0 00-1.597-1.597L14.146 6.32a15.996 15.996 0 00-4.649 4.763m3.42 3.42a15.997 15.997 0 00-4.764 4.648l-3.876 5.814a1.151 1.151 0 001.597 1.597l5.814-3.875a15.996 15.996 0 004.649-4.763m-3.42-3.42a15.995 15.995 0 00a4.5 4.5 0 00-8.4-2.245c0-.399.078-.78.22-1.128\"/>\n          </svg>\n          <h3 className=\"mt-2 text-sm font-medium text-slate-900 dark:text-slate-50\">\n            {searchTerm ? 'Nenhum projeto encontrado' : 'Nenhum projeto criado'}\n          </h3>\n          <p className=\"mt-1 text-sm text-slate-500 dark:text-slate-400\">\n            {searchTerm ? 'Tente ajustar seus filtros ou termos de busca.' : 'Comece criando seu primeiro projeto.'}\n          </p>\n          {!searchTerm && (\n            <div className=\"mt-6\">\n              <Button asChild variant=\"outline\">\n                <Link to=\"/projects/new\">\n                  <PlusCircle className=\"mr-2 h-4 w-4\" />\n                  Criar Novo Projeto\n                </Link>\n              </Button>\n            </div>\n          )}\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport const Route = createFileRoute('/(app)/projects/')({\n  component: ProjectsPage,\n});\n","usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/app/(app)/projects/new/index.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/app/(app)/settings/appearance/index.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/app/(app)/settings/index.tsx","messages":[{"ruleId":"@typescript-eslint/naming-convention","severity":1,"message":"Parameter name `Icon` must match one of the following formats: camelCase","line":16,"column":42,"nodeType":"Identifier","messageId":"doesNotMatchFormat","endLine":16,"endColumn":46}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { createFileRoute, Link } from '@tanstack/react-router';\nimport { User, Cpu, Palette, Bell, ShieldCheck } from 'lucide-react'; // Icons for sections\nimport React from 'react';\n\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/presentation/ui/components/ui/card';\nimport { Separator } from '@/presentation/ui/components/ui/separator';\n\ninterface SettingsSectionProps {\n  to: string;\n  icon: React.ElementType;\n  title: string;\n  description: string;\n  disabled?: boolean;\n}\n\nfunction SettingsSectionLink({ to, icon: Icon, title, description, disabled }: SettingsSectionProps) {\n  const content = (\n    <div className={`flex items-start space-x-4 p-4 rounded-lg transition-colors ${\n      disabled\n        ? 'opacity-50 cursor-not-allowed'\n        : 'hover:bg-slate-100 dark:hover:bg-slate-800/50'\n    }`}>\n      <div className={`mt-1 p-2 rounded-md ${disabled ? 'bg-slate-200 dark:bg-slate-700' : 'bg-slate-100 dark:bg-slate-800'}`}>\n        <Icon className={`h-6 w-6 ${disabled ? 'text-slate-400 dark:text-slate-500' : 'text-slate-600 dark:text-slate-300'}`} />\n      </div>\n      <div>\n        <h3 className=\"text-base font-semibold text-slate-800 dark:text-slate-100\">{title}</h3>\n        <p className=\"text-sm text-slate-500 dark:text-slate-400\">{description}</p>\n      </div>\n    </div>\n  );\n\n  if (disabled) {\n    return <div title={`${title} (Em breve)`}>{content}</div>;\n  }\n\n  return (\n    <Link to={to} className=\"block\">\n      {content}\n    </Link>\n  );\n}\n\n\nfunction SettingsPage() {\n  const settingsSections: SettingsSectionProps[] = [\n    {\n      to: '/settings/profile',\n      icon: User,\n      title: 'Perfil',\n      description: 'Gerencie suas informações de perfil e preferências pessoais.',\n      disabled: true, // Placeholder until page is created\n    },\n    {\n      to: '/settings/llm',\n      icon: Cpu,\n      title: 'Provedores LLM',\n      description: 'Configure e gerencie suas conexões com Modelos de Linguagem (LLMs).',\n    },\n    {\n      to: '/settings/appearance',\n      icon: Palette,\n      title: 'Aparência',\n      description: 'Personalize o tema e a aparência da aplicação.',\n      disabled: true, // Placeholder\n    },\n    {\n      to: '/settings/notifications',\n      icon: Bell,\n      title: 'Notificações',\n      description: 'Defina suas preferências de notificação.',\n      disabled: true, // Placeholder\n    },\n     {\n      to: '/settings/security',\n      icon: ShieldCheck,\n      title: 'Segurança & Conta',\n      description: 'Gerencie configurações de segurança, autenticação e dados da conta.',\n      disabled: true, // Placeholder\n    },\n  ];\n\n  return (\n    <div className=\"p-4 md:p-6 lg:p-8\">\n      <header className=\"mb-6\">\n        <h1 className=\"text-3xl font-bold tracking-tight text-slate-900 dark:text-slate-50\">\n          Configurações\n        </h1>\n        <p className=\"text-slate-600 dark:text-slate-400 mt-1\">\n          Gerencie as configurações da sua conta e da aplicação Project Wiz.\n        </p>\n      </header>\n\n      <Card>\n        <CardHeader>\n          <CardTitle>Categorias de Configuração</CardTitle>\n          <CardDescription>\n            Navegue pelas diferentes seções para ajustar suas preferências.\n          </CardDescription>\n        </CardHeader>\n        <CardContent className=\"p-0\"> {/* Remove default padding to let links handle it */}\n          <div className=\"grid grid-cols-1\">\n            {settingsSections.map((section, index) => (\n              <React.Fragment key={section.to}>\n                <SettingsSectionLink {...section} />\n                {index < settingsSections.length - 1 && <Separator className=\"my-0\" />}\n              </React.Fragment>\n            ))}\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n\nexport const Route = createFileRoute('/(app)/settings/')({\n  component: SettingsPage,\n});\n","usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/app/(app)/settings/llm/$configId/edit/index.tsx","messages":[{"ruleId":"id-length","severity":1,"message":"Identifier name 'c' is too short (< 2).","line":34,"column":64,"nodeType":"Identifier","messageId":"tooShort","endLine":34,"endColumn":65},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":40,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":40,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2046,2049],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2046,2049],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"id-length","severity":1,"message":"Identifier name 'c' is too short (< 2).","line":56,"column":65,"nodeType":"Identifier","messageId":"tooShort","endLine":56,"endColumn":66}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { createFileRoute, useRouter, useParams, Link } from '@tanstack/react-router';\nimport { ArrowLeft } from 'lucide-react';\nimport React, { useEffect, useState } from 'react';\nimport { toast } from 'sonner';\n\nimport { Button } from '@/presentation/ui/components/ui/button';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/presentation/ui/components/ui/card';\nimport { LLMConfigForm, LLMConfigFormData } from '@/presentation/ui/features/llm/components/LLMConfigForm';\nimport { LLMConfig } from '@/presentation/ui/features/llm/components/LLMConfigList'; // For mock data type\n\n// Simulating a \"database\" of LLM configurations\n// In a real app, this would be fetched and updated via IPC/API\nlet mockLlmConfigsDb: Record<string, LLMConfig> = {\n  'configId1': { id: '1', name: 'OpenAI Pessoal', providerId: 'openai', baseUrl: 'https://api.openai.com/v1', apiKey: 'sk-...' },\n  'configId2': { id: '2', name: 'Ollama Local (Llama3)', providerId: 'ollama', baseUrl: 'http://localhost:11434' },\n  'configId3': { id: '3', name: 'DeepSeek Trabalho', providerId: 'deepseek', apiKey: 'dk-...' },\n};\n\nfunction EditLLMConfigPage() {\n  const router = useRouter();\n  const params = useParams({ from: '/(app)/settings/llm/$configId/edit/' });\n  const configId = params.configId;\n\n  const [initialValues, setInitialValues] = useState<Partial<LLMConfigFormData> | null>(null);\n  const [isLoading, setIsLoading] = useState(true);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [configName, setConfigName] = useState<string>('');\n\n  useEffect(() => {\n    setIsLoading(true);\n    // Simulate fetching config data\n    setTimeout(() => {\n      // Find by string ID from mock, as configId from URL is string\n      const foundConfig = Object.values(mockLlmConfigsDb).find(c => c.id === configId);\n\n      if (foundConfig) {\n        setInitialValues({\n          name: foundConfig.name,\n          providerId: foundConfig.providerId as LLMConfigFormData['providerId'], // Cast if necessary\n          apiKey: (foundConfig as any).apiKey || '', // apiKey might not be on LLMConfig type for list\n          baseUrl: foundConfig.baseUrl || '',\n        });\n        setConfigName(foundConfig.name);\n      } else {\n        toast.error(`Configuração LLM com ID \"${configId}\" não encontrada.`);\n      }\n      setIsLoading(false);\n    }, 300);\n  }, [configId]);\n\n  const handleSubmit = async (data: LLMConfigFormData) => {\n    setIsSubmitting(true);\n    console.log('Dados atualizados da configuração LLM:', configId, data);\n\n    await new Promise(resolve => setTimeout(resolve, 1000));\n    const configToUpdate = Object.values(mockLlmConfigsDb).find(c => c.id === configId);\n\n    if (configToUpdate) {\n      // Update the \"DB\" entry; find the actual key of the object to update\n      const dbKey = Object.keys(mockLlmConfigsDb).find(key => mockLlmConfigsDb[key].id === configId);\n      if(dbKey) {\n        mockLlmConfigsDb[dbKey] = {\n            ...mockLlmConfigsDb[dbKey],\n            ...data,\n            id: configId // ensure id remains the same\n        };\n      }\n      setConfigName(data.name);\n      toast.success(`Configuração LLM \"${data.name}\" atualizada com sucesso (simulado)!`);\n      router.navigate({ to: '/settings/llm', replace: true });\n    } else {\n      toast.error(\"Falha ao encontrar a configuração para atualizar.\");\n    }\n    setIsSubmitting(false);\n  };\n\n  if (isLoading) {\n    return <div className=\"p-8 text-center\">Carregando dados da configuração LLM para edição...</div>;\n  }\n\n  if (!initialValues) {\n    return (\n      <div className=\"p-8 text-center\">\n        <p>Configuração LLM não encontrada.</p>\n         <Button variant=\"outline\" className=\"mt-4\" asChild>\n            <Link to=\"/settings/llm\"><ArrowLeft className=\"mr-2 h-4 w-4\" /> Voltar para Lista de Configs LLM</Link>\n        </Button>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"p-4 md:p-6 lg:p-8 max-w-2xl mx-auto\">\n      <Button variant=\"outline\" size=\"sm\" className=\"mb-4\" asChild>\n        <Link to=\"/settings/llm\">\n          <ArrowLeft className=\"mr-2 h-4 w-4\" /> Voltar para Lista de Configs LLM\n        </Link>\n      </Button>\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"text-2xl\">Editar Configuração LLM: {configName}</CardTitle>\n          <CardDescription>\n            Modifique os detalhes desta configuração de Provedor LLM.\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          <LLMConfigForm\n            onSubmit={handleSubmit}\n            initialValues={initialValues}\n            isSubmitting={isSubmitting}\n            // submitButtonText is handled by LLMConfigForm based on initialValues\n          />\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n\nexport const Route = createFileRoute('/(app)/settings/llm/$configId/edit/')({\n  component: EditLLMConfigPage,\n});\n","usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/app/(app)/settings/llm/index.tsx","messages":[{"ruleId":"import/order","severity":1,"message":"There should be no empty line within import group","line":3,"column":1,"nodeType":"ImportDeclaration","endLine":3,"endColumn":52},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useEffect' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":27,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":36},{"ruleId":"id-length","severity":1,"message":"Identifier name 'c' is too short (< 2).","line":71,"column":39,"nodeType":"Identifier","messageId":"tooShort","endLine":71,"endColumn":40}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { createFileRoute, Link, useRouter } from '@tanstack/react-router';\nimport { PlusCircle } from 'lucide-react';\nimport React, { useState, useEffect } from 'react'; // Added useState, useEffect\n// import { useQuery, useMutation, useQueryClient } from '@tanstack/react-query'; // For real data fetching\n\nimport { toast } from 'sonner'; // For notifications\n\nimport {\n  AlertDialog,\n  AlertDialogAction,\n  AlertDialogCancel,\n  AlertDialogContent,\n  AlertDialogDescription,\n  AlertDialogFooter,\n  AlertDialogHeader,\n  AlertDialogTitle,\n} from \"@/presentation/ui/components/ui/alert-dialog\";\nimport { Button } from '@/presentation/ui/components/ui/button';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/presentation/ui/components/ui/card';\nimport { LLMConfigList, LLMConfig } from '@/presentation/ui/features/llm/components/LLMConfigList'; // Assuming LLMConfig type is exported\n// import { useIPC } from '@/presentation/ui/hooks/useIPC'; // For IPC calls\n\n\nfunction LLMConfigurationPage() {\n  const router = useRouter();\n  // const ipc = useIPC(); // Uncomment when IPC is ready\n  // const queryClient = useQueryClient(); // For TanStack Query\n\n  const [llmConfigs, setLlmConfigs] = useState<LLMConfig[]>([\n    // Mock data for UI development\n    { id: '1', name: 'OpenAI Pessoal', providerId: 'openai', baseUrl: 'https://api.openai.com/v1' },\n    { id: '2', name: 'Ollama Local (Llama3)', providerId: 'ollama', baseUrl: 'http://localhost:11434' },\n    { id: '3', name: 'DeepSeek Trabalho', providerId: 'deepseek' },\n  ]);\n  const [showDeleteConfirm, setShowDeleteConfirm] = useState<LLMConfig | null>(null);\n\n\n  // TODO: Replace with actual data fetching using TanStack Query and IPC\n  // const { data: fetchedConfigs, isLoading, error } = useQuery({\n  //   queryKey: ['llmConfigs'],\n  //   queryFn: async () => {\n  //     const result = await ipc.invoke<{ configs: LLMConfig[] }>('llm:list-configs');\n  //     if (result.success) return result.data?.configs || [];\n  //     throw new Error(result.error?.message || 'Failed to fetch LLM configurations');\n  //   },\n  // });\n\n  // useEffect(() => {\n  //   if (fetchedConfigs) {\n  //     setLlmConfigs(fetchedConfigs);\n  //   }\n  //   if (error) {\n  //     toast.error(`Erro ao buscar configurações LLM: ${error.message}`);\n  //   }\n  // }, [fetchedConfigs, error]);\n\n\n  const handleEdit = (configId: string) => {\n    router.navigate({ to: '/settings/llm/$configId/edit', params: { configId } });\n  };\n\n  const handleDelete = (config: LLMConfig) => {\n    setShowDeleteConfirm(config);\n  };\n\n  const confirmDelete = async () => {\n    if (!showDeleteConfirm) return;\n    // TODO: Implement actual deletion via IPC and TanStack Mutation\n    // mutation.mutate(showDeleteConfirm.id, { ... });\n    toast.success(`Configuração \"${showDeleteConfirm.name}\" excluída (simulado).`);\n    setLlmConfigs(prev => prev.filter(c => c.id !== showDeleteConfirm.id)); // Optimistic update for UI\n    setShowDeleteConfirm(null);\n  };\n\n  // if (isLoading) return <p>Carregando configurações...</p>;\n\n  return (\n    <div className=\"p-4 md:p-6 lg:p-8\">\n      <Card>\n        <CardHeader className=\"flex flex-row items-start sm:items-center justify-between gap-2\">\n          <div>\n            <CardTitle className=\"text-2xl\">Configurações de Provedor LLM</CardTitle>\n            <CardDescription>\n              Gerencie suas conexões com Modelos de Linguagem (LLMs).\n            </CardDescription>\n          </div>\n          <Button asChild size=\"sm\">\n            <Link to=\"/settings/llm/new\">\n              <PlusCircle className=\"mr-2 h-4 w-4\" />\n              Nova Configuração\n            </Link>\n          </Button>\n        </CardHeader>\n        <CardContent>\n          {llmConfigs.length === 0 ? (\n            <div className=\"text-center py-10 border-2 border-dashed border-slate-200 dark:border-slate-700 rounded-lg\">\n              <svg className=\"mx-auto h-12 w-12 text-slate-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" aria-hidden=\"true\">\n                <path vectorEffect=\"non-scaling-stroke\" strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z\" />\n              </svg>\n              <h3 className=\"mt-2 text-sm font-medium text-slate-900 dark:text-slate-50\">Nenhuma configuração LLM</h3>\n              <p className=\"mt-1 text-sm text-slate-500 dark:text-slate-400\">Comece adicionando uma nova configuração de LLM.</p>\n              <div className=\"mt-6\">\n                <Button asChild variant=\"outline\">\n                  <Link to=\"/settings/llm/new\">\n                    <PlusCircle className=\"mr-2 h-4 w-4\" />\n                    Criar Configuração\n                  </Link>\n                </Button>\n              </div>\n            </div>\n          ) : (\n            <LLMConfigList\n              configs={llmConfigs}\n              onEdit={handleEdit}\n              onDelete={handleDelete}\n            />\n          )}\n        </CardContent>\n      </Card>\n\n      {showDeleteConfirm && (\n        <AlertDialog open onOpenChange={(open) => !open && setShowDeleteConfirm(null)}>\n          <AlertDialogContent>\n            <AlertDialogHeader>\n              <AlertDialogTitle>Confirmar Exclusão</AlertDialogTitle>\n              <AlertDialogDescription>\n                Tem certeza que deseja excluir a configuração LLM \"{showDeleteConfirm.name}\"?\n                Esta ação não pode ser desfeita.\n              </AlertDialogDescription>\n            </AlertDialogHeader>\n            <AlertDialogFooter>\n              <AlertDialogCancel onClick={() => setShowDeleteConfirm(null)}>Cancelar</AlertDialogCancel>\n              <AlertDialogAction\n                onClick={confirmDelete}\n                className=\"bg-destructive text-destructive-foreground hover:bg-destructive/90\"\n              >\n                Excluir\n              </AlertDialogAction>\n            </AlertDialogFooter>\n          </AlertDialogContent>\n        </AlertDialog>\n      )}\n    </div>\n  );\n}\n\nexport const Route = createFileRoute('/(app)/settings/llm/')({\n  component: LLMConfigurationPage,\n});\n","usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/app/(app)/settings/llm/new/index.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/app/(app)/settings/profile/index.tsx","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setCurrentAvatar' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":33,"column":25,"nodeType":null,"messageId":"unusedVar","endLine":33,"endColumn":41,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/app/(app)/user/_layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/app/(app)/user/dm/$conversationId/index.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ChatMessage' is defined but never used. Allowed unused vars must match /^_/u.","line":17,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":17,"endColumn":14},{"ruleId":"max-lines-per-function","severity":1,"message":"Function 'DirectMessagePage' has too many lines (115). Maximum allowed is 100.","line":38,"column":1,"nodeType":"FunctionDeclaration","messageId":"exceed","endLine":172,"endColumn":2}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { createFileRoute, useParams, useRouter } from '@tanstack/react-router';\nimport { ArrowLeft, Loader2, ServerCrash } from 'lucide-react';\nimport React, { useMemo } from 'react'; // Removed useEffect, useState as they are no longer directly used\nimport { toast } from 'sonner';\n\nimport { Button } from '@/presentation/ui/components/ui/button';\nimport { ChatWindow } from '@/presentation/ui/features/chat/components/ChatWindow';\nimport { useIpcMutation } from '@/presentation/ui/hooks/ipc/useIpcMutation'; // Import useIpcMutation\nimport { useIpcQuery } from '@/presentation/ui/hooks/ipc/useIpcQuery';\nimport { useIpcSubscription } from '@/presentation/ui/hooks/ipc/useIpcSubscription';\n\nimport { IPC_CHANNELS } from '@/shared/ipc-channels';\n// ChatMessage is used in handleSendMessage\n// DirectMessageItem is used for conversationDetails type\nimport type {\n  DirectMessageItem,\n  ChatMessage,\n  GetDMMessagesRequest,\n  GetDMMessagesResponseData,\n  DMMessageReceivedEventPayload,\n  GetDMConversationsListResponseData,\n  SendDMMessageRequest, // Import request type for sending message\n  SendDMMessageResponseData, // Import response type for sending message\n  IPCResponse // For the mutation's expected response structure\n} from '@/shared/ipc-types';\n\n// This type is for the data structure ChatWindow expects for a conversation header.\ninterface ChatWindowConversationHeader {\n  id: string;\n  name: string;\n  type: 'dm' | 'channel' | 'agent';\n  avatarUrl?: string;\n}\n\n// Mock current user ID - this would ideally come from a global user context/store\nconst currentUserId = \"userJdoe\";\n\nfunction DirectMessagePage() {\n  const params = useParams({ from: '/(app)/user/dm/$conversationId/' });\n  const conversationId = params.conversationId;\n  const router = useRouter();\n\n  const { data: dmConversations, isLoading: isLoadingConvList, error: convListError } = useIpcQuery<null, GetDMConversationsListResponseData>(\n    IPC_CHANNELS.GET_DM_CONVERSATIONS_LIST,\n    null,\n    { staleTime: 5 * 60 * 1000 } \n  );\n\n  const conversationDetails: DirectMessageItem | null = useMemo(() => {\n    if (!dmConversations) return null;\n    return dmConversations.find(conv => conv.id === conversationId) || null;\n  }, [dmConversations, conversationId]);\n  \n  const { data: messages, isLoading: isLoadingMessages, error: messagesError } = useIpcSubscription<\n    GetDMMessagesRequest,\n    GetDMMessagesResponseData, \n    DMMessageReceivedEventPayload\n  >(\n    IPC_CHANNELS.GET_DM_MESSAGES,\n    { conversationId },\n    IPC_CHANNELS.DM_MESSAGE_RECEIVED_EVENT,\n    {\n      getSnapshot: (prevMessages, eventPayload) => {\n        if (eventPayload.conversationId === conversationId) {\n          if (prevMessages?.find(msg => msg.id === eventPayload.message.id)) {\n            return prevMessages;\n          }\n          return [...(prevMessages || []), eventPayload.message];\n        }\n        return prevMessages || [];\n      },\n      onError: (err) => { // This onError is for the subscription part\n        toast.error(`Erro na subscrição de mensagens: ${err.message}`);\n      }\n    }\n  );\n\n  const sendMessageMutation = useIpcMutation<\n    SendDMMessageRequest,\n    IPCResponse<SendDMMessageResponseData>\n  >(\n    IPC_CHANNELS.SEND_DM_MESSAGE,\n    {\n      onSuccess: (response) => {\n        if (response.success && response.data) {\n          // Message sent successfully.\n          // The DM_MESSAGE_RECEIVED_EVENT should update the message list via useIpcSubscription.\n          // No need to manually add the message here if the event system is working.\n          console.log('Message sent, response data:', response.data);\n        } else {\n          // This case should ideally be handled by onError if IPCResponse wrapper is consistent\n          toast.error(`Falha ao enviar mensagem: ${response.error?.message || 'Erro desconhecido retornando sucesso.'}`);\n        }\n      },\n      onError: (error) => {\n        toast.error(`Falha ao enviar mensagem: ${error.message}`);\n      },\n    }\n  );\n\n  const handleSendMessage = (content: string) => {\n    if (!conversationDetails) {\n      toast.error(\"Detalhes da conversa não encontrados para enviar mensagem.\");\n      return;\n    }\n    if (sendMessageMutation.isLoading) {\n      toast.info(\"Aguarde o envio da mensagem anterior.\");\n      return;\n    }\n    // No local optimistic update here; relying on DM_MESSAGE_RECEIVED_EVENT\n    // after successful IPC call from main process.\n    sendMessageMutation.mutate({ conversationId, content });\n  };\n  \n  const isLoading = isLoadingMessages || isLoadingConvList;\n  const combinedError = messagesError || convListError; // Prioritize messagesError if both exist\n\n  if (isLoading) {\n    return <div className=\"flex-1 flex items-center justify-center p-8 bg-white dark:bg-slate-900\"><Loader2 className=\"h-8 w-8 animate-spin text-sky-500\"/> Carregando conversa...</div>;\n  }\n\n  if (combinedError) {\n    // Determine which error to show, or show a generic one.\n    // The individual hooks might already show toasts.\n    const errorToShow = messagesError || convListError;\n    return (\n      <div className=\"flex-1 flex flex-col items-center justify-center p-8 bg-red-50 dark:bg-red-900/10 rounded-lg\">\n        <ServerCrash className=\"h-12 w-12 text-red-500 dark:text-red-400 mb-4\" />\n        <h2 className=\"text-xl font-semibold text-red-700 dark:text-red-300 mb-2\">Erro ao Carregar Conversa</h2>\n        <p className=\"text-sm text-red-600 dark:text-red-400 mb-1\">{errorToShow?.message}</p>\n        <Button onClick={() => router.navigate({ to: \"/user/\"})} variant=\"destructive\" className=\"mt-4\">\n          <ArrowLeft className=\"mr-2 h-4 w-4\" /> Voltar para DMs\n        </Button>\n      </div>\n    );\n  }\n\n  if (!conversationDetails) {\n    // This case might occur if dmConversations loaded but the specific conversationId was not found\n    return (\n      <div className=\"flex-1 flex flex-col items-center justify-center p-8 bg-white dark:bg-slate-900\">\n        <ServerCrash className=\"h-12 w-12 text-slate-500 dark:text-slate-400 mb-4\" />\n        <h2 className=\"text-xl font-semibold mb-2\">Conversa não encontrada</h2>\n        <p className=\"text-sm text-slate-600 dark:text-slate-400 mb-4\">\n          Não foi possível encontrar detalhes para a conversa com ID: {conversationId}.\n        </p>\n        <Button onClick={() => router.navigate({ to: \"/user/\"})} variant=\"outline\" className=\"mt-4\">\n          <ArrowLeft className=\"mr-2 h-4 w-4\" /> Voltar para DMs\n        </Button>\n      </div>\n    );\n  }\n\n  const chatWindowConversationHeader: ChatWindowConversationHeader = {\n      id: conversationDetails.id,\n      name: conversationDetails.name,\n      type: conversationDetails.type === 'agent' ? 'dm' : conversationDetails.type,\n      avatarUrl: conversationDetails.avatarUrl,\n  };\n\n  return (\n    <div className=\"flex flex-col flex-1 h-full overflow-hidden\">\n        <ChatWindow\n        conversation={chatWindowConversationHeader}\n        messages={messages || []} \n        onSendMessage={handleSendMessage}\n        isLoading={isLoadingMessages} // Pass message-specific loading to ChatWindow\n        currentUserId={currentUserId}\n        />\n    </div>\n  );\n}\n\nexport const Route = createFileRoute('/(app)/user/dm/$conversationId/')({\n  component: DirectMessagePage,\n});\n","usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/app/(app)/user/index.tsx","messages":[{"ruleId":"max-lines-per-function","severity":1,"message":"Function 'UserIndexPage' has too many lines (120). Maximum allowed is 100.","line":41,"column":1,"nodeType":"FunctionDeclaration","messageId":"exceed","endLine":167,"endColumn":2},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":142,"column":64,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":142,"endColumn":67,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7597,7600],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7597,7600],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { createFileRoute, Link } from '@tanstack/react-router';\nimport { MessageSquareText, Settings, UserCircle, Activity, Users, Bot as BotIcon } from 'lucide-react';\nimport React from 'react';\n\nimport { Avatar, AvatarFallback } from '@/presentation/ui/components/ui/avatar'; // AvatarImage not used in this version\nimport { Button } from '@/presentation/ui/components/ui/button';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/presentation/ui/components/ui/card';\n\n// Mock data for quick stats or recent activity (can be expanded)\nconst userStatsMock = {\n  unreadDms: 3, // From mockDirectMessages in UserSidebar\n  activeAgents: 2, // From mockDirectMessages filtering agents\n  projectsInvolved: 3, // Example\n};\n\n// Define a more specific type for Link 'to' props for type safety with TanStack Router\ntype RecentActivityLink =\n  | '/user/dm/$conversationId'\n  | '/projects/$projectId'\n  | '/settings/llm'\n  | '/settings/appearance'\n  | '/settings/profile'\n  | '/settings';\n\n// Define a more specific type for the `params` prop of the Link component\n// This helps satisfy the `no-explicit-any` ESLint rule.\n// It's a union of possible parameter objects for the links in recentUserActivityMock.\ntype ActivityLinkParams =\n  | { conversationId: string }\n  | { projectId: string }\n  | undefined; // For links that don't have params like /settings/appearance\n\nconst recentUserActivityMock: {id: string, text: string, time: string, type: string, linkTo: RecentActivityLink, icon: React.ElementType, params?: ActivityLinkParams}[] = [\n    {id: '1', text: \"Nova mensagem de CoderBot-Alpha.\", time: \"5m atrás\", type: \"dm\", linkTo: \"/user/dm/$conversationId\", params: {conversationId: 'agent001'}, icon: BotIcon},\n    {id: '2', text: \"Alice (Designer) enviou uma nova mensagem.\", time: \"10m atrás\", type: \"dm\", linkTo: \"/user/dm/$conversationId\", params: {conversationId: 'userAlice'}, icon: UserCircle},\n    {id: '3', text: \"Você atualizou suas configurações de Aparência.\", time: \"3h atrás\", type: \"settings\", linkTo: \"/settings/appearance\", icon: Settings}, // No params needed\n    {id: '4', text: \"Nova atividade no Projeto Phoenix.\", time: \"1d atrás\", type: \"project\", linkTo: \"/projects/$projectId\", params: {projectId: 'mockId1'}, icon: Activity},\n];\n\n\nfunction UserIndexPage() {\n  // This page is the default content shown when navigating to /user/\n  // It serves as a user-specific dashboard or landing spot within their personal area.\n\n  return (\n    <div className=\"flex-1 p-4 md:p-6 lg:p-8 overflow-y-auto bg-slate-50 dark:bg-slate-800/20\">\n      <header className=\"mb-8\">\n        <h1 className=\"text-2xl md:text-3xl font-bold text-slate-800 dark:text-slate-100\">\n          Sua Área Pessoal\n        </h1>\n        <p className=\"text-slate-600 dark:text-slate-400 mt-1\">\n          Bem-vindo! Gerencie suas conversas diretas, acompanhe atividades e acesse suas configurações.\n        </p>\n      </header>\n\n      {/* Quick Stats Cards */}\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 mb-8\">\n        <Card className=\"hover:shadow-md transition-shadow\">\n          <CardHeader className=\"flex flex-row items-center justify-between pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Mensagens Não Lidas</CardTitle>\n            <MessageSquareText className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\">{userStatsMock.unreadDms}</div>\n            <p className=\"text-xs text-muted-foreground\">Em suas DMs</p>\n          </CardContent>\n        </Card>\n         <Card className=\"hover:shadow-md transition-shadow\">\n          <CardHeader className=\"flex flex-row items-center justify-between pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Agentes Contatados</CardTitle>\n            <BotIcon className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\">{userStatsMock.activeAgents}</div>\n            <p className=\"text-xs text-muted-foreground\">Com quem você interagiu</p>\n          </CardContent>\n        </Card>\n        <Card className=\"hover:shadow-md transition-shadow md:col-span-2 lg:col-span-1\">\n          <CardHeader className=\"flex flex-row items-center justify-between pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Projetos Envolvidos</CardTitle>\n            <Users className=\"h-4 w-4 text-muted-foreground\" /> {/* Changed icon to Users */}\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\">{userStatsMock.projectsInvolved}</div>\n            <p className=\"text-xs text-muted-foreground\">Que você participa</p>\n          </CardContent>\n        </Card>\n      </div>\n\n      <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n        {/* Quick Actions / Links */}\n        <div className=\"lg:col-span-1 space-y-4\">\n            <Card>\n                <CardHeader>\n                    <CardTitle className=\"text-lg\">Acesso Rápido</CardTitle>\n                </CardHeader>\n                <CardContent className=\"flex flex-col space-y-2\">\n                    <Button variant=\"outline\" asChild className=\"justify-start text-left\">\n                        <Link to=\"/user/dm/$conversationId\" params={{conversationId: 'agent001'}}>\n                            <MessageSquareText className=\"mr-2 h-4 w-4 text-sky-500\"/>\n                            Conversar com CoderBot\n                        </Link>\n                    </Button>\n                    <Button variant=\"outline\" asChild className=\"justify-start text-left\">\n                        <Link to=\"/settings/profile\">\n                            <UserCircle className=\"mr-2 h-4 w-4 text-green-500\"/>\n                            Editar Meu Perfil\n                        </Link>\n                    </Button>\n                     <Button variant=\"outline\" asChild className=\"justify-start text-left\">\n                        <Link to=\"/settings\">\n                            <Settings className=\"mr-2 h-4 w-4 text-slate-500\"/>\n                            Ver Todas Configurações\n                        </Link>\n                    </Button>\n                </CardContent>\n            </Card>\n        </div>\n\n        {/* Recent Activity Feed */}\n        <div className=\"lg:col-span-2\">\n            <Card>\n            <CardHeader>\n                <CardTitle  className=\"text-lg\">Atividade Recente</CardTitle>\n                <CardDescription>Suas últimas interações e notificações importantes.</CardDescription>\n            </CardHeader>\n            <CardContent>\n                {recentUserActivityMock.length > 0 ? (\n                    <ul className=\"space-y-3\">\n                        {recentUserActivityMock.map(activity => {\n                            const Icon = activity.icon;\n                            return (\n                            <li key={activity.id} className=\"flex items-start space-x-3 p-2 rounded-md hover:bg-slate-50 dark:hover:bg-slate-800/30\">\n                                <Avatar className=\"h-8 w-8 mt-0.5\">\n                                    <AvatarFallback className=\"bg-slate-200 dark:bg-slate-700\">\n                                        <Icon className=\"h-4 w-4 text-slate-500 dark:text-slate-400\"/>\n                                    </AvatarFallback>\n                                </Avatar>\n                                <div>\n                                <Link\n                                    to={activity.linkTo}\n                                    params={activity.params as any} // Using 'as any' here to bypass strict param typing for demo\n                                    className=\"hover:underline text-sm text-slate-700 dark:text-slate-200\"\n                                >\n                                    {activity.text}\n                                </Link>\n                                <span className=\"block text-xs text-slate-500 dark:text-slate-400\">{activity.time}</span>\n                                </div>\n                            </li>\n                        )})}\n                    </ul>\n                ) : (\n                    <p className=\"text-sm text-slate-500 dark:text-slate-400 text-center py-4\">Nenhuma atividade recente para mostrar.</p>\n                )}\n            </CardContent>\n            </Card>\n        </div>\n      </div>\n\n      <div className=\"mt-12 text-center\">\n        <p className=\"text-sm text-slate-500 dark:text-slate-400\">\n          Para iniciar uma nova conversa, use a barra lateral à esquerda.\n        </p>\n      </div>\n    </div>\n  );\n}\n\nexport const Route = createFileRoute('/(app)/user/')({\n  component: UserIndexPage,\n});\n","usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/app/(public)/onboarding/index.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/app/__root.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/app/index.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/components/common/MarkdownRenderer.tsx","messages":[{"ruleId":"id-length","severity":1,"message":"Identifier name 'a' is too short (< 2).","line":42,"column":5,"nodeType":"Identifier","messageId":"tooShort","endLine":42,"endColumn":6},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'node' is defined but never used. Allowed unused args must match /^_/u.","line":42,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":42,"endColumn":14}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport ReactMarkdown, { Options } from 'react-markdown';\nimport remarkGfm from 'remark-gfm';\n// import rehypeRaw from 'rehype-raw'; // Optional: if you need to render raw HTML from markdown\n// For syntax highlighting:\n// import { Prism as SyntaxHighlighter } from 'react-syntax-highlighter';\n// import { vscDarkPlus } from 'react-syntax-highlighter/dist/esm/styles/prism'; // Choose a theme\n\nimport { cn } from '@/presentation/ui/lib/utils';\n\ninterface MarkdownRendererProps {\n  content: string | null | undefined;\n  className?: string; // Custom classes for the wrapper div\n  proseClassName?: string; // Custom classes specifically for Tailwind Prose\n  components?: Options['components']; // Allow overriding default HTML element rendering\n}\n\nexport function MarkdownRenderer({\n  content,\n  className,\n  proseClassName,\n  components: customComponents,\n}: MarkdownRendererProps) {\n  if (content === null || content === undefined) {\n    return null;\n  }\n\n  // Base prose classes for Tailwind Typography. Can be extended or overridden by `proseClassName`.\n  const defaultProseSetup = cn(\n    \"prose prose-sm dark:prose-invert max-w-none\", // General styling\n    \"prose-p:my-1.5 prose-headings:my-3 prose-ul:my-1.5 prose-ol:my-1.5 prose-li:my-0.5\", // Spacing for common elements\n    \"prose-blockquote:my-2 prose-blockquote:not-italic prose-blockquote:border-l-4 prose-blockquote:pl-3 prose-blockquote:text-slate-600 dark:prose-blockquote:text-slate-400\", // Blockquotes\n    \"prose-pre:my-2 prose-pre:p-0 prose-pre:bg-transparent prose-pre:rounded-md\", // Reset <pre> for custom code block styling or syntax highlighter\n    \"prose-code:px-1 prose-code:py-0.5 prose-code:text-xs prose-code:font-mono prose-code:rounded prose-code:bg-slate-100 dark:prose-code:bg-slate-800\", // Inline code\n    \"prose-a:text-sky-600 hover:prose-a:text-sky-700 dark:prose-a:text-sky-400 dark:hover:prose-a:text-sky-300 hover:prose-a:underline\", // Links\n    \"prose-table:my-2 prose-table:text-sm prose-thead:border-b prose-th:px-2 prose-th:py-1 prose-th:font-semibold prose-td:px-2 prose-td:py-1 prose-tr:border-b\", // Tables\n    proseClassName, // Allow parent to provide additional/override prose classes\n  );\n\n  // Default component overrides, can be merged with or overridden by `customComponents` prop\n  const defaultComponents: Options['components'] = {\n    a: ({node, ...props}) => <a {...props} target=\"_blank\" rel=\"noopener noreferrer\" />, // Open links in new tab\n\n    // Custom styling for code blocks (pre > code)\n    // This is a basic version. For syntax highlighting, you'd integrate react-syntax-highlighter here.\n    code({ node, className: langClassName, children, ...props }) {\n      const match = /language-(\\w+)/.exec(langClassName || '');\n      const language = match ? match[1] : null;\n\n      // This checks if the `<code>` is directly inside a `<pre>` (fenced code block)\n      // or if it's an inline `code` snippet.\n      // react-markdown v8+ typically handles inline code differently, so this check might need adjustment\n      // or rely on prose-code styling for inline.\n      // For explicit inline check, one might need to inspect `node.position`.\n      // However, Tailwind prose usually styles inline `<code>` and `<pre><code>` differently.\n      // The `prose-code:` styles above target inline code.\n      // The `prose-pre:` styles reset the container for the block below.\n\n      if (node?.parentElement?.tagName === 'pre') { // Fenced code block\n        return (\n          <div className=\"my-2 bg-slate-100 dark:bg-slate-800 rounded-md overflow-hidden text-xs\">\n            {language && (\n              <div className=\"px-3 py-1 text-xs text-slate-500 dark:text-slate-400 border-b border-slate-200 dark:border-slate-700\">\n                {language}\n              </div>\n            )}\n            {/* The `whitespace-pre-wrap` and `break-words` on the parent `prose` div should handle formatting */}\n            <pre className=\"p-3 overflow-x-auto\"><code className={cn(\"font-mono\", langClassName)} {...props}>{children}</code></pre>\n          </div>\n        );\n      }\n\n      // Inline code (already styled by prose-code:)\n      return (\n        <code className={langClassName} {...props}>\n          {children}\n        </code>\n      );\n\n      // Example with react-syntax-highlighter (install it first)\n      // if (node?.parentElement?.tagName === 'pre' && match) {\n      //   return (\n      //     <SyntaxHighlighter\n      //       style={vscDarkPlus} // Choose your theme\n      //       language={match[1]}\n      //       PreTag=\"div\" // Outer tag for the highlighter\n      //       className=\"text-xs my-2\"\n      //       showLineNumbers // Optional\n      //       wrapLines\n      //       {...props}\n      //     >\n      //       {String(children).replace(/\\n$/, '')}\n      //     </SyntaxHighlighter>\n      //   );\n      // }\n      // // Fallback for inline code or code blocks without a language\n      // return (\n      //   <code className={cn(langClassName, node?.parentElement?.tagName === 'pre' && \"block p-2 bg-slate-100 dark:bg-slate-800 rounded overflow-x-auto text-xs\")} {...props}>\n      //     {children}\n      //   </code>\n      // );\n    },\n  };\n\n  const mergedComponents = { ...defaultComponents, ...customComponents };\n\n  return (\n    <div className={cn(defaultProseSetup, className)}>\n      <ReactMarkdown\n        remarkPlugins={[remarkGfm]}\n        // rehypePlugins={[rehypeRaw]} // Uncomment if rendering raw HTML from markdown is needed and trusted\n        components={mergedComponents}\n      >\n        {content}\n      </ReactMarkdown>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/components/common/theme-provider.tsx","messages":[{"ruleId":"id-length","severity":1,"message":"Identifier name 'e' is too short (< 2).","line":30,"column":14,"nodeType":"Identifier","messageId":"tooShort","endLine":30,"endColumn":15},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'e' is defined but never used. Allowed unused caught errors must match /^_/u.","line":30,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":30,"endColumn":15},{"ruleId":"id-length","severity":1,"message":"Identifier name 'e' is too short (< 2).","line":51,"column":14,"nodeType":"Identifier","messageId":"tooShort","endLine":51,"endColumn":15},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'e' is defined but never used. Allowed unused caught errors must match /^_/u.","line":51,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":51,"endColumn":15}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { createContext, useContext, useState, useEffect } from 'react';\n\ntype Theme = 'light' | 'dark' | 'system'; // Added 'system' as a valid theme type\n\ninterface ThemeProviderState {\n  theme: Theme; // This will store 'light' or 'dark' after resolving 'system'\n  setTheme: (theme: Theme) => void;\n}\n\nconst ThemeProviderContext = createContext<ThemeProviderState | undefined>(undefined);\n\ninterface ThemeProviderProps {\n  children: React.ReactNode;\n  defaultTheme?: Theme;\n  storageKey?: string;\n}\n\nexport function ThemeProvider({\n  children,\n  defaultTheme = 'system',\n  storageKey = 'vite-ui-theme',\n}: ThemeProviderProps) {\n  const [theme, setThemeState] = useState<Theme>(() => {\n    try {\n      const storedTheme = localStorage.getItem(storageKey) as Theme | null;\n      if (storedTheme) {\n        return storedTheme;\n      }\n      return defaultTheme;\n    } catch (e) {\n      // localStorage is not available (e.g., SSR or restricted environment)\n      // console.warn('localStorage not available for theme persistence:', e);\n      return defaultTheme;\n    }\n  });\n\n  useEffect(() => {\n    const root = window.document.documentElement;\n    root.classList.remove('light', 'dark');\n\n    let effectiveTheme = theme;\n    if (theme === 'system') {\n      effectiveTheme = window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';\n    }\n\n    root.classList.add(effectiveTheme);\n\n    try {\n      // Store the raw theme value (could be 'system')\n      localStorage.setItem(storageKey, theme);\n    } catch (e) {\n      // Ignore localStorage errors if persistence fails\n      // console.warn('Failed to persist theme to localStorage:', e);\n    }\n  }, [theme, storageKey]);\n\n  const handleSetTheme = (newTheme: Theme) => {\n    setThemeState(newTheme);\n  };\n\n  return (\n    <ThemeProviderContext.Provider value={{ theme, setTheme: handleSetTheme }}>\n      {children}\n    </ThemeProviderContext.Provider>\n  );\n}\n\nexport const useTheme = (): ThemeProviderState => {\n  const context = useContext(ThemeProviderContext);\n  if (context === undefined) {\n    throw new Error('useTheme must be used within a ThemeProvider');\n  }\n  return context;\n};\n","usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/components/layout/AppSidebar.tsx","messages":[{"ruleId":"@typescript-eslint/naming-convention","severity":1,"message":"Parameter name `IconElement` must match one of the following formats: camelCase","line":25,"column":9,"nodeType":"Identifier","messageId":"doesNotMatchFormat","endLine":25,"endColumn":20}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Link, LinkProps } from '@tanstack/react-router';\nimport { Home, PlusCircle, Archive, Briefcase, Settings, LogOut, LucideIcon } from 'lucide-react';\nimport React from 'react';\n\nimport { Avatar, AvatarFallback, AvatarImage } from '@/presentation/ui/components/ui/avatar'; // Added Avatar components\nimport { Button, buttonVariants } from '@/presentation/ui/components/ui/button'; // Added buttonVariants\nimport { ScrollArea } from '@/presentation/ui/components/ui/scroll-area';\nimport { Separator } from '@/presentation/ui/components/ui/separator';\nimport { Tooltip, TooltipContent, TooltipProvider, TooltipTrigger } from '@/presentation/ui/components/ui/tooltip';\nimport { cn } from '@/presentation/ui/lib/utils';\n\n// Interface para os itens da AppSidebar, focada em ícones e tooltips\ninterface AppSidebarItemProps extends Omit<LinkProps, 'children' | 'title'> {\n  tooltip: string;\n  icon: LucideIcon;\n  isAvatar?: boolean; // Para itens de projeto que podem usar Avatar\n  avatarSrc?: string;\n  avatarFallback: string; // Obrigatório para consistência\n  action?: () => void; // Para botões que não são links\n  className?: string;\n}\n\nfunction AppSidebarItem({\n  tooltip,\n  icon: IconElement, // Renomeado para IconElement para satisfazer o ESLint\n  isAvatar = false,\n  avatarSrc,\n  avatarFallback,\n  action,\n  className,\n  ...linkProps // Resto das props são para o Link do TanStack Router\n}: AppSidebarItemProps) {\n  const content = isAvatar ? (\n    <Avatar className=\"h-9 w-9 text-sm\">\n      {avatarSrc && <AvatarImage src={avatarSrc} alt={tooltip} />}\n      <AvatarFallback className=\"bg-slate-700 text-slate-200 dark:bg-slate-600 dark:text-slate-100\">\n        {avatarFallback}\n      </AvatarFallback>\n    </Avatar>\n  ) : (\n    <IconElement className=\"h-6 w-6\" /> // Usar IconElement\n  );\n\n  const commonButtonClasses = cn(\n    buttonVariants({ variant: 'ghost', size: 'icon' }), // Usar 'ghost' para melhor adaptação à sidebar fina\n    \"h-12 w-12 rounded-2xl hover:bg-slate-200 dark:hover:bg-slate-700\", // Estilo base\n    className // Permite override de classes\n  );\n\n  const activeLinkClasses = \"!bg-sky-600 text-white dark:!bg-sky-500\"; // Estilo para link ativo\n\n  return (\n    <TooltipProvider delayDuration={100}>\n      <Tooltip>\n        <TooltipTrigger asChild>\n          {action ? (\n            <Button\n              onClick={action}\n              className={commonButtonClasses}\n              aria-label={tooltip}\n            >\n              {content}\n            </Button>\n          ) : (\n            <Link\n              {...linkProps}\n              className={cn(commonButtonClasses)}\n              activeProps={{ className: activeLinkClasses }}\n              aria-label={tooltip}\n            >\n              {content}\n            </Link>\n          )}\n        </TooltipTrigger>\n        <TooltipContent side=\"right\" className=\"ml-2\">\n          <p>{tooltip}</p>\n        </TooltipContent>\n      </Tooltip>\n    </TooltipProvider>\n  );\n}\n\n// Mock data para projetos, simulando o que viria do estado/API\nconst mockUserProjects = [\n  { id: '1', name: 'Projeto Phoenix', initials: 'PH', iconUrl: '/avatars/project-phoenix.png' },\n  { id: '2', name: 'Operação Quimera', initials: 'OQ' },\n  { id: '3', name: 'Iniciativa Netuno', initials: 'IN', iconUrl: '/avatars/project-neptune.png' },\n  { id: '4', name: 'Legado Moderno', initials: 'LM' },\n];\n\n\nexport function AppSidebar() {\n  // Rota para onde o botão \"Home\" levará, ajustado para /user/\n  const userHomeRoute = '/user/';\n\n  return (\n    <aside className=\"w-16 flex-shrink-0 h-screen flex flex-col items-center gap-2 py-3 bg-slate-100 dark:bg-slate-900 border-r border-slate-200 dark:border-slate-800\">\n      {/* Botão Inicial/Home */}\n      <AppSidebarItem\n        to={userHomeRoute} // Atualizado para /user/\n        tooltip=\"Área do Usuário / DMs\" // Tooltip atualizado\n        icon={Home}\n        avatarFallback=\"U\"\n      />\n\n      <Separator className=\"my-1 w-3/4\" />\n\n      {/* Ações Principais */}\n      <AppSidebarItem\n        tooltip=\"Adicionar Novo Projeto\"\n        icon={PlusCircle}\n        to=\"/projects/new\" // Link direto para a página de novo projeto\n        avatarFallback=\"+\" // Não usado\n      />\n      <AppSidebarItem\n        tooltip=\"Projetos Arquivados\"\n        icon={Archive}\n        to=\"/projects/archived\" // Rota placeholder\n        avatarFallback=\"A\" // Não usado\n      />\n\n      <Separator className=\"my-1 w-3/4\" />\n\n      {/* Lista de Projetos Ativos */}\n      <ScrollArea className=\"flex-1 w-full overflow-y-auto\">\n        <div className=\"flex flex-col items-center gap-2 px-2\">\n          {mockUserProjects.map(project => (\n            <AppSidebarItem\n              key={project.id}\n              to=\"/projects/$projectId\"\n              params={{ projectId: project.id }}\n              tooltip={project.name}\n              icon={Briefcase} // Ícone padrão se não for avatar\n              isAvatar={true} // Usar Avatar para projetos\n              avatarSrc={project.iconUrl}\n              avatarFallback={project.initials}\n            />\n          ))}\n        </div>\n      </ScrollArea>\n\n      <Separator className=\"my-1 w-3/4\" />\n\n      {/* Ações no Rodapé */}\n      <div className=\"mt-auto flex flex-col items-center gap-2\">\n         <AppSidebarItem\n            to=\"/settings\"\n            tooltip=\"Configurações\"\n            icon={Settings}\n            avatarFallback=\"S\" // Não usado\n        />\n        <AppSidebarItem\n            tooltip=\"Sair (Logout)\"\n            icon={LogOut}\n            action={() => { console.log(\"Logout action triggered (simulated)\"); alert(\"Logout (simulado)\"); }} // Ação simulada\n            avatarFallback=\"L\" // Não usado\n        />\n      </div>\n    </aside>\n  );\n}\n\nexport default AppSidebar;\n","usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/components/ui/accordion.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/components/ui/alert-dialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/components/ui/alert.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/components/ui/aspect-ratio.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/components/ui/avatar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/components/ui/badge.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/components/ui/breadcrumb.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/components/ui/button.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/components/ui/calendar.tsx","messages":[{"ruleId":"max-lines-per-function","severity":1,"message":"Function 'Calendar' has too many lines (154). Maximum allowed is 100.","line":15,"column":1,"nodeType":"FunctionDeclaration","messageId":"exceed","endLine":171,"endColumn":2},{"ruleId":"@typescript-eslint/naming-convention","severity":1,"message":"Object Literal Method name `Root` must match one of the following formats: camelCase","line":126,"column":9,"nodeType":"Identifier","messageId":"doesNotMatchFormat","endLine":126,"endColumn":13},{"ruleId":"@typescript-eslint/naming-convention","severity":1,"message":"Object Literal Method name `Chevron` must match one of the following formats: camelCase","line":136,"column":9,"nodeType":"Identifier","messageId":"doesNotMatchFormat","endLine":136,"endColumn":16},{"ruleId":"@typescript-eslint/naming-convention","severity":1,"message":"Object Literal Method name `WeekNumber` must match one of the following formats: camelCase","line":157,"column":9,"nodeType":"Identifier","messageId":"doesNotMatchFormat","endLine":157,"endColumn":19}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\n\nimport {\n  ChevronDownIcon,\n  ChevronLeftIcon,\n  ChevronRightIcon,\n} from \"lucide-react\";\nimport * as React from \"react\";\nimport { DayButton, DayPicker, getDefaultClassNames } from \"react-day-picker\";\n\nimport { Button, buttonVariants } from \"@ui/components/ui/button\"; // Corrected path\n\nimport { cn } from \"@ui/lib/utils\"; // Corrected path\n\nfunction Calendar({\n  className,\n  classNames,\n  showOutsideDays = true,\n  captionLayout = \"label\",\n  buttonVariant = \"ghost\",\n  formatters,\n  components,\n  ...props\n}: React.ComponentProps<typeof DayPicker> & {\n  buttonVariant?: React.ComponentProps<typeof Button>[\"variant\"];\n}) {\n  const defaultClassNames = getDefaultClassNames();\n\n  return (\n    <DayPicker\n      showOutsideDays={showOutsideDays}\n      className={cn(\n        \"bg-background group/calendar p-3 [--cell-size:--spacing(8)] [[data-slot=card-content]_&]:bg-transparent [[data-slot=popover-content]_&]:bg-transparent\",\n        String.raw`rtl:**:[.rdp-button\\_next>svg]:rotate-180`,\n        String.raw`rtl:**:[.rdp-button\\_previous>svg]:rotate-180`,\n        className\n      )}\n      captionLayout={captionLayout}\n      formatters={{\n        formatMonthDropdown: (date) =>\n          date.toLocaleString(\"default\", { month: \"short\" }),\n        ...formatters,\n      }}\n      classNames={{\n        root: cn(\"w-fit\", defaultClassNames.root),\n        months: cn(\n          \"flex gap-4 flex-col md:flex-row relative\",\n          defaultClassNames.months\n        ),\n        month: cn(\"flex flex-col w-full gap-4\", defaultClassNames.month),\n        nav: cn(\n          \"flex items-center gap-1 w-full absolute top-0 inset-x-0 justify-between\",\n          defaultClassNames.nav\n        ),\n        button_previous: cn(\n          buttonVariants({ variant: buttonVariant }),\n          \"size-(--cell-size) aria-disabled:opacity-50 p-0 select-none\",\n          defaultClassNames.button_previous\n        ),\n        button_next: cn(\n          buttonVariants({ variant: buttonVariant }),\n          \"size-(--cell-size) aria-disabled:opacity-50 p-0 select-none\",\n          defaultClassNames.button_next\n        ),\n        month_caption: cn(\n          \"flex items-center justify-center h-(--cell-size) w-full px-(--cell-size)\",\n          defaultClassNames.month_caption\n        ),\n        dropdowns: cn(\n          \"w-full flex items-center text-sm font-medium justify-center h-(--cell-size) gap-1.5\",\n          defaultClassNames.dropdowns\n        ),\n        dropdown_root: cn(\n          \"relative has-focus:border-ring border border-input shadow-xs has-focus:ring-ring/50 has-focus:ring-[3px] rounded-md\",\n          defaultClassNames.dropdown_root\n        ),\n        dropdown: cn(\"absolute inset-0 opacity-0\", defaultClassNames.dropdown),\n        caption_label: cn(\n          \"select-none font-medium\",\n          captionLayout === \"label\"\n            ? \"text-sm\"\n            : \"rounded-md pl-2 pr-1 flex items-center gap-1 text-sm h-8 [&>svg]:text-muted-foreground [&>svg]:size-3.5\",\n          defaultClassNames.caption_label\n        ),\n        table: \"w-full border-collapse\",\n        weekdays: cn(\"flex\", defaultClassNames.weekdays),\n        weekday: cn(\n          \"text-muted-foreground rounded-md flex-1 font-normal text-[0.8rem] select-none\",\n          defaultClassNames.weekday\n        ),\n        week: cn(\"flex w-full mt-2\", defaultClassNames.week),\n        week_number_header: cn(\n          \"select-none w-(--cell-size)\",\n          defaultClassNames.week_number_header\n        ),\n        week_number: cn(\n          \"text-[0.8rem] select-none text-muted-foreground\",\n          defaultClassNames.week_number\n        ),\n        day: cn(\n          \"relative w-full h-full p-0 text-center [&:first-child[data-selected=true]_button]:rounded-l-md [&:last-child[data-selected=true]_button]:rounded-r-md group/day aspect-square select-none\",\n          defaultClassNames.day\n        ),\n        range_start: cn(\n          \"rounded-l-md bg-accent\",\n          defaultClassNames.range_start\n        ),\n        range_middle: cn(\"rounded-none\", defaultClassNames.range_middle),\n        range_end: cn(\"rounded-r-md bg-accent\", defaultClassNames.range_end),\n        today: cn(\n          \"bg-accent text-accent-foreground rounded-md data-[selected=true]:rounded-none\",\n          defaultClassNames.today\n        ),\n        outside: cn(\n          \"text-muted-foreground aria-selected:text-muted-foreground\",\n          defaultClassNames.outside\n        ),\n        disabled: cn(\n          \"text-muted-foreground opacity-50\",\n          defaultClassNames.disabled\n        ),\n        hidden: cn(\"invisible\", defaultClassNames.hidden),\n        ...classNames,\n      }}\n      components={{\n        Root: ({ className, rootRef, ...props }) => {\n          return (\n            <div\n              data-slot=\"calendar\"\n              ref={rootRef}\n              className={cn(className)}\n              {...props}\n            />\n          );\n        },\n        Chevron: ({ className, orientation, ...props }) => {\n          if (orientation === \"left\") {\n            return (\n              <ChevronLeftIcon className={cn(\"size-4\", className)} {...props} />\n            );\n          }\n\n          if (orientation === \"right\") {\n            return (\n              <ChevronRightIcon\n                className={cn(\"size-4\", className)}\n                {...props}\n              />\n            );\n          }\n\n          return (\n            <ChevronDownIcon className={cn(\"size-4\", className)} {...props} />\n          );\n        },\n        DayButton: CalendarDayButton,\n        WeekNumber: ({ children, ...props }) => {\n          return (\n            <td {...props}>\n              <div className=\"flex size-(--cell-size) items-center justify-center text-center\">\n                {children}\n              </div>\n            </td>\n          );\n        },\n        ...components,\n      }}\n      {...props}\n    />\n  );\n}\n\nfunction CalendarDayButton({\n  className,\n  day,\n  modifiers,\n  ...props\n}: React.ComponentProps<typeof DayButton>) {\n  const defaultClassNames = getDefaultClassNames();\n\n  const ref = React.useRef<HTMLButtonElement>(null);\n  React.useEffect(() => {\n    if (modifiers.focused) ref.current?.focus();\n  }, [modifiers.focused]);\n\n  return (\n    <Button\n      ref={ref}\n      variant=\"ghost\"\n      size=\"icon\"\n      data-day={day.date.toLocaleDateString()}\n      data-selected-single={\n        modifiers.selected &&\n        !modifiers.range_start &&\n        !modifiers.range_end &&\n        !modifiers.range_middle\n      }\n      data-range-start={modifiers.range_start}\n      data-range-end={modifiers.range_end}\n      data-range-middle={modifiers.range_middle}\n      className={cn(\n        \"data-[selected-single=true]:bg-primary data-[selected-single=true]:text-primary-foreground data-[range-middle=true]:bg-accent data-[range-middle=true]:text-accent-foreground data-[range-start=true]:bg-primary data-[range-start=true]:text-primary-foreground data-[range-end=true]:bg-primary data-[range-end=true]:text-primary-foreground group-data-[focused=true]/day:border-ring group-data-[focused=true]/day:ring-ring/50 dark:hover:text-accent-foreground flex aspect-square size-auto w-full min-w-(--cell-size) flex-col gap-1 leading-none font-normal group-data-[focused=true]/day:relative group-data-[focused=true]/day:z-10 group-data-[focused=true]/day:ring-[3px] data-[range-end=true]:rounded-md data-[range-end=true]:rounded-r-md data-[range-middle=true]:rounded-none data-[range-start=true]:rounded-md data-[range-start=true]:rounded-l-md [&>span]:text-xs [&>span]:opacity-70\",\n        defaultClassNames.day,\n        className\n      )}\n      {...props}\n    />\n  );\n}\n\nexport { Calendar, CalendarDayButton };\n","usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/components/ui/card.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/components/ui/carousel.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/components/ui/chart.tsx","messages":[{"ruleId":"@typescript-eslint/naming-convention","severity":1,"message":"Object Literal Property name `__html` trimmed as `_html` must match one of the following formats: camelCase, PascalCase, UPPER_CASE, snake_case","line":82,"column":9,"nodeType":"Identifier","messageId":"doesNotMatchFormatTrimmed","endLine":82,"endColumn":15},{"ruleId":"max-lines-per-function","severity":1,"message":"Function 'ChartTooltipContent' has too many lines (134). Maximum allowed is 100.","line":105,"column":1,"nodeType":"FunctionDeclaration","messageId":"exceed","endLine":247,"endColumn":2},{"ruleId":"@typescript-eslint/naming-convention","severity":1,"message":"Object Literal Property name `h-2.5 w-2.5` must match one of the following formats: camelCase, PascalCase, UPPER_CASE, snake_case","line":205,"column":29,"nodeType":"Literal","messageId":"doesNotMatchFormat","endLine":205,"endColumn":42},{"ruleId":"@typescript-eslint/naming-convention","severity":1,"message":"Object Literal Property name `w-1` must match one of the following formats: camelCase, PascalCase, UPPER_CASE, snake_case","line":206,"column":29,"nodeType":"Literal","messageId":"doesNotMatchFormat","endLine":206,"endColumn":34},{"ruleId":"@typescript-eslint/naming-convention","severity":1,"message":"Object Literal Property name `w-0 border-[1.5px] border-dashed bg-transparent` must match one of the following formats: camelCase, PascalCase, UPPER_CASE, snake_case","line":207,"column":29,"nodeType":"Literal","messageId":"doesNotMatchFormat","endLine":207,"endColumn":78},{"ruleId":"@typescript-eslint/naming-convention","severity":1,"message":"Object Literal Property name `my-0.5` must match one of the following formats: camelCase, PascalCase, UPPER_CASE, snake_case","line":209,"column":29,"nodeType":"Literal","messageId":"doesNotMatchFormat","endLine":209,"endColumn":37},{"ruleId":"@typescript-eslint/naming-convention","severity":1,"message":"Object Literal Property name `--color-bg` must match one of the following formats: camelCase, PascalCase, UPPER_CASE, snake_case","line":214,"column":29,"nodeType":"Literal","messageId":"doesNotMatchFormat","endLine":214,"endColumn":41},{"ruleId":"@typescript-eslint/naming-convention","severity":1,"message":"Object Literal Property name `--color-border` must match one of the following formats: camelCase, PascalCase, UPPER_CASE, snake_case","line":215,"column":29,"nodeType":"Literal","messageId":"doesNotMatchFormat","endLine":215,"endColumn":45}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\"\nimport * as RechartsPrimitive from \"recharts\"\n\nimport { cn } from \"@ui/lib/utils\"\n\n// Format: { THEME_NAME: CSS_SELECTOR }\nconst THEMES = { light: \"\", dark: \".dark\" } as const\n\nexport type ChartConfig = {\n  [k in string]: {\n    label?: React.ReactNode\n    icon?: React.ComponentType\n  } & (\n    | { color?: string; theme?: never }\n    | { color?: never; theme: Record<keyof typeof THEMES, string> }\n  )\n}\n\ntype ChartContextProps = {\n  config: ChartConfig\n}\n\nconst ChartContext = React.createContext<ChartContextProps | null>(null)\n\nfunction useChart() {\n  const context = React.useContext(ChartContext)\n\n  if (!context) {\n    throw new Error(\"useChart must be used within a <ChartContainer />\")\n  }\n\n  return context\n}\n\nfunction ChartContainer({\n  id,\n  className,\n  children,\n  config,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  config: ChartConfig\n  children: React.ComponentProps<\n    typeof RechartsPrimitive.ResponsiveContainer\n  >[\"children\"]\n}) {\n  const uniqueId = React.useId()\n  const chartId = `chart-${id || uniqueId.replace(/:/g, \"\")}`\n\n  return (\n    <ChartContext.Provider value={{ config }}>\n      <div\n        data-slot=\"chart\"\n        data-chart={chartId}\n        className={cn(\n          \"[&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border flex aspect-video justify-center text-xs [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-hidden [&_.recharts-sector]:outline-hidden [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-surface]:outline-hidden\",\n          className\n        )}\n        {...props}\n      >\n        <ChartStyle id={chartId} config={config} />\n        <RechartsPrimitive.ResponsiveContainer>\n          {children}\n        </RechartsPrimitive.ResponsiveContainer>\n      </div>\n    </ChartContext.Provider>\n  )\n}\n\nconst ChartStyle = ({ id, config }: { id: string; config: ChartConfig }) => {\n  const colorConfig = Object.entries(config).filter(\n    ([, config]) => config.theme || config.color\n  )\n\n  if (!colorConfig.length) {\n    return null\n  }\n\n  return (\n    <style\n      dangerouslySetInnerHTML={{\n        __html: Object.entries(THEMES)\n          .map(\n            ([theme, prefix]) => `\n${prefix} [data-chart=${id}] {\n${colorConfig\n  .map(([key, itemConfig]) => {\n    const color =\n      itemConfig.theme?.[theme as keyof typeof itemConfig.theme] ||\n      itemConfig.color\n    return color ? `  --color-${key}: ${color};` : null\n  })\n  .join(\"\\n\")}\n}\n`\n          )\n          .join(\"\\n\"),\n      }}\n    />\n  )\n}\n\nconst ChartTooltip = RechartsPrimitive.Tooltip\n\nfunction ChartTooltipContent({\n  active,\n  payload,\n  className,\n  indicator = \"dot\",\n  hideLabel = false,\n  hideIndicator = false,\n  label,\n  labelFormatter,\n  labelClassName,\n  formatter,\n  color,\n  nameKey,\n  labelKey,\n}: React.ComponentProps<typeof RechartsPrimitive.Tooltip> &\n  React.ComponentProps<\"div\"> & {\n    hideLabel?: boolean\n    hideIndicator?: boolean\n    indicator?: \"line\" | \"dot\" | \"dashed\"\n    nameKey?: string\n    labelKey?: string\n  }) {\n  const { config } = useChart()\n\n  const tooltipLabel = React.useMemo(() => {\n    if (hideLabel || !payload?.length) {\n      return null\n    }\n\n    const [item] = payload\n    const key = `${labelKey || item?.dataKey || item?.name || \"value\"}`\n    const itemConfig = getPayloadConfigFromPayload(config, item, key)\n    const value =\n      !labelKey && typeof label === \"string\"\n        ? config[label as keyof typeof config]?.label || label\n        : itemConfig?.label\n\n    if (labelFormatter) {\n      return (\n        <div className={cn(\"font-medium\", labelClassName)}>\n          {labelFormatter(value, payload)}\n        </div>\n      )\n    }\n\n    if (!value) {\n      return null\n    }\n\n    return <div className={cn(\"font-medium\", labelClassName)}>{value}</div>\n  }, [\n    label,\n    labelFormatter,\n    payload,\n    hideLabel,\n    labelClassName,\n    config,\n    labelKey,\n  ])\n\n  if (!active || !payload?.length) {\n    return null\n  }\n\n  const nestLabel = payload.length === 1 && indicator !== \"dot\"\n\n  return (\n    <div\n      className={cn(\n        \"border-border/50 bg-background grid min-w-[8rem] items-start gap-1.5 rounded-lg border px-2.5 py-1.5 text-xs shadow-xl\",\n        className\n      )}\n    >\n      {!nestLabel ? tooltipLabel : null}\n      <div className=\"grid gap-1.5\">\n        {payload.map((item, index) => {\n          const key = `${nameKey || item.name || item.dataKey || \"value\"}`\n          const itemConfig = getPayloadConfigFromPayload(config, item, key)\n          const indicatorColor = color || item.payload.fill || item.color\n\n          return (\n            <div\n              key={item.dataKey}\n              className={cn(\n                \"[&>svg]:text-muted-foreground flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5\",\n                indicator === \"dot\" && \"items-center\"\n              )}\n            >\n              {formatter && item?.value !== undefined && item.name ? (\n                formatter(item.value, item.name, item, index, item.payload)\n              ) : (\n                <>\n                  {itemConfig?.icon ? (\n                    <itemConfig.icon />\n                  ) : (\n                    !hideIndicator && (\n                      <div\n                        className={cn(\n                          \"shrink-0 rounded-[2px] border-(--color-border) bg-(--color-bg)\",\n                          {\n                            \"h-2.5 w-2.5\": indicator === \"dot\",\n                            \"w-1\": indicator === \"line\",\n                            \"w-0 border-[1.5px] border-dashed bg-transparent\":\n                              indicator === \"dashed\",\n                            \"my-0.5\": nestLabel && indicator === \"dashed\",\n                          }\n                        )}\n                        style={\n                          {\n                            \"--color-bg\": indicatorColor,\n                            \"--color-border\": indicatorColor,\n                          } as React.CSSProperties\n                        }\n                      />\n                    )\n                  )}\n                  <div\n                    className={cn(\n                      \"flex flex-1 justify-between leading-none\",\n                      nestLabel ? \"items-end\" : \"items-center\"\n                    )}\n                  >\n                    <div className=\"grid gap-1.5\">\n                      {nestLabel ? tooltipLabel : null}\n                      <span className=\"text-muted-foreground\">\n                        {itemConfig?.label || item.name}\n                      </span>\n                    </div>\n                    {item.value && (\n                      <span className=\"text-foreground font-mono font-medium tabular-nums\">\n                        {item.value.toLocaleString()}\n                      </span>\n                    )}\n                  </div>\n                </>\n              )}\n            </div>\n          )\n        })}\n      </div>\n    </div>\n  )\n}\n\nconst ChartLegend = RechartsPrimitive.Legend\n\nfunction ChartLegendContent({\n  className,\n  hideIcon = false,\n  payload,\n  verticalAlign = \"bottom\",\n  nameKey,\n}: React.ComponentProps<\"div\"> &\n  Pick<RechartsPrimitive.LegendProps, \"payload\" | \"verticalAlign\"> & {\n    hideIcon?: boolean\n    nameKey?: string\n  }) {\n  const { config } = useChart()\n\n  if (!payload?.length) {\n    return null\n  }\n\n  return (\n    <div\n      className={cn(\n        \"flex items-center justify-center gap-4\",\n        verticalAlign === \"top\" ? \"pb-3\" : \"pt-3\",\n        className\n      )}\n    >\n      {payload.map((item) => {\n        const key = `${nameKey || item.dataKey || \"value\"}`\n        const itemConfig = getPayloadConfigFromPayload(config, item, key)\n\n        return (\n          <div\n            key={item.value}\n            className={cn(\n              \"[&>svg]:text-muted-foreground flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3\"\n            )}\n          >\n            {itemConfig?.icon && !hideIcon ? (\n              <itemConfig.icon />\n            ) : (\n              <div\n                className=\"h-2 w-2 shrink-0 rounded-[2px]\"\n                style={{\n                  backgroundColor: item.color,\n                }}\n              />\n            )}\n            {itemConfig?.label}\n          </div>\n        )\n      })}\n    </div>\n  )\n}\n\n// Helper to extract item config from a payload.\nfunction getPayloadConfigFromPayload(\n  config: ChartConfig,\n  payload: unknown,\n  key: string\n) {\n  if (typeof payload !== \"object\" || payload === null) {\n    return undefined\n  }\n\n  const payloadPayload =\n    \"payload\" in payload &&\n    typeof payload.payload === \"object\" &&\n    payload.payload !== null\n      ? payload.payload\n      : undefined\n\n  let configLabelKey: string = key\n\n  if (\n    key in payload &&\n    typeof payload[key as keyof typeof payload] === \"string\"\n  ) {\n    configLabelKey = payload[key as keyof typeof payload] as string\n  } else if (\n    payloadPayload &&\n    key in payloadPayload &&\n    typeof payloadPayload[key as keyof typeof payloadPayload] === \"string\"\n  ) {\n    configLabelKey = payloadPayload[\n      key as keyof typeof payloadPayload\n    ] as string\n  }\n\n  return configLabelKey in config\n    ? config[configLabelKey]\n    : config[key as keyof typeof config]\n}\n\nexport {\n  ChartContainer,\n  ChartTooltip,\n  ChartTooltipContent,\n  ChartLegend,\n  ChartLegendContent,\n  ChartStyle,\n}\n","usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/components/ui/checkbox.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/components/ui/collapsible.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/components/ui/command.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/components/ui/context-menu.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/components/ui/dialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/components/ui/drawer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/components/ui/dropdown-menu.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/components/ui/form.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/components/ui/hover-card.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/components/ui/input-otp.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/components/ui/input.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/components/ui/label.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/components/ui/navigation-menu.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/components/ui/pagination.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/components/ui/popover.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/components/ui/progress.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/components/ui/radio-group.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/components/ui/resizable.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/components/ui/scroll-area.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/components/ui/select.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/components/ui/separator.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/components/ui/sheet.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/components/ui/sidebar.tsx","messages":[{"ruleId":"@typescript-eslint/naming-convention","severity":1,"message":"Object Literal Property name `--sidebar-width` must match one of the following formats: camelCase, PascalCase, UPPER_CASE, snake_case","line":138,"column":15,"nodeType":"Literal","messageId":"doesNotMatchFormat","endLine":138,"endColumn":32},{"ruleId":"@typescript-eslint/naming-convention","severity":1,"message":"Object Literal Property name `--sidebar-width-icon` must match one of the following formats: camelCase, PascalCase, UPPER_CASE, snake_case","line":139,"column":15,"nodeType":"Literal","messageId":"doesNotMatchFormat","endLine":139,"endColumn":37},{"ruleId":"@typescript-eslint/naming-convention","severity":1,"message":"Object Literal Property name `--sidebar-width` must match one of the following formats: camelCase, PascalCase, UPPER_CASE, snake_case","line":195,"column":15,"nodeType":"Literal","messageId":"doesNotMatchFormat","endLine":195,"endColumn":32},{"ruleId":"max-lines","severity":1,"message":"File has too many lines (661). Maximum allowed is 500.","line":557,"column":1,"nodeType":null,"messageId":"exceed","endLine":729,"endColumn":1},{"ruleId":"@typescript-eslint/naming-convention","severity":1,"message":"Object Literal Property name `--skeleton-width` must match one of the following formats: camelCase, PascalCase, UPPER_CASE, snake_case","line":634,"column":13,"nodeType":"Literal","messageId":"doesNotMatchFormat","endLine":634,"endColumn":31}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\"\n\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { VariantProps, cva } from \"class-variance-authority\"\nimport { PanelLeftIcon } from \"lucide-react\"\nimport * as React from \"react\"\n\nimport { Button } from \"@ui/components/ui/button\" // Corrected path\nimport { Input } from \"@ui/components/ui/input\" // Corrected path\nimport { Separator } from \"@ui/components/ui/separator\" // Corrected path\nimport {\n  Sheet,\n  SheetContent,\n  SheetDescription,\n  SheetHeader,\n  SheetTitle,\n} from \"@ui/components/ui/sheet\" // Corrected path\nimport { Skeleton } from \"@ui/components/ui/skeleton\" // Corrected path\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from \"@ui/components/ui/tooltip\" // Corrected path\n\nimport { useIsMobile } from \"@ui/hooks/use-mobile\" // Corrected path\n\nimport { cn } from \"@ui/lib/utils\" // Corrected path\n\nconst SIDEBAR_COOKIE_NAME = \"sidebar_state\"\nconst SIDEBAR_COOKIE_MAX_AGE = 60 * 60 * 24 * 7\nconst SIDEBAR_WIDTH = \"16rem\"\nconst SIDEBAR_WIDTH_MOBILE = \"18rem\"\nconst SIDEBAR_WIDTH_ICON = \"3rem\"\nconst SIDEBAR_KEYBOARD_SHORTCUT = \"b\"\n\ntype SidebarContextProps = {\n  state: \"expanded\" | \"collapsed\"\n  open: boolean\n  setOpen: (open: boolean) => void\n  openMobile: boolean\n  setOpenMobile: (open: boolean) => void\n  isMobile: boolean\n  toggleSidebar: () => void\n}\n\nconst SidebarContext = React.createContext<SidebarContextProps | null>(null)\n\nfunction useSidebar() {\n  const context = React.useContext(SidebarContext)\n  if (!context) {\n    throw new Error(\"useSidebar must be used within a SidebarProvider.\")\n  }\n\n  return context\n}\n\nfunction SidebarProvider({\n  defaultOpen = true,\n  open: openProp,\n  onOpenChange: setOpenProp,\n  className,\n  style,\n  children,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  defaultOpen?: boolean\n  open?: boolean\n  onOpenChange?: (open: boolean) => void\n}) {\n  const isMobile = useIsMobile()\n  const [openMobile, setOpenMobile] = React.useState(false)\n\n  // This is the internal state of the sidebar.\n  // We use openProp and setOpenProp for control from outside the component.\n  const [_open, _setOpen] = React.useState(defaultOpen)\n  const open = openProp ?? _open\n  const setOpen = React.useCallback(\n    (value: boolean | ((value: boolean) => boolean)) => {\n      const openState = typeof value === \"function\" ? value(open) : value\n      if (setOpenProp) {\n        setOpenProp(openState)\n      } else {\n        _setOpen(openState)\n      }\n\n      // This sets the cookie to keep the sidebar state.\n      document.cookie = `${SIDEBAR_COOKIE_NAME}=${openState}; path=/; max-age=${SIDEBAR_COOKIE_MAX_AGE}`\n    },\n    [setOpenProp, open]\n  )\n\n  // Helper to toggle the sidebar.\n  const toggleSidebar = React.useCallback(() => {\n    return isMobile ? setOpenMobile((open) => !open) : setOpen((open) => !open)\n  }, [isMobile, setOpen, setOpenMobile])\n\n  // Adds a keyboard shortcut to toggle the sidebar.\n  React.useEffect(() => {\n    const handleKeyDown = (event: KeyboardEvent) => {\n      if (\n        event.key === SIDEBAR_KEYBOARD_SHORTCUT &&\n        (event.metaKey || event.ctrlKey)\n      ) {\n        event.preventDefault()\n        toggleSidebar()\n      }\n    }\n\n    window.addEventListener(\"keydown\", handleKeyDown)\n    return () => window.removeEventListener(\"keydown\", handleKeyDown)\n  }, [toggleSidebar])\n\n  // We add a state so that we can do data-state=\"expanded\" or \"collapsed\".\n  // This makes it easier to style the sidebar with Tailwind classes.\n  const state = open ? \"expanded\" : \"collapsed\"\n\n  const contextValue = React.useMemo<SidebarContextProps>(\n    () => ({\n      state,\n      open,\n      setOpen,\n      isMobile,\n      openMobile,\n      setOpenMobile,\n      toggleSidebar,\n    }),\n    [state, open, setOpen, isMobile, openMobile, setOpenMobile, toggleSidebar]\n  )\n\n  return (\n    <SidebarContext.Provider value={contextValue}>\n      <TooltipProvider delayDuration={0}>\n        <div\n          data-slot=\"sidebar-wrapper\"\n          style={\n            {\n              \"--sidebar-width\": SIDEBAR_WIDTH,\n              \"--sidebar-width-icon\": SIDEBAR_WIDTH_ICON,\n              ...style,\n            } as React.CSSProperties\n          }\n          className={cn(\n            \"group/sidebar-wrapper has-data-[variant=inset]:bg-sidebar flex min-h-svh w-full\",\n            className\n          )}\n          {...props}\n        >\n          {children}\n        </div>\n      </TooltipProvider>\n    </SidebarContext.Provider>\n  )\n}\n\nfunction Sidebar({\n  side = \"left\",\n  variant = \"sidebar\",\n  collapsible = \"offcanvas\",\n  className,\n  children,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  side?: \"left\" | \"right\"\n  variant?: \"sidebar\" | \"floating\" | \"inset\"\n  collapsible?: \"offcanvas\" | \"icon\" | \"none\"\n}) {\n  const { isMobile, state, openMobile, setOpenMobile } = useSidebar()\n\n  if (collapsible === \"none\") {\n    return (\n      <div\n        data-slot=\"sidebar\"\n        className={cn(\n          \"bg-sidebar text-sidebar-foreground flex h-full w-(--sidebar-width) flex-col\",\n          className\n        )}\n        {...props}\n      >\n        {children}\n      </div>\n    )\n  }\n\n  if (isMobile) {\n    return (\n      <Sheet open={openMobile} onOpenChange={setOpenMobile} {...props}>\n        <SheetContent\n          data-sidebar=\"sidebar\"\n          data-slot=\"sidebar\"\n          data-mobile=\"true\"\n          className=\"bg-sidebar text-sidebar-foreground w-(--sidebar-width) p-0 [&>button]:hidden\"\n          style={\n            {\n              \"--sidebar-width\": SIDEBAR_WIDTH_MOBILE,\n            } as React.CSSProperties\n          }\n          side={side}\n        >\n          <SheetHeader className=\"sr-only\">\n            <SheetTitle>Sidebar</SheetTitle>\n            <SheetDescription>Displays the mobile sidebar.</SheetDescription>\n          </SheetHeader>\n          <div className=\"flex h-full w-full flex-col\">{children}</div>\n        </SheetContent>\n      </Sheet>\n    )\n  }\n\n  return (\n    <div\n      className=\"group peer text-sidebar-foreground hidden md:block\"\n      data-state={state}\n      data-collapsible={state === \"collapsed\" ? collapsible : \"\"}\n      data-variant={variant}\n      data-side={side}\n      data-slot=\"sidebar\"\n    >\n      {/* This is what handles the sidebar gap on desktop */}\n      <div\n        data-slot=\"sidebar-gap\"\n        className={cn(\n          \"relative w-(--sidebar-width) bg-transparent transition-[width] duration-200 ease-linear\",\n          \"group-data-[collapsible=offcanvas]:w-0\",\n          \"group-data-[side=right]:rotate-180\",\n          variant === \"floating\" || variant === \"inset\"\n            ? \"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+(--spacing(4)))]\"\n            : \"group-data-[collapsible=icon]:w-(--sidebar-width-icon)\"\n        )}\n      />\n      <div\n        data-slot=\"sidebar-container\"\n        className={cn(\n          \"fixed inset-y-0 z-10 hidden h-svh w-(--sidebar-width) transition-[left,right,width] duration-200 ease-linear md:flex\",\n          side === \"left\"\n            ? \"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]\"\n            : \"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]\",\n          // Adjust the padding for floating and inset variants.\n          variant === \"floating\" || variant === \"inset\"\n            ? \"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+(--spacing(4))+2px)]\"\n            : \"group-data-[collapsible=icon]:w-(--sidebar-width-icon) group-data-[side=left]:border-r group-data-[side=right]:border-l\",\n          className\n        )}\n        {...props}\n      >\n        <div\n          data-sidebar=\"sidebar\"\n          data-slot=\"sidebar-inner\"\n          className=\"bg-sidebar group-data-[variant=floating]:border-sidebar-border flex h-full w-full flex-col group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:shadow-sm\"\n        >\n          {children}\n        </div>\n      </div>\n    </div>\n  )\n}\n\nfunction SidebarTrigger({\n  className,\n  onClick,\n  ...props\n}: React.ComponentProps<typeof Button>) {\n  const { toggleSidebar } = useSidebar()\n\n  return (\n    <Button\n      data-sidebar=\"trigger\"\n      data-slot=\"sidebar-trigger\"\n      variant=\"ghost\"\n      size=\"icon\"\n      className={cn(\"size-7\", className)}\n      onClick={(event) => {\n        onClick?.(event)\n        toggleSidebar()\n      }}\n      {...props}\n    >\n      <PanelLeftIcon />\n      <span className=\"sr-only\">Toggle Sidebar</span>\n    </Button>\n  )\n}\n\nfunction SidebarRail({ className, ...props }: React.ComponentProps<\"button\">) {\n  const { toggleSidebar } = useSidebar()\n\n  return (\n    <button\n      data-sidebar=\"rail\"\n      data-slot=\"sidebar-rail\"\n      aria-label=\"Toggle Sidebar\"\n      tabIndex={-1}\n      onClick={toggleSidebar}\n      title=\"Toggle Sidebar\"\n      className={cn(\n        \"hover:after:bg-sidebar-border absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear group-data-[side=left]:-right-4 group-data-[side=right]:left-0 after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] sm:flex\",\n        \"in-data-[side=left]:cursor-w-resize in-data-[side=right]:cursor-e-resize\",\n        \"[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize\",\n        \"hover:group-data-[collapsible=offcanvas]:bg-sidebar group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full\",\n        \"[[data-side=left][data-collapsible=offcanvas]_&]:-right-2\",\n        \"[[data-side=right][data-collapsible=offcanvas]_&]:-left-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarInset({ className, ...props }: React.ComponentProps<\"main\">) {\n  return (\n    <main\n      data-slot=\"sidebar-inset\"\n      className={cn(\n        \"bg-background relative flex w-full flex-1 flex-col\",\n        \"md:peer-data-[variant=inset]:m-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow-sm md:peer-data-[variant=inset]:peer-data-[state=collapsed]:ml-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarInput({\n  className,\n  ...props\n}: React.ComponentProps<typeof Input>) {\n  return (\n    <Input\n      data-slot=\"sidebar-input\"\n      data-sidebar=\"input\"\n      className={cn(\"bg-background h-8 w-full shadow-none\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-header\"\n      data-sidebar=\"header\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-footer\"\n      data-sidebar=\"footer\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarSeparator({\n  className,\n  ...props\n}: React.ComponentProps<typeof Separator>) {\n  return (\n    <Separator\n      data-slot=\"sidebar-separator\"\n      data-sidebar=\"separator\"\n      className={cn(\"bg-sidebar-border mx-2 w-auto\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-content\"\n      data-sidebar=\"content\"\n      className={cn(\n        \"flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroup({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-group\"\n      data-sidebar=\"group\"\n      className={cn(\"relative flex w-full min-w-0 flex-col p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupLabel({\n  className,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"div\"> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"div\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-group-label\"\n      data-sidebar=\"group-label\"\n      className={cn(\n        \"text-sidebar-foreground/70 ring-sidebar-ring flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium outline-hidden transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        \"group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupAction({\n  className,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"button\"> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-group-action\"\n      data-sidebar=\"group-action\"\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground absolute top-3.5 right-3 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 md:after:hidden\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupContent({\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-group-content\"\n      data-sidebar=\"group-content\"\n      className={cn(\"w-full text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenu({ className, ...props }: React.ComponentProps<\"ul\">) {\n  return (\n    <ul\n      data-slot=\"sidebar-menu\"\n      data-sidebar=\"menu\"\n      className={cn(\"flex w-full min-w-0 flex-col gap-1\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuItem({ className, ...props }: React.ComponentProps<\"li\">) {\n  return (\n    <li\n      data-slot=\"sidebar-menu-item\"\n      data-sidebar=\"menu-item\"\n      className={cn(\"group/menu-item relative\", className)}\n      {...props}\n    />\n  )\n}\n\nconst sidebarMenuButtonVariants = cva(\n  \"peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-hidden ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:size-8! group-data-[collapsible=icon]:p-2! [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground\",\n        outline:\n          \"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]\",\n      },\n      size: {\n        default: \"h-8 text-sm\",\n        sm: \"h-7 text-xs\",\n        lg: \"h-12 text-sm group-data-[collapsible=icon]:p-0!\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nfunction SidebarMenuButton({\n  asChild = false,\n  isActive = false,\n  variant = \"default\",\n  size = \"default\",\n  tooltip,\n  className,\n  ...props\n}: React.ComponentProps<\"button\"> & {\n  asChild?: boolean\n  isActive?: boolean\n  tooltip?: string | React.ComponentProps<typeof TooltipContent>\n} & VariantProps<typeof sidebarMenuButtonVariants>) {\n  const Comp = asChild ? Slot : \"button\"\n  const { isMobile, state } = useSidebar()\n\n  const button = (\n    <Comp\n      data-slot=\"sidebar-menu-button\"\n      data-sidebar=\"menu-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(sidebarMenuButtonVariants({ variant, size }), className)}\n      {...props}\n    />\n  )\n\n  if (!tooltip) {\n    return button\n  }\n\n  if (typeof tooltip === \"string\") {\n    tooltip = {\n      children: tooltip,\n    }\n  }\n\n  return (\n    <Tooltip>\n      <TooltipTrigger asChild>{button}</TooltipTrigger>\n      <TooltipContent\n        side=\"right\"\n        align=\"center\"\n        hidden={state !== \"collapsed\" || isMobile}\n        {...tooltip}\n      />\n    </Tooltip>\n  )\n}\n\nfunction SidebarMenuAction({\n  className,\n  asChild = false,\n  showOnHover = false,\n  ...props\n}: React.ComponentProps<\"button\"> & {\n  asChild?: boolean\n  showOnHover?: boolean\n}) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-menu-action\"\n      data-sidebar=\"menu-action\"\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground peer-hover/menu-button:text-sidebar-accent-foreground absolute top-1.5 right-1 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 md:after:hidden\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        showOnHover &&\n          \"peer-data-[active=true]/menu-button:text-sidebar-accent-foreground group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 md:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuBadge({\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-menu-badge\"\n      data-sidebar=\"menu-badge\"\n      className={cn(\n        \"text-sidebar-foreground pointer-events-none absolute right-1 flex h-5 min-w-5 items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums select-none\",\n        \"peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSkeleton({\n  className,\n  showIcon = false,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  showIcon?: boolean\n}) {\n  // Random width between 50 to 90%.\n  const width = React.useMemo(() => {\n    return `${Math.floor(Math.random() * 40) + 50}%`\n  }, [])\n\n  return (\n    <div\n      data-slot=\"sidebar-menu-skeleton\"\n      data-sidebar=\"menu-skeleton\"\n      className={cn(\"flex h-8 items-center gap-2 rounded-md px-2\", className)}\n      {...props}\n    >\n      {showIcon && (\n        <Skeleton\n          className=\"size-4 rounded-md\"\n          data-sidebar=\"menu-skeleton-icon\"\n        />\n      )}\n      <Skeleton\n        className=\"h-4 max-w-(--skeleton-width) flex-1\"\n        data-sidebar=\"menu-skeleton-text\"\n        style={\n          {\n            \"--skeleton-width\": width,\n          } as React.CSSProperties\n        }\n      />\n    </div>\n  )\n}\n\nfunction SidebarMenuSub({ className, ...props }: React.ComponentProps<\"ul\">) {\n  return (\n    <ul\n      data-slot=\"sidebar-menu-sub\"\n      data-sidebar=\"menu-sub\"\n      className={cn(\n        \"border-sidebar-border mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l px-2.5 py-0.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSubItem({\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) {\n  return (\n    <li\n      data-slot=\"sidebar-menu-sub-item\"\n      data-sidebar=\"menu-sub-item\"\n      className={cn(\"group/menu-sub-item relative\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSubButton({\n  asChild = false,\n  size = \"md\",\n  isActive = false,\n  className,\n  ...props\n}: React.ComponentProps<\"a\"> & {\n  asChild?: boolean\n  size?: \"sm\" | \"md\"\n  isActive?: boolean\n}) {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-menu-sub-button\"\n      data-sidebar=\"menu-sub-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground active:bg-sidebar-accent active:text-sidebar-accent-foreground [&>svg]:text-sidebar-accent-foreground flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 outline-hidden focus-visible:ring-2 disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n        \"data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground\",\n        size === \"sm\" && \"text-xs\",\n        size === \"md\" && \"text-sm\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Sidebar,\n  SidebarContent,\n  SidebarFooter,\n  SidebarGroup,\n  SidebarGroupAction,\n  SidebarGroupContent,\n  SidebarGroupLabel,\n  SidebarHeader,\n  SidebarInput,\n  SidebarInset,\n  SidebarMenu,\n  SidebarMenuAction,\n  SidebarMenuBadge,\n  SidebarMenuButton,\n  SidebarMenuItem,\n  SidebarMenuSkeleton,\n  SidebarMenuSub,\n  SidebarMenuSubButton,\n  SidebarMenuSubItem,\n  SidebarProvider,\n  SidebarRail,\n  SidebarSeparator,\n  SidebarTrigger,\n  useSidebar,\n}\n","usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/components/ui/skeleton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/components/ui/slider.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/components/ui/sonner.tsx","messages":[{"ruleId":"@typescript-eslint/naming-convention","severity":1,"message":"Object Literal Property name `--normal-bg` must match one of the following formats: camelCase, PascalCase, UPPER_CASE, snake_case","line":13,"column":11,"nodeType":"Literal","messageId":"doesNotMatchFormat","endLine":13,"endColumn":24},{"ruleId":"@typescript-eslint/naming-convention","severity":1,"message":"Object Literal Property name `--normal-text` must match one of the following formats: camelCase, PascalCase, UPPER_CASE, snake_case","line":14,"column":11,"nodeType":"Literal","messageId":"doesNotMatchFormat","endLine":14,"endColumn":26},{"ruleId":"@typescript-eslint/naming-convention","severity":1,"message":"Object Literal Property name `--normal-border` must match one of the following formats: camelCase, PascalCase, UPPER_CASE, snake_case","line":15,"column":11,"nodeType":"Literal","messageId":"doesNotMatchFormat","endLine":15,"endColumn":28}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useTheme } from \"next-themes\"\nimport { Toaster as Sonner, ToasterProps } from \"sonner\"\n\nconst Toaster = ({ ...props }: ToasterProps) => {\n  const { theme = \"system\" } = useTheme()\n\n  return (\n    <Sonner\n      theme={theme as ToasterProps[\"theme\"]}\n      className=\"toaster group\"\n      style={\n        {\n          \"--normal-bg\": \"var(--popover)\",\n          \"--normal-text\": \"var(--popover-foreground)\",\n          \"--normal-border\": \"var(--border)\",\n        } as React.CSSProperties\n      }\n      {...props}\n    />\n  )\n}\n\nexport { Toaster }\n","usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/components/ui/switch.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/components/ui/table.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/components/ui/tabs.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/components/ui/textarea.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/components/ui/toggle-group.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/components/ui/toggle.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/components/ui/tooltip.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/features/agent/components/AgentInstanceForm.tsx","messages":[{"ruleId":"max-lines-per-function","severity":1,"message":"Function 'AgentInstanceForm' has too many lines (120). Maximum allowed is 100.","line":40,"column":8,"nodeType":"FunctionDeclaration","messageId":"exceed","endLine":164,"endColumn":2}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { zodResolver } from '@hookform/resolvers/zod';\nimport React from 'react';\nimport { useForm } from 'react-hook-form';\nimport { z } from 'zod';\n\nimport { Button } from '@/presentation/ui/components/ui/button';\nimport {\n  Form,\n  FormControl,\n  FormDescription,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormMessage,\n} from '@/presentation/ui/components/ui/form';\nimport { Input } from '@/presentation/ui/components/ui/input';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/presentation/ui/components/ui/select';\nimport { Slider } from '@/presentation/ui/components/ui/slider';\nimport { LLMConfig } from '@/presentation/ui/features/llm/components/LLMConfigList';\nimport { PersonaTemplate } from '@/presentation/ui/features/persona/components/PersonaTemplateListItem';\n\n\nconst agentInstanceFormSchema = z.object({\n  agentName: z.string().max(100, 'Nome muito longo.').optional(),\n  personaTemplateId: z.string({ required_error: 'Selecione um Template de Persona.' }),\n  llmProviderConfigId: z.string({ required_error: 'Selecione uma Configuração de LLM.' }),\n  temperature: z.number().min(0).max(2).step(0.1),\n});\n\nexport type AgentInstanceFormData = z.infer<typeof agentInstanceFormSchema>;\n\ninterface AgentInstanceFormProps {\n  onSubmit: (data: AgentInstanceFormData) => Promise<void> | void;\n  initialValues?: Partial<AgentInstanceFormData>;\n  isSubmitting?: boolean;\n  personaTemplates: Pick<PersonaTemplate, 'id' | 'name'>[];\n  llmConfigs: Pick<LLMConfig, 'id' | 'name' | 'providerId'>[];\n}\n\nexport function AgentInstanceForm({\n  onSubmit,\n  initialValues,\n  isSubmitting = false,\n  personaTemplates,\n  llmConfigs,\n}: AgentInstanceFormProps) {\n  const form = useForm<AgentInstanceFormData>({\n    resolver: zodResolver(agentInstanceFormSchema),\n    defaultValues: {\n      agentName: initialValues?.agentName || '',\n      personaTemplateId: initialValues?.personaTemplateId || undefined,\n      llmProviderConfigId: initialValues?.llmProviderConfigId || undefined,\n      temperature: initialValues?.temperature ?? 0.7, // Default to 0.7 if not provided\n    },\n  });\n\n  return (\n    <Form {...form}>\n      <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-6\">\n        <FormField\n          control={form.control}\n          name=\"agentName\"\n          render={({ field }) => (\n            <FormItem>\n              <FormLabel>Nome da Instância do Agente (Opcional)</FormLabel>\n              <FormControl>\n                <Input placeholder=\"Ex: MeuCoderQA, AgenteDeRefatoracao\" {...field} />\n              </FormControl>\n              <FormDescription>\n                Um nome customizado para esta instância específica. Se vazio, um nome será gerado.\n              </FormDescription>\n              <FormMessage />\n            </FormItem>\n          )}\n        />\n\n        <FormField\n          control={form.control}\n          name=\"personaTemplateId\"\n          render={({ field }) => (\n            <FormItem>\n              <FormLabel>Template de Persona</FormLabel>\n              <Select onValueChange={field.onChange} defaultValue={field.value}>\n                <FormControl>\n                  <SelectTrigger>\n                    <SelectValue placeholder=\"Selecione um template de persona\" />\n                  </SelectTrigger>\n                </FormControl>\n                <SelectContent>\n                  {personaTemplates.map(template => (\n                    <SelectItem key={template.id} value={template.id}>\n                      {template.name}\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n              <FormDescription>Define o comportamento, papel e objetivos base do agente.</FormDescription>\n              <FormMessage />\n            </FormItem>\n          )}\n        />\n\n        <FormField\n          control={form.control}\n          name=\"llmProviderConfigId\"\n          render={({ field }) => (\n            <FormItem>\n              <FormLabel>Configuração do Provedor LLM</FormLabel>\n              <Select onValueChange={field.onChange} defaultValue={field.value}>\n                <FormControl>\n                  <SelectTrigger>\n                    <SelectValue placeholder=\"Selecione uma configuração LLM\" />\n                  </SelectTrigger>\n                </FormControl>\n                <SelectContent>\n                  {llmConfigs.map(config => (\n                    <SelectItem key={config.id} value={config.id}>\n                      {config.name} ({config.providerId})\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n              <FormDescription>Define qual modelo de linguagem e API Key o agente utilizará.</FormDescription>\n              <FormMessage />\n            </FormItem>\n          )}\n        />\n\n        <FormField\n          control={form.control}\n          name=\"temperature\"\n          render={({ field }) => (\n            <FormItem>\n              <FormLabel>Temperatura</FormLabel>\n              <div className=\"flex items-center gap-4\">\n                <FormControl>\n                   <Slider\n                    min={0}\n                    max={2}\n                    step={0.1}\n                    defaultValue={[field.value]}\n                    onValueChange={(value) => field.onChange(value[0])}\n                    className=\"flex-grow\"\n                  />\n                </FormControl>\n                <span className=\"text-sm font-mono w-10 text-right\">{field.value.toFixed(1)}</span>\n              </div>\n              <FormDescription>\n                Controla a aleatoriedade das respostas do LLM. Valores mais baixos são mais determinísticos. (0.0 - 2.0)\n              </FormDescription>\n              <FormMessage />\n            </FormItem>\n          )}\n        />\n\n        <div className=\"flex justify-end pt-2\">\n          <Button type=\"submit\" disabled={isSubmitting}>\n            {isSubmitting ? 'Criando Agente...' : (initialValues?.agentName ? 'Atualizar Agente' : 'Criar Agente')}\n          </Button>\n        </div>\n      </form>\n    </Form>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/features/agent/components/AgentInstanceList.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/features/agent/components/AgentInstanceListItem.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/features/chat/components/ChatInput.tsx","messages":[{"ruleId":"id-length","severity":1,"message":"Identifier name 'e' is too short (< 2).","line":66,"column":20,"nodeType":"Identifier","messageId":"tooShort","endLine":66,"endColumn":21}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { SendHorizontal, Paperclip, Mic } from 'lucide-react'; // Example icons\nimport React, { useState, useRef, useEffect, KeyboardEvent } from 'react';\n\nimport { Button } from '@/presentation/ui/components/ui/button';\nimport { Textarea } from '@/presentation/ui/components/ui/textarea';\nimport { cn } from '@/presentation/ui/lib/utils';\n\nexport interface ChatInputProps {\n  onSubmit: (message: string) => void;\n  isLoading?: boolean;\n  placeholder?: string;\n  className?: string;\n  initialValue?: string;\n}\n\nexport function ChatInput({\n  onSubmit,\n  isLoading = false,\n  placeholder = 'Message...',\n  className,\n  initialValue = '',\n}: ChatInputProps) {\n  const [message, setMessage] = useState(initialValue);\n  const textareaRef = useRef<HTMLTextAreaElement>(null);\n\n  // Auto-resize textarea height based on content\n  useEffect(() => {\n    if (textareaRef.current) {\n      textareaRef.current.style.height = 'auto'; // Reset height\n      const scrollHeight = textareaRef.current.scrollHeight;\n      // Max height for textarea, e.g., 5 lines. Adjust as needed.\n      // Assuming line height of ~20-24px. 5 lines ~ 100-120px.\n      const maxHeight = 120;\n      textareaRef.current.style.height = `${Math.min(scrollHeight, maxHeight)}px`;\n    }\n  }, [message]);\n\n  const handleSendMessage = () => {\n    const trimmedMessage = message.trim();\n    if (trimmedMessage && !isLoading) {\n      onSubmit(trimmedMessage);\n      setMessage('');\n      // Optionally refocus textarea after send\n      // textareaRef.current?.focus();\n    }\n  };\n\n  const handleKeyDown = (event: KeyboardEvent<HTMLTextAreaElement>) => {\n    if (event.key === 'Enter' && !event.shiftKey && !isLoading) {\n      event.preventDefault();\n      handleSendMessage();\n    }\n  };\n\n  return (\n    <div className={cn(\"flex items-end p-2 bg-slate-100 dark:bg-slate-800 border-t border-slate-200 dark:border-slate-700 space-x-2\", className)}>\n      {/* Placeholder for attachment button */}\n      <Button variant=\"ghost\" size=\"icon\" className=\"text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-300\" disabled={isLoading}>\n        <Paperclip className=\"h-5 w-5\" />\n        <span className=\"sr-only\">Attach file</span>\n      </Button>\n\n      <Textarea\n        ref={textareaRef}\n        value={message}\n        onChange={(e) => setMessage(e.target.value)}\n        onKeyDown={handleKeyDown}\n        placeholder={placeholder}\n        className=\"flex-1 resize-none border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700/50 focus:ring-sky-500 dark:focus:ring-sky-500 focus:border-sky-500 dark:focus:border-sky-500 min-h-[40px] max-h-[120px] overflow-y-auto rounded-lg px-3 py-2 text-sm\"\n        rows={1} // Start with 1 row, auto-expands\n        disabled={isLoading}\n      />\n\n      {/* Placeholder for voice input button, or use Send if message is not empty */}\n      {message.trim() || isLoading ? (\n        <Button\n            variant=\"default\"\n            size=\"icon\"\n            onClick={handleSendMessage}\n            disabled={isLoading || !message.trim()}\n            className=\"bg-sky-500 hover:bg-sky-600 text-white\"\n        >\n          <SendHorizontal className=\"h-5 w-5\" />\n          <span className=\"sr-only\">Send message</span>\n        </Button>\n      ) : (\n        <Button variant=\"ghost\" size=\"icon\" className=\"text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-300\" disabled={isLoading}>\n          <Mic className=\"h-5 w-5\" />\n          <span className=\"sr-only\">Record voice message</span>\n        </Button>\n      )}\n    </div>\n  );\n}\n\nexport default ChatInput;\n","usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/features/chat/components/ChatWindow.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'handleInputChange' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":42,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":42,"endColumn":26},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'handleFormSubmit' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":46,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":46,"endColumn":25}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Info, Bot, Hash, MessageSquare } from 'lucide-react'; // Paperclip and Send are now in MessageInput\nimport React from 'react';\n\nimport { Button } from '@/presentation/ui/components/ui/button';\n\nimport { MessageInput } from './MessageInput'; // Import MessageInput\nimport { ChatMessage } from './MessageItem';\nimport { MessageList } from './MessageList';\n\n// Interface para a conversa, pode ser mais detalhada se necessário\ninterface Conversation {\n  id: string;\n  name: string;\n  type: 'dm' | 'channel';\n  avatarUrl?: string;\n  participants?: number; // Para canais\n}\n\ninterface ChatWindowProps {\n  conversation: Conversation | null;\n  messages: ChatMessage[]; // Usar ChatMessage de MessageItem\n  onSendMessage: (content: string) => void;\n  isLoading?: boolean;\n  currentUserId: string; // Necessário para MessageList e MessageItem\n}\n\nexport function ChatWindow({ conversation, messages, onSendMessage, isLoading, currentUserId }: ChatWindowProps) {\n  const [inputValue, setInputValue] = React.useState('');\n\n  if (!conversation) {\n    return (\n      <div className=\"flex-1 flex flex-col items-center justify-center p-4 bg-slate-100 dark:bg-slate-800/30\">\n         <MessageSquare className=\"h-16 w-16 text-slate-400 dark:text-slate-500 mb-4\" />\n        <h2 className=\"text-xl font-semibold text-slate-700 dark:text-slate-200\">Bem-vindo ao Chat</h2>\n        <p className=\"text-slate-500 dark:text-slate-400\">\n          Selecione uma conversa na barra lateral para começar.\n        </p>\n      </div>\n    );\n  }\n\n  const handleInputChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    setInputValue(event.target.value);\n  };\n\n  const handleFormSubmit = (event: React.FormEvent<HTMLFormElement>) => {\n    event.preventDefault();\n    if (inputValue.trim()) {\n      onSendMessage(inputValue.trim());\n      setInputValue('');\n    }\n  };\n\n  return (\n    <div className=\"flex flex-col h-full\">\n      {/* Header */}\n      <header className=\"p-3 border-b border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 flex items-center justify-between flex-shrink-0\">\n        <div className=\"flex items-center space-x-2\">\n          {conversation.type === 'dm' ? (\n            conversation.avatarUrl ? (\n              <img src={conversation.avatarUrl} alt={conversation.name} className=\"h-7 w-7 rounded-full\" />\n            ) : (\n              <Bot className=\"h-6 w-6 text-slate-500\" />\n            )\n          ) : (\n            <Hash className=\"h-5 w-5 text-slate-500\" />\n          )}\n          <h2 className=\"text-lg font-semibold text-slate-800 dark:text-slate-100 truncate\">\n            {conversation.name}\n          </h2>\n          {conversation.type === 'channel' && conversation.participants && (\n            <span className=\"text-xs text-slate-500 dark:text-slate-400\">({conversation.participants} membros)</span>\n          )}\n        </div>\n        <Button variant=\"ghost\" size=\"icon\" aria-label=\"Detalhes da Conversa\">\n          <Info className=\"h-5 w-5 text-slate-500 dark:text-slate-400\" />\n        </Button>\n      </header>\n\n      {/* Message List Area */}\n      <div className=\"flex-1 p-4 overflow-y-auto bg-slate-100 dark:bg-slate-800/30\">\n        <MessageList messages={messages} isLoading={isLoading} currentUserId={currentUserId} />\n      </div>\n\n      {/* Message Input Area */}\n      <MessageInput onSendMessage={onSendMessage} isLoading={isLoading} />\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/features/chat/components/ConversationList.tsx","messages":[{"ruleId":"id-length","severity":1,"message":"Identifier name 'e' is too short (< 2).","line":60,"column":22,"nodeType":"Identifier","messageId":"tooShort","endLine":60,"endColumn":23}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Bot, Hash, UserCircle2, PlusCircle } from 'lucide-react'; // UserCircle2 for generic user, PlusCircle for new chat\nimport React from 'react';\n\nimport { Avatar, AvatarFallback, AvatarImage } from '@/presentation/ui/components/ui/avatar';\nimport { Button } from '@/presentation/ui/components/ui/button';\nimport { Input } from '@/presentation/ui/components/ui/input'; // For potential search within conversations\nimport { ScrollArea } from '@/presentation/ui/components/ui/scroll-area';\nimport { cn } from '@/presentation/ui/lib/utils';\n\n// Interface for conversation items, can be expanded\nexport interface ConversationItem {\n  id: string;\n  name: string;\n  type: 'dm' | 'channel' | 'agent'; // Added 'agent' type for clarity\n  avatarUrl?: string;\n  lastMessage?: string;\n  timestamp?: string;\n  unreadCount?: number;\n  isActive?: boolean; // To highlight the selected conversation\n}\n\ninterface ConversationListProps {\n  conversations: ConversationItem[];\n  selectedConversationId: string | null;\n  onSelectConversation: (conversationId: string) => void;\n  onNewConversation?: () => void; // Optional: Handler for starting a new chat/conversation\n  // Placeholder for search functionality state if managed outside\n  // searchTerm?: string;\n  // onSearchTermChange?: (term: string) => void;\n}\n\nexport function ConversationList({\n  conversations,\n  selectedConversationId,\n  onSelectConversation,\n  onNewConversation,\n}: ConversationListProps) {\n  const [internalSearchTerm, setInternalSearchTerm] = React.useState('');\n\n  const filteredConversations = conversations.filter(conv =>\n    conv.name.toLowerCase().includes(internalSearchTerm.toLowerCase())\n  );\n\n  return (\n    <div className=\"flex flex-col h-full\">\n      <header className=\"p-3 border-b border-slate-200 dark:border-slate-800 flex-shrink-0\">\n        <div className=\"flex items-center justify-between\">\n          <h2 className=\"text-lg font-semibold text-slate-800 dark:text-slate-100\">Conversas</h2>\n          {onNewConversation && (\n            <Button variant=\"ghost\" size=\"icon\" onClick={onNewConversation} aria-label=\"Nova Conversa\">\n              <PlusCircle className=\"h-5 w-5 text-slate-500 dark:text-slate-400\" />\n            </Button>\n          )}\n        </div>\n        <Input\n          type=\"search\"\n          placeholder=\"Buscar conversas...\"\n          className=\"mt-2 h-8\"\n          value={internalSearchTerm}\n          onChange={(e) => setInternalSearchTerm(e.target.value)}\n        />\n      </header>\n      <ScrollArea className=\"flex-1\">\n        <nav className=\"p-2 space-y-0.5\"> {/* Reduced space-y for tighter packing */}\n          {filteredConversations.length > 0 ? (\n            filteredConversations.map(conv => (\n              <button\n                key={conv.id}\n                onClick={() => onSelectConversation(conv.id)}\n                className={cn(\n                  \"w-full flex items-center space-x-2.5 p-2 rounded-md text-left transition-colors\",\n                  \"hover:bg-slate-200 dark:hover:bg-slate-700/60\",\n                  conv.id === selectedConversationId\n                    ? \"bg-sky-100 dark:bg-sky-700/50 text-sky-700 dark:text-sky-300 font-medium\"\n                    : \"text-slate-700 dark:text-slate-300\"\n                )}\n                aria-current={conv.id === selectedConversationId ? \"page\" : undefined}\n              >\n                <Avatar className=\"h-7 w-7 text-xs flex-shrink-0\">\n                  {conv.avatarUrl ? (\n                    <AvatarImage src={conv.avatarUrl} alt={conv.name} />\n                  ) : null}\n                  <AvatarFallback className={cn(\n                     \"text-white\",\n                     conv.type === 'agent' ? \"bg-emerald-500\" :\n                     conv.type === 'dm' ? \"bg-purple-500\" :\n                     \"bg-slate-400 dark:bg-slate-600\" // Channel or default\n                  )}>\n                    {conv.type === 'channel' ? <Hash size={14} /> :\n                     conv.type === 'agent' ? <Bot size={14} /> :\n                     conv.name.substring(0, 1).toUpperCase() || <UserCircle2 size={14} />}\n                  </AvatarFallback>\n                </Avatar>\n\n                <div className=\"flex-1 min-w-0\">\n                  <span className=\"text-sm truncate block leading-tight\">{conv.name}</span>\n                  {conv.lastMessage && (\n                    <span className=\"text-xs text-slate-500 dark:text-slate-400 truncate block leading-tight\">\n                      {conv.lastMessage}\n                    </span>\n                  )}\n                </div>\n                <div className=\"flex flex-col items-end flex-shrink-0 text-xs\">\n                    {conv.timestamp && <span className=\"text-slate-400 dark:text-slate-500 mb-0.5\">{conv.timestamp}</span>}\n                    {conv.unreadCount && conv.unreadCount > 0 && (\n                        <span className=\"bg-red-500 text-white font-semibold rounded-full px-1.5 py-0.5 text-[10px] leading-none\">\n                        {conv.unreadCount}\n                        </span>\n                    )}\n                </div>\n              </button>\n            ))\n          ) : (\n            <p className=\"p-4 text-center text-sm text-slate-500 dark:text-slate-400\">\n              {internalSearchTerm ? \"Nenhuma conversa encontrada.\" : \"Nenhuma conversa para exibir.\"}\n            </p>\n          )}\n        </nav>\n      </ScrollArea>\n      {/* Footer can be added here if needed, e.g., for quick actions or user status */}\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/features/chat/components/MessageInput.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/features/chat/components/MessageItem.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/features/chat/components/MessageList.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"output":"import { Loader2 } from 'lucide-react';\nimport React, { useEffect, useRef } from 'react';\n\nimport { ChatMessage, MessageItem } from './MessageItem'; // Assuming ChatMessage is also exported from MessageItem.tsx\n\ninterface MessageListProps {\n  messages: ChatMessage[];\n  isLoading?: boolean;\n  currentUserId: string; // To determine if a message is from the current user\n}\n\nexport function MessageList({ messages, isLoading, currentUserId }: MessageListProps) {\n  const messagesEndRef = useRef<HTMLDivElement | null>(null);\n\n  const scrollToBottom = () => {\n    messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\n  };\n\n  useEffect(() => { // Removed underscore from callback parameter\n    scrollToBottom();\n  }, [messages]); // Scroll to bottom when new messages arrive\n\n  // Pre-process messages to add `isContinuation` flag\n  const processedMessages = messages.map((message, index, array) => {\n    if (index > 0 && message.sender.id === array[index - 1].sender.id && message.type === array[index - 1].type) {\n      // Basic continuation: same sender and not a system message (system messages usually stand alone)\n      // More complex logic could involve timestamps (e.g., if within 1-2 minutes)\n      return { ...message, isContinuation: message.type !== 'system' };\n    }\n    return { ...message, isContinuation: false };\n  });\n\n  if (isLoading && processedMessages.length === 0) {\n    return (\n      <div className=\"flex flex-1 items-center justify-center\">\n        <Loader2 className=\"h-8 w-8 animate-spin text-sky-500\" />\n        <p className=\"ml-2 text-slate-500 dark:text-slate-400\">Carregando mensagens...</p>\n      </div>\n    );\n  }\n\n  if (!isLoading && processedMessages.length === 0) {\n    return (\n      <div className=\"flex flex-1 items-center justify-center\">\n        <p className=\"text-slate-500 dark:text-slate-400\">\n          Nenhuma mensagem ainda. Envie uma mensagem para começar!\n        </p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"flex-1 space-y-1 pr-1\"> {/* Reduced space-y for tighter packing with continuations */}\n      {processedMessages.map((message) => (\n        <MessageItem\n          key={message.id}\n          message={message}\n          isCurrentUser={message.sender.id === currentUserId}\n        />\n      ))}\n      <div ref={messagesEndRef} /> {/* Anchor for scrolling to bottom */}\n      {/* Optional: Show a \"typing...\" indicator here if isLoading is more granular */}\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/features/llm/components/LLMConfigForm.tsx","messages":[{"ruleId":"max-lines-per-function","severity":1,"message":"Function 'LLMConfigForm' has too many lines (109). Maximum allowed is 100.","line":62,"column":8,"nodeType":"FunctionDeclaration","messageId":"exceed","endLine":178,"endColumn":2}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { zodResolver } from '@hookform/resolvers/zod';\nimport React from 'react';\nimport { useForm } from 'react-hook-form';\nimport { toast } from 'sonner'; // Assuming sonner is used for toasts\nimport { z } from 'zod';\n\nimport { Button } from '@/presentation/ui/components/ui/button';\nimport {\n  Form,\n  FormControl,\n  FormDescription,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormMessage,\n} from '@/presentation/ui/components/ui/form';\nimport { Input } from '@/presentation/ui/components/ui/input';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/presentation/ui/components/ui/select';\n\n// Schema for form validation using Zod\nconst llmConfigSchema = z.object({\n  name: z.string().min(1, 'O nome da configuração é obrigatório.'),\n  providerId: z.enum(['openai', 'deepseek', 'ollama'], { // Added ollama as an example\n    required_error: 'Selecione um provedor LLM.',\n  }),\n  apiKey: z.string().optional(), // API Key is optional for local LLMs like Ollama\n  baseUrl: z.string().url('Insira uma URL válida.').optional().or(z.literal('')), // Optional and can be empty\n}).superRefine((data, ctx) => {\n  // API Key is required if provider is not 'ollama' (or other local providers)\n  if (data.providerId !== 'ollama' && !data.apiKey) {\n    ctx.addIssue({\n      code: z.ZodIssueCode.custom,\n      message: 'A Chave de API é obrigatória para este provedor.',\n      path: ['apiKey'],\n    });\n  }\n  // Base URL is required if provider is 'ollama'\n  if (data.providerId === 'ollama' && (!data.baseUrl || data.baseUrl.trim() === '')) {\n     ctx.addIssue({\n      code: z.ZodIssueCode.custom,\n      message: 'A URL Base é obrigatória para o provedor Ollama.',\n      path: ['baseUrl'],\n    });\n  }\n});\n\nexport type LLMConfigFormData = z.infer<typeof llmConfigSchema>;\n\ninterface LLMConfigFormProps {\n  onSubmit: (data: LLMConfigFormData) => Promise<void> | void;\n  initialValues?: Partial<LLMConfigFormData>;\n  isSubmitting?: boolean; // Optional prop to indicate submission state\n}\n\nconst supportedProviders = [\n  { id: 'openai', name: 'OpenAI (GPT-3.5, GPT-4, etc.)' },\n  { id: 'deepseek', name: 'DeepSeek Coder' },\n  { id: 'ollama', name: 'Ollama (Local LLMs)' },\n  // Add more providers as they are supported\n];\n\nexport function LLMConfigForm({ onSubmit, initialValues, isSubmitting }: LLMConfigFormProps) {\n  const form = useForm<LLMConfigFormData>({\n    resolver: zodResolver(llmConfigSchema),\n    defaultValues: {\n      name: initialValues?.name || '',\n      providerId: initialValues?.providerId || undefined, // Let placeholder show\n      apiKey: initialValues?.apiKey || '',\n      baseUrl: initialValues?.baseUrl || '',\n    },\n  });\n\n  const watchedProvider = form.watch('providerId');\n\n  const handleFormSubmit = async (data: LLMConfigFormData) => {\n    try {\n      await onSubmit(data);\n      // Toast notification for success can be handled by the parent page\n      // or here if a generic success message is desired.\n    } catch (error) {\n      console.error(\"Error submitting LLM config form:\", error);\n      toast.error(\"Ocorreu um erro ao salvar a configuração. Tente novamente.\");\n    }\n  };\n\n  return (\n    <Form {...form}>\n      <form onSubmit={form.handleSubmit(handleFormSubmit)} className=\"space-y-6\">\n        <FormField\n          control={form.control}\n          name=\"name\"\n          render={({ field }) => (\n            <FormItem>\n              <FormLabel>Nome da Configuração</FormLabel>\n              <FormControl>\n                <Input placeholder=\"Ex: Meu OpenAI Pessoal, Ollama Local\" {...field} />\n              </FormControl>\n              <FormDescription>\n                Um nome amigável para identificar esta configuração LLM.\n              </FormDescription>\n              <FormMessage />\n            </FormItem>\n          )}\n        />\n\n        <FormField\n          control={form.control}\n          name=\"providerId\"\n          render={({ field }) => (\n            <FormItem>\n              <FormLabel>Provedor LLM</FormLabel>\n              <Select onValueChange={field.onChange} defaultValue={field.value}>\n                <FormControl>\n                  <SelectTrigger>\n                    <SelectValue placeholder=\"Selecione um provedor\" />\n                  </SelectTrigger>\n                </FormControl>\n                <SelectContent>\n                  {supportedProviders.map(provider => (\n                    <SelectItem key={provider.id} value={provider.id}>\n                      {provider.name}\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n              <FormDescription>\n                Escolha o serviço de LLM que você deseja configurar.\n              </FormDescription>\n              <FormMessage />\n            </FormItem>\n          )}\n        />\n\n        {watchedProvider !== 'ollama' && ( // Only show API Key if not Ollama\n          <FormField\n            control={form.control}\n            name=\"apiKey\"\n            render={({ field }) => (\n              <FormItem>\n                <FormLabel>Chave de API (API Key)</FormLabel>\n                <FormControl>\n                  <Input type=\"password\" placeholder=\"sk-xxxxxxxxxxxxxxxxxxxxxxxxxxxxx\" {...field} />\n                </FormControl>\n                <FormDescription>\n                  Sua chave de API para o provedor selecionado.\n                </FormDescription>\n                <FormMessage />\n              </FormItem>\n            )}\n          />\n        )}\n\n        <FormField\n          control={form.control}\n          name=\"baseUrl\"\n          render={({ field }) => (\n            <FormItem>\n              <FormLabel>URL Base (Opcional)</FormLabel>\n              <FormControl>\n                <Input placeholder=\"Ex: https://api.example.com/v1 (para proxies ou Ollama)\" {...field} />\n              </FormControl>\n              <FormDescription>\n                Se você estiver usando um proxy, um endpoint auto-hospedado (como Ollama: http://localhost:11434),\n                ou um provedor compatível com API OpenAI, insira a URL base aqui.\n              </FormDescription>\n              <FormMessage />\n            </FormItem>\n          )}\n        />\n        <div className=\"flex justify-end pt-4\">\n          <Button type=\"submit\" disabled={isSubmitting || !form.formState.isDirty}>\n            {isSubmitting ? 'Salvando...' : (initialValues?.name ? 'Atualizar Configuração' : 'Salvar Configuração')}\n          </Button>\n        </div>\n      </form>\n    </Form>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/features/llm/components/LLMConfigList.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/features/llm/components/LLMConfigListItem.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/features/onboarding/components/InitialConfigStep.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/features/onboarding/components/OnboardingWizard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/features/onboarding/components/PersonaList.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Button' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":16}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { CheckCircle2 } from 'lucide-react'; // Icon for selected state\nimport React from 'react';\n\nimport { Button } from '@/presentation/ui/components/ui/button'; // Will be used if \"Select\" button per card is desired\nimport { Card, CardHeader, CardTitle, CardDescription, CardContent } from '@/presentation/ui/components/ui/card';\nimport { ScrollArea } from '@/presentation/ui/components/ui/scroll-area';\nimport { cn } from '@/presentation/ui/lib/utils'; // For conditional class names\n\n// Define the Persona type\nexport interface Persona {\n  id: string;\n  name: string;\n  description: string;\n  icon?: React.ElementType; // Placeholder for an icon component or URL string for an image\n  tags?: string[];\n}\n\n// Define props for the PersonaList component\ninterface PersonaListProps {\n  personas: Persona[];\n  selectedPersonaId?: string | null;\n  onSelectPersona: (personaId: string) => void;\n  className?: string;\n  cardClassName?: string;\n}\n\n// Placeholder personas data (will be passed as a prop in a real scenario)\nconst placeholderPersonas: Persona[] = [\n  {\n    id: 'developer',\n    name: 'Software Developer',\n    description: 'Helps with coding tasks, debugging, and software design.',\n    tags: ['Coding', 'Debugging', 'Development'],\n    // icon: Code, // Example if using lucide-react icons directly\n  },\n  {\n    id: 'writer',\n    name: 'Content Writer',\n    description: 'Assists in writing articles, blog posts, and other content.',\n    tags: ['Writing', 'Content Creation', 'Marketing'],\n    // icon: FileText,\n  },\n  {\n    id: 'researcher',\n    name: 'Researcher',\n    description: 'Helps gather information, summarize findings, and analyze data.',\n    tags: ['Research', 'Analysis', 'Data'],\n    // icon: Search,\n  },\n  {\n    id: 'project_manager',\n    name: 'Project Manager',\n    description: 'Assists in planning, organizing, and managing project tasks.',\n    tags: ['Planning', 'Organization', 'Management'],\n    // icon: Briefcase,\n  },\n];\n\n\nexport function PersonaList({\n  personas = placeholderPersonas, // Use placeholder if no personas prop is provided\n  selectedPersonaId,\n  onSelectPersona,\n  className,\n  cardClassName,\n}: PersonaListProps) {\n  return (\n    <ScrollArea className={cn(\"h-[400px] w-full\", className)}> {/* Default height, can be overridden */}\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 p-1\">\n        {/* Content for rendering persona items will be added in the next step */}\n        {personas.map((persona) => (\n          <Card\n            key={persona.id}\n            onClick={() => onSelectPersona(persona.id)}\n            className={cn(\n              \"cursor-pointer transition-all hover:shadow-lg dark:hover:bg-slate-800/60\",\n              selectedPersonaId === persona.id\n                ? \"border-sky-500 dark:border-sky-400 ring-2 ring-sky-500 dark:ring-sky-400 bg-sky-50 dark:bg-sky-900/30\"\n                : \"border-slate-200 dark:border-slate-700 hover:border-slate-300 dark:hover:border-slate-600\",\n              cardClassName\n            )}\n          >\n            <CardHeader>\n              <div className=\"flex justify-between items-start\">\n                <div>\n                  <CardTitle className=\"text-lg\">{persona.name}</CardTitle>\n                  {persona.icon && <persona.icon className=\"w-8 h-8 mt-2 text-slate-600 dark:text-slate-400\" />}\n                </div>\n                {selectedPersonaId === persona.id && (\n                  <CheckCircle2 className=\"w-6 h-6 text-sky-500 dark:text-sky-400\" />\n                )}\n              </div>\n            </CardHeader>\n            <CardContent>\n              <CardDescription className=\"text-sm mb-3\">{persona.description}</CardDescription>\n              {persona.tags && persona.tags.length > 0 && (\n                <div className=\"flex flex-wrap gap-1.5\">\n                  {persona.tags.map(tag => (\n                    <span key={tag} className=\"px-2 py-0.5 text-xs bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300 rounded-full\">\n                      {tag}\n                    </span>\n                  ))}\n                </div>\n              )}\n            </CardContent>\n            {/* Optionally, a select button within the card if preferred over clicking the whole card\n            <CardFooter>\n              <Button\n                variant={selectedPersonaId === persona.id ? \"default\" : \"outline\"}\n                className=\"w-full\"\n                onClick={(e) => { e.stopPropagation(); onSelectPersona(persona.id); }}\n              >\n                {selectedPersonaId === persona.id ? \"Selected\" : \"Select\"}\n              </Button>\n            </CardFooter>\n            */}\n          </Card>\n        ))}\n        {personas.length === 0 && (\n          <p className=\"col-span-full text-center text-slate-500 dark:text-slate-400 py-10\">\n            No personas available for selection.\n          </p>\n        )}\n      </div>\n    </ScrollArea>\n  );\n}\n\nexport default PersonaList;\n","usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/features/onboarding/components/WelcomeStep.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/features/persona/components/PersonaTemplateForm.tsx","messages":[{"ruleId":"max-lines-per-function","severity":1,"message":"Function 'PersonaTemplateForm' has too many lines (142). Maximum allowed is 100.","line":53,"column":8,"nodeType":"FunctionDeclaration","messageId":"exceed","endLine":206,"endColumn":2}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { zodResolver } from '@hookform/resolvers/zod';\nimport { X } from 'lucide-react';\nimport React from 'react';\nimport { useForm, Controller } from 'react-hook-form';\nimport { z } from 'zod';\n\nimport { Badge } from '@/presentation/ui/components/ui/badge';\nimport { Button } from '@/presentation/ui/components/ui/button';\nimport {\n  Form,\n  FormControl,\n  FormDescription,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormMessage,\n} from '@/presentation/ui/components/ui/form';\nimport { Input } from '@/presentation/ui/components/ui/input';\nimport { Textarea } from '@/presentation/ui/components/ui/textarea';\n// Para um multi-select mais robusto, poderia usar ShadCN Combobox com modo múltiplo,\n// ou uma lib como react-select. Por simplicidade, faremos um input de texto para tools.\n// import { Checkbox } from \"@/presentation/ui/components/ui/checkbox\" // Exemplo se fosse usar checkboxes\n\n// Lista de ferramentas disponíveis (exemplo, poderia vir de uma config ou API)\nconst AVAILABLE_TOOLS = [\n  { id: 'filesystem', label: 'File System (Leitura/Escrita)' },\n  { id: 'terminal', label: 'Terminal (Executar Comandos)' },\n  { id: 'codeEditor', label: 'Editor de Código (Visualizar/Modificar)' },\n  { id: 'search', label: 'Busca Web/Local' },\n  { id: 'testRunner', label: 'Executor de Testes' },\n  { id: 'issueTracker', label: 'Rastreador de Issues' },\n  { id: 'browserDevTools', label: 'Ferramentas de Desenvolvedor do Navegador' },\n  { id: 'taskManager', label: 'Gerenciador de Tarefas (Interno)' },\n  // Adicionar mais ferramentas conforme necessário\n];\n\nconst personaTemplateFormSchema = z.object({\n  name: z.string().min(3, 'Nome deve ter ao menos 3 caracteres.').max(100, 'Nome muito longo.'),\n  role: z.string().min(10, 'Papel deve ter ao menos 10 caracteres.').max(500, 'Papel muito longo.'),\n  goal: z.string().min(10, 'Objetivo deve ter ao menos 10 caracteres.').max(1000, 'Objetivo muito longo.'),\n  backstory: z.string().max(2000, 'Backstory muito longo.').optional(),\n  toolNames: z.array(z.string()).optional(), // Simples array de strings por agora\n});\n\nexport type PersonaTemplateFormData = z.infer<typeof personaTemplateFormSchema>;\n\ninterface PersonaTemplateFormProps {\n  onSubmit: (data: PersonaTemplateFormData) => Promise<void> | void;\n  initialValues?: Partial<PersonaTemplateFormData>;\n  isSubmitting?: boolean;\n}\n\nexport function PersonaTemplateForm({\n  onSubmit,\n  initialValues,\n  isSubmitting = false,\n}: PersonaTemplateFormProps) {\n  const form = useForm<PersonaTemplateFormData>({\n    resolver: zodResolver(personaTemplateFormSchema),\n    defaultValues: {\n      name: initialValues?.name || '',\n      role: initialValues?.role || '',\n      goal: initialValues?.goal || '',\n      backstory: initialValues?.backstory || '',\n      toolNames: initialValues?.toolNames || [],\n    },\n  });\n\n  // Estado local para gerenciar o input da ferramenta atual\n  const [currentToolInput, setCurrentToolInput] = React.useState('');\n\n  const handleAddTool = () => {\n    const toolValue = currentToolInput.trim();\n    if (toolValue && !form.getValues('toolNames')?.includes(toolValue)) {\n      const currentTools = form.getValues('toolNames') || [];\n      form.setValue('toolNames', [...currentTools, toolValue], { shouldValidate: true, shouldDirty: true });\n      setCurrentToolInput('');\n    }\n  };\n\n  const handleRemoveTool = (toolToRemove: string) => {\n    const currentTools = form.getValues('toolNames') || [];\n    form.setValue('toolNames', currentTools.filter(tool => tool !== toolToRemove), { shouldValidate: true, shouldDirty: true });\n  };\n\n\n  return (\n    <Form {...form}>\n      <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-6\">\n        <FormField\n          control={form.control}\n          name=\"name\"\n          render={({ field }) => (\n            <FormItem>\n              <FormLabel>Nome do Template</FormLabel>\n              <FormControl>\n                <Input placeholder=\"Ex: Desenvolvedor Python Sênior\" {...field} />\n              </FormControl>\n              <FormDescription>Um nome único e descritivo para este template de persona.</FormDescription>\n              <FormMessage />\n            </FormItem>\n          )}\n        />\n\n        <FormField\n          control={form.control}\n          name=\"role\"\n          render={({ field }) => (\n            <FormItem>\n              <FormLabel>Papel (Role)</FormLabel>\n              <FormControl>\n                <Textarea placeholder=\"Descreva o papel principal desta persona. Ex: 'Um engenheiro de software especializado em...' \" {...field} className=\"min-h-[80px]\" />\n              </FormControl>\n              <FormDescription>Qual é a função ou especialidade principal desta persona?</FormDescription>\n              <FormMessage />\n            </FormItem>\n          )}\n        />\n\n        <FormField\n          control={form.control}\n          name=\"goal\"\n          render={({ field }) => (\n            <FormItem>\n              <FormLabel>Objetivo Principal (Goal)</FormLabel>\n              <FormControl>\n                <Textarea placeholder=\"Defina o objetivo primário que esta persona deve alcançar. Ex: 'Desenvolver e manter APIs robustas e escaláveis.' \" {...field} className=\"min-h-[100px]\" />\n              </FormControl>\n              <FormDescription>Qual é a meta ou resultado principal esperado das ações desta persona?</FormDescription>\n              <FormMessage />\n            </FormItem>\n          )}\n        />\n\n        <FormField\n          control={form.control}\n          name=\"backstory\"\n          render={({ field }) => (\n            <FormItem>\n              <FormLabel>Backstory / Contexto (Opcional)</FormLabel>\n              <FormControl>\n                <Textarea placeholder=\"Forneça um breve histórico ou contexto para esta persona, se relevante. Ex: 'Trabalhou em X empresas, especialista em Y tecnologias...' \" {...field} className=\"min-h-[100px]\" />\n              </FormControl>\n              <FormDescription>Informações adicionais que ajudam a definir a personalidade e o conhecimento da persona.</FormDescription>\n              <FormMessage />\n            </FormItem>\n          )}\n        />\n\n        {/* Gerenciamento de Ferramentas (ToolNames) - Versão Simplificada */}\n        <FormItem>\n          <FormLabel>Ferramentas Permitidas</FormLabel>\n          <div className=\"flex items-center gap-2\">\n            <Input\n              placeholder=\"Digite o nome de uma ferramenta (ex: filesystem)\"\n              value={currentToolInput}\n              onChange={(event) => setCurrentToolInput(event.target.value)}\n              onKeyDown={(event) => {\n                if (event.key === 'Enter' && currentToolInput.trim() !== '') {\n                  event.preventDefault();\n                  handleAddTool();\n                }\n              }}\n              className=\"flex-grow\"\n            />\n            <Button type=\"button\" variant=\"outline\" onClick={handleAddTool} disabled={!currentToolInput.trim()}>\n              Adicionar\n            </Button>\n          </div>\n          <FormDescription>\n            Liste as ferramentas que esta persona poderá utilizar (pressione Enter ou clique Adicionar).\n            Exemplos: {AVAILABLE_TOOLS.slice(0,3).map(tool => tool.id).join(', ')}...\n          </FormDescription>\n          <Controller\n            control={form.control}\n            name=\"toolNames\"\n            render={({ field }) => (\n              <div className=\"mt-2 space-x-2 space-y-2\">\n                {field.value?.map((tool) => (\n                  <Badge key={tool} variant=\"secondary\" className=\"whitespace-nowrap\">\n                    {tool}\n                    <button\n                      type=\"button\"\n                      className=\"ml-1.5 rounded-full outline-none ring-offset-background focus:ring-2 focus:ring-ring focus:ring-offset-2\"\n                      onClick={() => handleRemoveTool(tool)}\n                    >\n                      <X className=\"h-3 w-3 text-muted-foreground hover:text-foreground\" />\n                    </button>\n                  </Badge>\n                ))}\n              </div>\n            )}\n          />\n          <FormMessage />\n        </FormItem>\n\n\n        <div className=\"flex justify-end pt-2\">\n          <Button type=\"submit\" disabled={isSubmitting}>\n            {isSubmitting ? 'Salvando Template...' : (initialValues?.name ? 'Atualizar Template' : 'Salvar Template')}\n          </Button>\n        </div>\n      </form>\n    </Form>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/features/persona/components/PersonaTemplateList.tsx","messages":[{"ruleId":"id-length","severity":1,"message":"Identifier name 't' is too short (< 2).","line":13,"column":37,"nodeType":"Identifier","messageId":"tooShort","endLine":13,"endColumn":38},{"ruleId":"id-length","severity":1,"message":"Identifier name 't' is too short (< 2).","line":21,"column":37,"nodeType":"Identifier","messageId":"tooShort","endLine":21,"endColumn":38},{"ruleId":"id-length","severity":1,"message":"Identifier name 't' is too short (< 2).","line":29,"column":37,"nodeType":"Identifier","messageId":"tooShort","endLine":29,"endColumn":38}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { toast } from 'sonner';\n\nimport { PersonaTemplate, PersonaTemplateListItem } from './PersonaTemplateListItem';\n\ninterface PersonaTemplateListProps {\n  templates: PersonaTemplate[];\n}\n\nexport function PersonaTemplateList({ templates }: PersonaTemplateListProps) {\n\n  const handleDeleteTemplate = (templateId: string) => {\n    const template = templates.find(t => t.id === templateId);\n    toast.warning(`Exclusão do template \"${template?.name}\" (simulado).`, {\n      description: \"Esta funcionalidade ainda não está conectada ao backend.\",\n    });\n    // Example: setTemplates(prev => prev.filter(t => t.id !== templateId));\n  };\n\n  const handleEditTemplate = (templateId: string) => {\n    const template = templates.find(t => t.id === templateId);\n    toast.info(`Edição do template \"${template?.name}\" (simulado).`, {\n      description: \"Redirecionamento para formulário de edição (a ser implementado).\",\n    });\n    // Example: router.navigate({ to: `/personas/${templateId}/edit` });\n  };\n\n  const handleCreateAgentFromTemplate = (templateId: string) => {\n    const template = templates.find(t => t.id === templateId);\n    toast.info(`Criar agente com template \"${template?.name}\" (simulado).`, {\n      description: \"Redirecionamento para formulário de criação de agente (a ser implementado).\",\n    });\n    // Example: router.navigate({ to: `/agents/new?templateId=${templateId}` });\n  };\n\n\n  return (\n    <div className=\"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4\">\n      {templates.map((template) => (\n        <PersonaTemplateListItem\n          key={template.id}\n          template={template}\n          onDelete={handleDeleteTemplate}\n          onEdit={handleEditTemplate}\n          onCreateAgent={handleCreateAgentFromTemplate}\n        />\n      ))}\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/features/persona/components/PersonaTemplateListItem.tsx","messages":[{"ruleId":"@typescript-eslint/naming-convention","severity":1,"message":"Object Literal Property name `code-editor` must match one of the following formats: camelCase, PascalCase, UPPER_CASE, snake_case","line":39,"column":3,"nodeType":"Literal","messageId":"doesNotMatchFormat","endLine":39,"endColumn":16},{"ruleId":"@typescript-eslint/naming-convention","severity":1,"message":"Object Literal Property name `test-runner` must match one of the following formats: camelCase, PascalCase, UPPER_CASE, snake_case","line":41,"column":3,"nodeType":"Literal","messageId":"doesNotMatchFormat","endLine":41,"endColumn":16},{"ruleId":"@typescript-eslint/naming-convention","severity":1,"message":"Object Literal Property name `issue-tracker` must match one of the following formats: camelCase, PascalCase, UPPER_CASE, snake_case","line":42,"column":3,"nodeType":"Literal","messageId":"doesNotMatchFormat","endLine":42,"endColumn":18},{"ruleId":"@typescript-eslint/naming-convention","severity":1,"message":"Object Literal Property name `browser-dev-tools` must match one of the following formats: camelCase, PascalCase, UPPER_CASE, snake_case","line":43,"column":3,"nodeType":"Literal","messageId":"doesNotMatchFormat","endLine":43,"endColumn":22},{"ruleId":"@typescript-eslint/naming-convention","severity":1,"message":"Object Literal Property name `task-manager` must match one of the following formats: camelCase, PascalCase, UPPER_CASE, snake_case","line":44,"column":3,"nodeType":"Literal","messageId":"doesNotMatchFormat","endLine":44,"endColumn":17},{"ruleId":"@typescript-eslint/naming-convention","severity":1,"message":"Object Literal Property name `gantt-chart` must match one of the following formats: camelCase, PascalCase, UPPER_CASE, snake_case","line":45,"column":3,"nodeType":"Literal","messageId":"doesNotMatchFormat","endLine":45,"endColumn":16},{"ruleId":"@typescript-eslint/naming-convention","severity":1,"message":"Object Literal Property name `communication-tools` must match one of the following formats: camelCase, PascalCase, UPPER_CASE, snake_case","line":46,"column":3,"nodeType":"Literal","messageId":"doesNotMatchFormat","endLine":46,"endColumn":24},{"ruleId":"no-undef","severity":2,"message":"'MessageSquare' is not defined.","line":46,"column":26,"nodeType":"Identifier","messageId":"undef","endLine":46,"endColumn":39},{"ruleId":"@typescript-eslint/naming-convention","severity":1,"message":"Object Literal Property name `markdown-editor` must match one of the following formats: camelCase, PascalCase, UPPER_CASE, snake_case","line":47,"column":3,"nodeType":"Literal","messageId":"doesNotMatchFormat","endLine":47,"endColumn":20},{"ruleId":"@typescript-eslint/naming-convention","severity":1,"message":"Object Literal Property name `documentation-generator` must match one of the following formats: camelCase, PascalCase, UPPER_CASE, snake_case","line":48,"column":3,"nodeType":"Literal","messageId":"doesNotMatchFormat","endLine":48,"endColumn":28},{"ruleId":"no-undef","severity":2,"message":"'BookText' is not defined.","line":48,"column":30,"nodeType":"Identifier","messageId":"undef","endLine":48,"endColumn":38},{"ruleId":"@typescript-eslint/naming-convention","severity":1,"message":"Object Literal Property name `screenshot-tool` must match one of the following formats: camelCase, PascalCase, UPPER_CASE, snake_case","line":49,"column":3,"nodeType":"Literal","messageId":"doesNotMatchFormat","endLine":49,"endColumn":20},{"ruleId":"max-lines-per-function","severity":1,"message":"Function 'PersonaTemplateListItem' has too many lines (106). Maximum allowed is 100.","line":54,"column":8,"nodeType":"FunctionDeclaration","messageId":"exceed","endLine":159,"endColumn":2}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":11,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Link } from '@tanstack/react-router';\nimport { UserSquare, Edit3, Trash2, MoreVertical, Settings, Zap, Brain } from 'lucide-react'; // Added more icons\nimport React from 'react';\n\nimport { Badge } from '@/presentation/ui/components/ui/badge';\nimport { Button } from '@/presentation/ui/components/ui/button';\nimport { Card, CardContent, CardDescription, CardFooter, CardHeader, CardTitle } from '@/presentation/ui/components/ui/card';\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuSeparator,\n  DropdownMenuTrigger,\n} from '@/presentation/ui/components/ui/dropdown-menu';\nimport { Separator } from '@/presentation/ui/components/ui/separator';\nimport { Tooltip, TooltipContent, TooltipProvider, TooltipTrigger } from '@/presentation/ui/components/ui/tooltip';\n\n\nexport interface PersonaTemplate {\n  id: string;\n  name: string;\n  role: string;\n  goal: string;\n  backstory?: string;\n  toolNames?: string[]; // List of tool names this persona can use\n}\n\ninterface PersonaTemplateListItemProps {\n  template: PersonaTemplate;\n  onEdit?: (templateId: string) => void;\n  onDelete?: (templateId: string) => void;\n  onCreateAgent?: (templateId: string) => void; // Action to create an agent from this template\n}\n\n// A simple map for tool icons (extend as needed)\nconst toolIconMap: Record<string, React.ElementType> = {\n  filesystem: Settings, // Placeholder, actual icon might be FolderCog or similar\n  terminal: Settings, // Placeholder, actual icon might be TerminalSquare\n  'code-editor': Edit3,\n  search: Settings, // Placeholder, actual icon might be SearchCode\n  'test-runner': Zap,\n  'issue-tracker': Settings, // Placeholder\n  'browser-dev-tools': Settings, // Placeholder\n  'task-manager': Settings, // Placeholder\n  'gantt-chart': Settings, // Placeholder\n  'communication-tools': MessageSquare, // Placeholder\n  'markdown-editor': Edit3,\n  'documentation-generator': BookText, // Placeholder\n  'screenshot-tool': Settings, // Placeholder\n  default: Brain, // Default icon for unknown tools\n};\n\n\nexport function PersonaTemplateListItem({ template, onEdit, onDelete, onCreateAgent }: PersonaTemplateListItemProps) {\n  return (\n    <Card className=\"flex flex-col h-full hover:shadow-lg transition-shadow duration-200\">\n      <CardHeader className=\"pb-3\">\n        <div className=\"flex items-start justify-between mb-2\">\n          <UserSquare className=\"h-10 w-10 text-sky-500 dark:text-sky-400\" />\n          <DropdownMenu>\n            <DropdownMenuTrigger asChild>\n              <Button variant=\"ghost\" size=\"icon\" className=\"h-7 w-7 data-[state=open]:bg-slate-100 dark:data-[state=open]:bg-slate-800\">\n                <MoreVertical className=\"h-4 w-4\" />\n                <span className=\"sr-only\">Mais opções</span>\n              </Button>\n            </DropdownMenuTrigger>\n            <DropdownMenuContent align=\"end\">\n              {onCreateAgent && (\n                <DropdownMenuItem onClick={() => onCreateAgent(template.id)}>\n                  <Zap className=\"mr-2 h-3.5 w-3.5 text-muted-foreground/70\" />\n                  Criar Agente com este Template\n                </DropdownMenuItem>\n              )}\n              {onEdit && (\n                <DropdownMenuItem onClick={() => onEdit(template.id)}>\n                  <Edit3 className=\"mr-2 h-3.5 w-3.5 text-muted-foreground/70\" />\n                  Editar Template\n                </DropdownMenuItem>\n              )}\n              {onDelete && (\n                <>\n                  <DropdownMenuSeparator />\n                  <DropdownMenuItem\n                    className=\"text-red-600 dark:text-red-500 focus:text-red-600 dark:focus:text-red-500 focus:bg-red-50 dark:focus:bg-red-900/50\"\n                    onClick={() => onDelete(template.id)}\n                  >\n                    <Trash2 className=\"mr-2 h-3.5 w-3.5\" />\n                    Excluir Template\n                  </DropdownMenuItem>\n                </>\n              )}\n            </DropdownMenuContent>\n          </DropdownMenu>\n        </div>\n        <CardTitle className=\"text-lg truncate\" title={template.name}>\n          <Link to=\"/personas/$templateId\" params={{ templateId: template.id }} className=\"hover:underline\">\n            {template.name}\n          </Link>\n        </CardTitle>\n        <CardDescription className=\"text-xs h-10 line-clamp-2\" title={template.role}>\n          Papel: {template.role}\n        </CardDescription>\n      </CardHeader>\n      <CardContent className=\"flex-grow pb-3 space-y-2\">\n        <div>\n          <h4 className=\"text-xs font-semibold text-slate-600 dark:text-slate-400 mb-0.5\">Objetivo Principal:</h4>\n          <p className=\"text-xs text-slate-500 dark:text-slate-400 line-clamp-3\" title={template.goal}>\n            {template.goal}\n          </p>\n        </div>\n        {template.toolNames && template.toolNames.length > 0 && (\n          <div>\n            <h4 className=\"text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1\">Ferramentas:</h4>\n            <div className=\"flex flex-wrap gap-1.5\">\n              <TooltipProvider delayDuration={100}>\n                {template.toolNames.slice(0, 5).map(toolName => {\n                  const IconComponent = toolIconMap[toolName] || toolIconMap.default;\n                  return (\n                    <Tooltip key={toolName}>\n                      <TooltipTrigger asChild>\n                        <Badge variant=\"secondary\" className=\"px-1.5 py-0.5 text-xs\">\n                          <IconComponent className=\"h-3 w-3 mr-1 opacity-70\" />\n                          {toolName}\n                        </Badge>\n                      </TooltipTrigger>\n                      <TooltipContent className=\"text-xs p-1\">\n                        {toolName}\n                      </TooltipContent>\n                    </Tooltip>\n                  );\n                })}\n                {template.toolNames.length > 5 && (\n                   <Tooltip>\n                      <TooltipTrigger asChild>\n                        <Badge variant=\"outline\" className=\"px-1.5 py-0.5 text-xs\">\n                          +{template.toolNames.length - 5} mais\n                        </Badge>\n                      </TooltipTrigger>\n                      <TooltipContent className=\"text-xs p-1\">\n                        {template.toolNames.slice(5).join(', ')}\n                      </TooltipContent>\n                    </Tooltip>\n                )}\n              </TooltipProvider>\n            </div>\n          </div>\n        )}\n      </CardContent>\n      <Separator />\n      <CardFooter className=\"p-3\">\n        <Button variant=\"outline\" size=\"sm\" className=\"w-full\" asChild>\n           <Link to=\"/personas/$templateId\" params={{ templateId: template.id }}>\n            Ver Detalhes / Editar\n          </Link>\n        </Button>\n      </CardFooter>\n    </Card>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/features/project/components/ProjectCard.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ExternalLink' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":22}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Link }\n  from '@tanstack/react-router';\nimport { ExternalLink, Star, GitFork, CalendarDays } from 'lucide-react'; // Example icons\nimport React from 'react';\n\nimport { Badge } from '@/presentation/ui/components/ui/badge';\nimport {\n  Card,\n  CardContent,\n  CardDescription,\n  CardFooter,\n  CardHeader,\n  CardTitle,\n} from '@/presentation/ui/components/ui/card';\nimport { cn } from '@/presentation/ui/lib/utils';\n\n\n// Define the ProjectSummary type/interface\nexport interface ProjectSummary {\n  id: string;\n  name: string;\n  description: string;\n  lastUpdatedAt?: string | Date; // Could be string or Date object\n  tags?: string[];\n  imageUrl?: string; // Optional image for the card\n  // Example additional fields for a more \"discord-like\" project card feel\n  starCount?: number;\n  forkCount?: number;\n  owner?: {\n    name: string;\n    avatarUrl?: string;\n  };\n}\n\ninterface ProjectCardProps {\n  project: ProjectSummary;\n  className?: string;\n}\n\nexport function ProjectCard({ project, className }: ProjectCardProps) {\n  const lastUpdatedText = project.lastUpdatedAt\n    ? `Updated ${new Date(project.lastUpdatedAt).toLocaleDateString()}`\n    : 'Not updated recently';\n\n  return (\n    <Link\n      to=\"/projects/$projectId\" // TanStack Router v1 style path param\n      params={{ projectId: project.id }}\n      className={cn(\"block hover:shadow-lg transition-shadow duration-200 rounded-lg\", className)}\n    >\n      <Card className=\"h-full flex flex-col\"> {/* Ensure card itself takes full height of Link */}\n        {project.imageUrl && (\n          <img\n            src={project.imageUrl}\n            alt={`${project.name} preview`}\n            className=\"w-full h-32 object-cover rounded-t-lg\"\n          />\n        )}\n        <CardHeader>\n          <CardTitle className=\"text-lg\">{project.name}</CardTitle>\n          {project.owner && (\n            <div className=\"flex items-center text-xs text-slate-500 dark:text-slate-400 mt-1\">\n              {project.owner.avatarUrl && (\n                <img src={project.owner.avatarUrl} alt={project.owner.name} className=\"w-4 h-4 rounded-full mr-1.5\" />\n              )}\n              <span>{project.owner.name}</span>\n            </div>\n          )}\n        </CardHeader>\n        <CardContent className=\"flex-grow\">\n          <CardDescription className=\"text-sm line-clamp-3\">{project.description}</CardDescription>\n          {project.tags && project.tags.length > 0 && (\n            <div className=\"mt-3 flex flex-wrap gap-1.5\">\n              {project.tags.map((tag) => (\n                <Badge key={tag} variant=\"secondary\">{tag}</Badge>\n              ))}\n            </div>\n          )}\n        </CardContent>\n        <CardFooter className=\"text-xs text-slate-500 dark:text-slate-400 flex justify-between items-center pt-4\">\n          <div className=\"flex items-center\">\n            <CalendarDays className=\"w-3.5 h-3.5 mr-1.5\" />\n            <span>{lastUpdatedText}</span>\n          </div>\n          <div className=\"flex items-center space-x-3\">\n            {project.starCount !== undefined && (\n              <span className=\"flex items-center\">\n                <Star className=\"w-3.5 h-3.5 mr-1\" /> {project.starCount}\n              </span>\n            )}\n            {project.forkCount !== undefined && (\n              <span className=\"flex items-center\">\n                <GitFork className=\"w-3.5 h-3.5 mr-1\" /> {project.forkCount}\n              </span>\n            )}\n            {/* <ExternalLink className=\"w-4 h-4 hover:text-slate-700 dark:hover:text-slate-300\" /> */}\n          </div>\n        </CardFooter>\n      </Card>\n    </Link>\n  );\n}\n\nexport default ProjectCard;\n","usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/features/project/components/ProjectForm.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/features/project/components/ProjectList.tsx","messages":[{"ruleId":"id-length","severity":1,"message":"Identifier name 'p' is too short (< 2).","line":16,"column":35,"nodeType":"Identifier","messageId":"tooShort","endLine":16,"endColumn":36},{"ruleId":"id-length","severity":1,"message":"Identifier name 'p' is too short (< 2).","line":24,"column":35,"nodeType":"Identifier","messageId":"tooShort","endLine":24,"endColumn":36},{"ruleId":"id-length","severity":1,"message":"Identifier name 'p' is too short (< 2).","line":32,"column":35,"nodeType":"Identifier","messageId":"tooShort","endLine":32,"endColumn":36}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { toast } from 'sonner';\n\nimport { Project, ProjectListItem } from './ProjectListItem'; // Assuming Project type is exported\n\ninterface ProjectListProps {\n  projects: Project[];\n  viewMode: 'grid' | 'list';\n}\n\nexport function ProjectList({ projects, viewMode }: ProjectListProps) {\n\n  const handleDeleteProject = (projectId: string) => {\n    // Placeholder for actual delete logic\n    // e.g., call an IPC method, then refetch or update local state\n    const project = projects.find(p => p.id === projectId);\n    toast.warning(`Exclusão do projeto \"${project?.name}\" (simulado).`, {\n      description: \"Esta funcionalidade ainda não está conectada ao backend.\",\n    });\n    // Example: setProjects(prev => prev.filter(p => p.id !== projectId));\n  };\n\n  const handleEditProject = (projectId: string) => {\n    const project = projects.find(p => p.id === projectId);\n    toast.info(`Edição do projeto \"${project?.name}\" (simulado).`, {\n      description: \"Redirecionamento para formulário de edição (a ser implementado).\",\n    });\n    // Example: router.navigate({ to: `/projects/${projectId}/edit` });\n  };\n\n  const handleToggleProjectStatus = (projectId: string, currentStatus: Project['status']) => {\n    const project = projects.find(p => p.id === projectId);\n    const newStatus = currentStatus === 'active' ? 'pausado' : 'ativo';\n    toast.info(`Status do projeto \"${project?.name}\" alterado para ${newStatus} (simulado).`, {\n       description: \"Esta funcionalidade ainda não está conectada ao backend.\",\n    });\n    // Example: Update project status via API and refetch or update local state\n  };\n\n\n  if (viewMode === 'list') {\n    return (\n      <div className=\"flow-root\">\n        <div className=\"-my-2 sm:-my-4\"> {/* Negative margins to align with parent padding if needed */}\n          <div className=\"divide-y divide-slate-200 dark:divide-slate-700\">\n            {projects.map((project) => (\n              <ProjectListItem\n                key={project.id}\n                project={project}\n                viewMode=\"list\"\n                onDelete={handleDeleteProject}\n                onEdit={handleEditProject}\n                onToggleStatus={handleToggleProjectStatus}\n              />\n            ))}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  // Grid View\n  return (\n    <div className=\"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4\">\n      {projects.map((project) => (\n        <ProjectListItem\n          key={project.id}\n          project={project}\n          viewMode=\"grid\"\n          onDelete={handleDeleteProject}\n          onEdit={handleEditProject}\n          onToggleStatus={handleToggleProjectStatus}\n        />\n      ))}\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/features/project/components/ProjectListItem.tsx","messages":[{"ruleId":"max-lines-per-function","severity":1,"message":"Function 'ProjectListItem' has too many lines (104). Maximum allowed is 100.","line":44,"column":8,"nodeType":"FunctionDeclaration","messageId":"exceed","endLine":153,"endColumn":2},{"ruleId":"id-length","severity":1,"message":"Identifier name 'e' is too short (< 2).","line":47,"column":31,"nodeType":"Identifier","messageId":"tooShort","endLine":47,"endColumn":50},{"ruleId":"id-length","severity":1,"message":"Identifier name 'e' is too short (< 2).","line":57,"column":21,"nodeType":"Identifier","messageId":"tooShort","endLine":57,"endColumn":22},{"ruleId":"id-length","severity":1,"message":"Identifier name 'e' is too short (< 2).","line":63,"column":50,"nodeType":"Identifier","messageId":"tooShort","endLine":63,"endColumn":51}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Link } from '@tanstack/react-router';\nimport { Briefcase, MoreHorizontal, Trash2, Edit3, PlayCircle, PauseCircle } from 'lucide-react'; // Added Play/Pause\nimport React from 'react';\n\nimport { Badge } from '@/presentation/ui/components/ui/badge';\nimport { Button } from '@/presentation/ui/components/ui/button';\nimport { Card, CardContent, CardDescription, CardFooter, CardHeader, CardTitle } from '@/presentation/ui/components/ui/card';\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuSeparator,\n  DropdownMenuTrigger,\n} from '@/presentation/ui/components/ui/dropdown-menu';\nimport { Separator } from '@/presentation/ui/components/ui/separator';\n\nexport interface Project {\n  id: string;\n  name: string;\n  description: string;\n  lastActivity: string;\n  status: 'active' | 'paused' | 'planning' | 'completed' | 'archived';\n  agentCount: number;\n  taskCount: number;\n  // imageUrl?: string; // Optional image for the project card\n}\n\ninterface ProjectListItemProps {\n  project: Project;\n  viewMode: 'grid' | 'list';\n  onDelete?: (projectId: string) => void; // Optional delete handler\n  onEdit?: (projectId: string) => void;   // Optional edit handler\n  onToggleStatus?: (projectId: string, currentStatus: Project['status']) => void; // Optional status toggle\n}\n\nconst statusMap: Record<Project['status'], { label: string; color: string; icon?: React.ElementType }> = {\n  active: { label: 'Ativo', color: 'bg-green-500 dark:bg-green-400' },\n  paused: { label: 'Pausado', color: 'bg-yellow-500 dark:bg-yellow-400' },\n  planning: { label: 'Planejamento', color: 'bg-blue-500 dark:bg-blue-400' },\n  completed: { label: 'Concluído', color: 'bg-slate-500 dark:bg-slate-400' },\n  archived: { label: 'Arquivado', color: 'bg-slate-700 dark:bg-slate-600' },\n};\n\nexport function ProjectListItem({ project, viewMode, onDelete, onEdit, onToggleStatus }: ProjectListItemProps) {\n  const projectStatus = statusMap[project.status] || statusMap.planning;\n\n  const handleToggleStatus = (e: React.MouseEvent) => {\n    e.preventDefault(); // Prevent link navigation if button is inside a Link\n    e.stopPropagation();\n    onToggleStatus?.(project.id, project.status);\n  }\n\n  const projectActions = (\n    <DropdownMenu>\n      <DropdownMenuTrigger asChild>\n        <Button variant=\"ghost\" size=\"icon\" className=\"h-7 w-7 data-[state=open]:bg-slate-100 dark:data-[state=open]:bg-slate-800\"\n          onClick={(e) => { e.preventDefault(); e.stopPropagation(); }} // Prevent card click\n        >\n          <MoreHorizontal className=\"h-4 w-4\" />\n          <span className=\"sr-only\">Mais opções</span>\n        </Button>\n      </DropdownMenuTrigger>\n      <DropdownMenuContent align=\"end\" onClick={(e) => { e.preventDefault(); e.stopPropagation(); }}>\n        {onEdit && <DropdownMenuItem onClick={() => onEdit(project.id)}>\n          <Edit3 className=\"mr-2 h-3.5 w-3.5 text-muted-foreground/70\" />\n          Editar\n        </DropdownMenuItem>}\n        {project.status !== 'completed' && project.status !== 'archived' && onToggleStatus && (\n          <DropdownMenuItem onClick={handleToggleStatus}>\n            {project.status === 'active' ? <PauseCircle className=\"mr-2 h-3.5 w-3.5 text-muted-foreground/70\" /> : <PlayCircle className=\"mr-2 h-3.5 w-3.5 text-muted-foreground/70\" />}\n            {project.status === 'active' ? 'Pausar Projeto' : 'Ativar Projeto'}\n          </DropdownMenuItem>\n        )}\n        <DropdownMenuSeparator />\n        {onDelete && <DropdownMenuItem className=\"text-red-600 dark:text-red-500 focus:text-red-600 dark:focus:text-red-500 focus:bg-red-50 dark:focus:bg-red-900/50\" onClick={() => onDelete(project.id)}>\n          <Trash2 className=\"mr-2 h-3.5 w-3.5\" />\n          Excluir\n        </DropdownMenuItem>}\n      </DropdownMenuContent>\n    </DropdownMenu>\n  );\n\n\n  if (viewMode === 'list') {\n    return (\n      <Link to=\"/projects/$projectId\" params={{ projectId: project.id }} className=\"block hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors rounded-lg\">\n        <div className=\"flex items-center justify-between p-3 sm:p-4 border-b border-slate-200 dark:border-slate-700\">\n          <div className=\"flex items-center space-x-3 sm:space-x-4 flex-1 min-w-0\">\n            <div className={`p-2 rounded-md hidden sm:block ${projectStatus.color} opacity-20`}>\n               <Briefcase className={`h-5 w-5 ${projectStatus.color.replace('bg-', 'text-')}`} />\n            </div>\n            <div className=\"flex-1 min-w-0\">\n              <p className=\"text-sm font-semibold text-slate-800 dark:text-slate-100 truncate\" title={project.name}>\n                {project.name}\n              </p>\n              <p className=\"text-xs text-slate-500 dark:text-slate-400 truncate\" title={project.description}>\n                {project.description || \"Sem descrição\"}\n              </p>\n            </div>\n          </div>\n          <div className=\"hidden md:flex items-center space-x-4 text-xs text-slate-500 dark:text-slate-400 mx-4\">\n            <div>Agentes: {project.agentCount}</div>\n            <div>Tarefas: {project.taskCount}</div>\n          </div>\n          <div className=\"flex items-center space-x-2 flex-shrink-0\">\n             <Badge style={{ backgroundColor: projectStatus.color }} className=\"text-xs text-white dark:text-black font-medium\">\n                {projectStatus.label}\n             </Badge>\n            {projectActions}\n          </div>\n        </div>\n      </Link>\n    );\n  }\n\n  // Grid View (Card)\n  return (\n    <Card className=\"flex flex-col h-full hover:shadow-lg transition-shadow duration-200\">\n      <Link to=\"/projects/$projectId\" params={{ projectId: project.id }} className=\"flex flex-col flex-grow\">\n        <CardHeader className=\"pb-4\">\n          <div className=\"flex items-start justify-between\">\n            <div className={`p-2 rounded-md ${projectStatus.color} opacity-20`}>\n               <Briefcase className={`h-6 w-6 ${projectStatus.color.replace('bg-', 'text-')}`} />\n            </div>\n            {/* Placeholder for project image/icon if available */}\n            {/* {project.imageUrl ? <img src={project.imageUrl} alt={project.name} className=\"w-12 h-12 rounded-lg object-cover\"/> : <Briefcase className=\"w-10 h-10 text-slate-400\" />} */}\n            <Badge style={{ backgroundColor: projectStatus.color }} className=\"text-xs text-white dark:text-black font-medium\">\n              {projectStatus.label}\n            </Badge>\n          </div>\n          <CardTitle className=\"mt-3 text-lg truncate\" title={project.name}>{project.name}</CardTitle>\n          <CardDescription className=\"text-xs h-8 line-clamp-2\" title={project.description}>\n            {project.description || \"Sem descrição\"}\n          </CardDescription>\n        </CardHeader>\n        <CardContent className=\"flex-grow pb-3\">\n          {/* Could add more info here like key members, tech stack icons, etc. */}\n           <div className=\"text-xs text-slate-500 dark:text-slate-400 space-y-1\">\n            <p>Agentes: <span className=\"font-medium text-slate-700 dark:text-slate-300\">{project.agentCount}</span></p>\n            <p>Tarefas Ativas: <span className=\"font-medium text-slate-700 dark:text-slate-300\">{project.taskCount}</span></p>\n          </div>\n        </CardContent>\n      </Link>\n      <Separator className=\"my-0\" />\n      <CardFooter className=\"p-3 flex items-center justify-between\">\n        <p className=\"text-xs text-slate-500 dark:text-slate-400\">\n          Última atividade: {project.lastActivity}\n        </p>\n        {projectActions}\n      </CardFooter>\n    </Card>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/features/project/components/ProjectSidebar.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useParams' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":25},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Folder' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":90,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":96},{"ruleId":"@typescript-eslint/naming-convention","severity":1,"message":"Parameter name `Icon` must match one of the following formats: camelCase","line":19,"column":57,"nodeType":"Identifier","messageId":"doesNotMatchFormat","endLine":19,"endColumn":61},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'exact' is assigned a value but never used. Allowed unused args must match /^_/u.","line":19,"column":63,"nodeType":null,"messageId":"unusedVar","endLine":19,"endColumn":68},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":23,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":23,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1060,1063],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1060,1063],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Link, useParams } from '@tanstack/react-router';\nimport { ChevronRight, LayoutDashboard, CheckSquare, MessageSquare, FileText, Settings2, Folder, Hash, Plus } from 'lucide-react';\nimport React from 'react';\n\nimport { Button } from '@/presentation/ui/components/ui/button';\nimport { Collapsible, CollapsibleContent, CollapsibleTrigger } from '@/presentation/ui/components/ui/collapsible';\nimport { ScrollArea } from '@/presentation/ui/components/ui/scroll-area';\nimport { Separator } from '@/presentation/ui/components/ui/separator';\n\n// Helper for NavLink, similar to AppSidebar but might have different base paths or active states\ninterface ProjectNavLinkProps {\n  to: string;\n  basePath: string; // e.g., /projects/$projectId\n  children: React.ReactNode;\n  icon?: React.ElementType;\n  exact?: boolean; // For matching exact paths\n}\n\nfunction ProjectNavLink({ to, basePath, children, icon: Icon, exact = false }: ProjectNavLinkProps) {\n  const fullPath = `${basePath}${to.startsWith('/') ? to : `/${to}`}`;\n  return (\n    <Link\n      to={fullPath as any} // Cast to any if `to` for Link has stricter types not matching dynamic string\n      className=\"flex items-center space-x-2 px-3 py-2 text-sm font-medium text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-md\"\n      activeProps={{ className: 'bg-slate-200 dark:bg-slate-700 text-slate-900 dark:text-slate-50' }}\n      // exact={exact} // `exact` prop might not be available or needed depending on router version / setup for activeProps\n    >\n      {Icon && <Icon className=\"h-4 w-4\" />}\n      <span>{children}</span>\n    </Link>\n  );\n}\n\n\ninterface ProjectSidebarProps {\n  className?: string;\n  // projectId would likely be a prop, or read from router params if this component is route-aware\n}\n\nexport function ProjectSidebar({ className }: ProjectSidebarProps) {\n  // In a real scenario, projectId would come from router params or props.\n  // const params = useParams(); // if used in a route component\n  // const projectId = params.projectId;\n  const projectId = \"{projectId}\"; // Placeholder\n\n  // Placeholder data\n  const project = {\n    name: 'Projeto Alpha',\n    // id: projectId,\n  };\n\n  const channels = [\n    { id: 'general', name: 'general', type: 'text' },\n    { id: 'random', name: 'random', type: 'text' },\n    { id: 'dev-logs', name: 'dev-logs', type: 'text' },\n  ];\n\n  return (\n    // This component itself is the content of a ResizablePanel.\n    // The ResizablePanel, ResizablePanelGroup, and ResizableHandle would be used in a parent layout.\n    <div className={`flex flex-col h-full bg-slate-100 dark:bg-slate-900 ${className || ''}`}>\n      {/* Project Header */}\n      <div className=\"p-4 border-b border-slate-200 dark:border-slate-700\">\n        <h2 className=\"text-lg font-semibold text-slate-800 dark:text-slate-100 truncate\">{project.name}</h2>\n        {/* Could add a dropdown here for project actions */}\n      </div>\n\n      <ScrollArea className=\"flex-grow\">\n        <nav className=\"py-3 px-2\">\n          {/* Project Navigation */}\n          <div className=\"space-y-1 mb-4\">\n            <ProjectNavLink basePath={`/projects/${projectId}`} to=\"/overview\" icon={LayoutDashboard}>Overview</ProjectNavLink>\n            <ProjectNavLink basePath={`/projects/${projectId}`} to=\"/tasks\" icon={CheckSquare}>Tasks</ProjectNavLink>\n            <ProjectNavLink basePath={`/projects/${projectId}`} to=\"/discussions\" icon={MessageSquare}>Discussions</ProjectNavLink>\n            <ProjectNavLink basePath={`/projects/${projectId}`} to=\"/files\" icon={FileText}>Files</ProjectNavLink>\n            <ProjectNavLink basePath={`/projects/${projectId}`} to=\"/settings\" icon={Settings2}>Settings</ProjectNavLink>\n          </div>\n\n          <Separator className=\"my-3\" />\n\n          {/* Channels/Sections List */}\n          <div>\n            <Collapsible defaultOpen>\n              <CollapsibleTrigger asChild>\n                <Button variant=\"ghost\" className=\"w-full justify-start px-3 py-2 text-sm font-medium\">\n                  <ChevronRight className=\"h-4 w-4 mr-2 transform transition-transform duration-200 group-[data-state=open]:rotate-90\" />\n                  Channels\n                  <Plus className=\"ml-auto h-4 w-4 text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-200\" />\n                </Button>\n              </CollapsibleTrigger>\n              <CollapsibleContent className=\"pt-1 space-y-0.5 ml-3 border-l border-slate-200 dark:border-slate-700 pl-3\">\n                {channels.map(channel => (\n                  <Link\n                    key={channel.id}\n                    to={`/projects/${projectId}/channels/${channel.id}`}\n                    className=\"flex items-center space-x-2 px-2 py-1.5 text-sm text-slate-600 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-800 rounded-md\"\n                    activeProps={{ className: 'bg-slate-200 dark:bg-slate-700 text-slate-900 dark:text-slate-50 font-medium' }}\n                  >\n                    <Hash className=\"h-3.5 w-3.5\" />\n                    <span className=\"truncate\">{channel.name}</span>\n                  </Link>\n                ))}\n                {channels.length === 0 && (\n                  <p className=\"px-2 py-1.5 text-xs text-slate-500 dark:text-slate-400\">No channels.</p>\n                )}\n              </CollapsibleContent>\n            </Collapsible>\n          </div>\n          {/* Add more collapsible sections if needed, e.g., DMs, Apps */}\n        </nav>\n      </ScrollArea>\n\n      {/* Optional Footer for sidebar actions */}\n      {/* <div className=\"p-2 mt-auto border-t border-slate-200 dark:border-slate-700\">\n        <Button variant=\"ghost\" size=\"sm\" className=\"w-full justify-start\">Some Action</Button>\n      </div> */}\n    </div>\n  );\n}\n\nexport default ProjectSidebar;\n","usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/features/project/components/layout/ProjectContextSidebar.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useParams' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":25},{"ruleId":"@typescript-eslint/naming-convention","severity":1,"message":"Parameter name `IconElement` must match one of the following formats: camelCase","line":37,"column":48,"nodeType":"Identifier","messageId":"doesNotMatchFormat","endLine":37,"endColumn":59}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Link, useParams } from '@tanstack/react-router'; // Removed useRouter as it's not used here\nimport { BarChart2, MessageSquareText, BookText, Settings2, Users, ChevronDown, Hash, PlusCircle } from 'lucide-react';\nimport React from 'react';\n// Added Hash and PlusCircle to imports, removed GripVertical as it's not used\n\nimport { Avatar, AvatarFallback } from '@/presentation/ui/components/ui/avatar'; // Removed AvatarImage\nimport { Button } from '@/presentation/ui/components/ui/button';\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuTrigger,\n} from \"@/presentation/ui/components/ui/dropdown-menu\";\nimport { ScrollArea } from '@/presentation/ui/components/ui/scroll-area';\nimport { Separator } from '@/presentation/ui/components/ui/separator';\nimport { cn } from '@/presentation/ui/lib/utils';\n\n\n// Re-using Project type, assuming it's available or defined similarly elsewhere\ninterface Project {\n  id: string;\n  name: string;\n  description?: string;\n  // Add other relevant fields if needed for the sidebar header, e.g., project icon/color\n}\n\ninterface ProjectSectionLinkProps {\n  to: string;\n  label: string;\n  icon: React.ElementType; // Renamed prop from 'icon' to 'IconElement' in implementation\n  projectId: string;\n  // isActive prop removed as Link component handles active state\n}\n\nfunction ProjectSectionLink({ to, label, icon: IconElement, projectId }: ProjectSectionLinkProps) { // Renamed icon to IconElement\n  return (\n    <Link\n      to={to}\n      params={{ projectId }}\n      resetScroll={false}\n      className={cn(\n        \"flex items-center space-x-2.5 px-3 py-2 text-sm rounded-md transition-colors\",\n        \"text-slate-600 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-700/60\" // Base classes\n      )}\n      activeProps={{\n        // Classes to apply when the link is active\n        className: \"!bg-sky-100 dark:!bg-sky-700/60 !text-sky-700 dark:!text-sky-200 font-medium\"\n      }}\n    >\n      <IconElement className=\"h-4 w-4 flex-shrink-0\" /> {/* Ensure icon is flex-shrink-0 if space is tight */}\n      <span className=\"truncate\">{label}</span>\n    </Link>\n  );\n}\n\n\ninterface ProjectContextSidebarProps {\n  project: Project | null;\n  className?: string;\n  // currentPath prop removed as it's not used for active state determination anymore\n}\n\nexport function ProjectContextSidebar({ project, className }: ProjectContextSidebarProps) {\n  // const params = useParams({ from: '/(app)/projects/$projectId' }); // Not strictly needed if projectId comes from props\n\n  if (!project) {\n    return ( // Skeleton loader\n      <aside className={cn(\"w-60 flex-shrink-0 bg-slate-100 dark:bg-slate-800/70 p-4 border-r border-slate-200 dark:border-slate-700\", className)}>\n        <div className=\"h-10 bg-slate-200 dark:bg-slate-700 rounded animate-pulse mb-4\"></div>\n        {[...Array(5)].map((_item, index) => ( // Renamed _ to _item, i to index\n          <div key={index} className=\"h-8 bg-slate-200 dark:bg-slate-700 rounded animate-pulse mb-2\"></div>\n        ))}\n      </aside>\n    );\n  }\n\n  // For TanStack Router links from within a layout for a parameterized route (e.g., /projects/$projectId),\n  // relative links like './settings' are often preferred for child routes.\n  // Absolute paths need to include the dynamic params correctly.\n  const sections = [\n    { value: 'overview', label: 'Visão Geral', icon: BarChart2, to: `/projects/${project.id}/` }, // Trailing slash for index\n    { value: 'chat', label: 'Chat/Canais', icon: MessageSquareText, to: `/projects/${project.id}/chat` },\n    { value: 'docs', label: 'Documentação', icon: BookText, to: `/projects/${project.id}/docs` },\n    { value: 'members', label: 'Membros & Agentes', icon: Users, to: `/projects/${project.id}/members` },\n    { value: 'settings', label: 'Configurações', icon: Settings2, to: `/projects/${project.id}/settings` },\n  ];\n\n  // Placeholder for mock channels\n  const mockChannels = [\n    { id: 'ch_geral', name: 'geral', to: `/projects/${project.id}/chat/geral`}, // Example channel route\n    { id: 'ch_dev', name: 'desenvolvimento', to: `/projects/${project.id}/chat/dev`},\n    { id: 'ch_bugs', name: 'bugs', to: `/projects/${project.id}/chat/bugs`},\n  ];\n\n  return (\n    <aside className={cn(\"w-60 flex-shrink-0 bg-slate-100 dark:bg-slate-800/70 flex flex-col border-r border-slate-200 dark:border-slate-700 h-full\", className)}>\n      {/* Project Header */}\n      <div className=\"p-3 border-b border-slate-200 dark:border-slate-700\">\n        <DropdownMenu>\n          <DropdownMenuTrigger asChild>\n            <Button variant=\"ghost\" className=\"w-full justify-between items-center h-auto px-2 py-1.5\">\n              <div className=\"flex items-center space-x-2 min-w-0\">\n                <Avatar className=\"h-7 w-7 text-xs\">\n                  {/* Placeholder for project image or color-coded avatar */}\n                  <AvatarFallback className=\"bg-sky-500 text-white\">\n                    {project.name.substring(0,1).toUpperCase()}\n                  </AvatarFallback>\n                </Avatar>\n                <span className=\"text-sm font-semibold truncate text-slate-800 dark:text-slate-100\" title={project.name}>\n                  {project.name}\n                </span>\n              </div>\n              <ChevronDown className=\"h-4 w-4 text-slate-500 dark:text-slate-400\" />\n            </Button>\n          </DropdownMenuTrigger>\n          <DropdownMenuContent className=\"w-52 ml-2\" align=\"start\">\n            <DropdownMenuLabel>Ações do Projeto</DropdownMenuLabel>\n            <DropdownMenuSeparator />\n            <DropdownMenuItem>Convidar Membros (N/I)</DropdownMenuItem>\n            <DropdownMenuItem asChild>\n              {/* Link to project settings using its relative path from $projectId */}\n              <Link to={`/projects/${project.id}/settings`} params={{projectId: project.id}}>Configurações do Projeto</Link>\n            </DropdownMenuItem>\n            <DropdownMenuSeparator />\n            <DropdownMenuItem className=\"text-red-500 focus:text-red-500 dark:focus:text-red-500\">Arquivar Projeto (N/I)</DropdownMenuItem>\n          </DropdownMenuContent>\n        </DropdownMenu>\n      </div>\n\n      <ScrollArea className=\"flex-1\">\n        <nav className=\"p-2 space-y-1\">\n          {sections.map(section => (\n            <ProjectSectionLink\n              key={section.value}\n              to={section.to}\n              label={section.label}\n              icon={section.icon}\n              projectId={project.id}\n            />\n          ))}\n        </nav>\n\n        {/* Placeholder for other contextual lists like \"Channels\" or \"Active Agents in Project\" */}\n        <div className=\"p-3 mt-2\">\n            <Separator className=\"my-2\"/>\n            <h4 className=\"text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider px-1 mb-1.5 flex justify-between items-center\">\n                <span>Canais</span>\n                <Button variant=\"ghost\" size=\"icon\" className=\"h-5 w-5\" onClick={() => alert(\"Novo canal (N/I)\")}>\n                    <PlusCircle className=\"h-3.5 w-3.5\"/>\n                </Button>\n            </h4>\n            <div className=\"space-y-0.5\">\n                {mockChannels.map(channel => (\n                     <ProjectSectionLink\n                        key={channel.id}\n                        to={channel.to} // Use the defined channel route\n                        label={`# ${channel.name}`}\n                        icon={Hash}\n                        projectId={project.id}\n                    />\n                ))}\n            </div>\n        </div>\n      </ScrollArea>\n\n      {/* Optional Footer for the project sidebar - Removed GripVertical as it's not imported and purpose unclear here */}\n      {/*\n      <div className=\"p-2 border-t border-slate-200 dark:border-slate-700\">\n        <Button variant=\"ghost\" size=\"sm\" className=\"w-full justify-start text-xs\">\n            Menu do Projeto\n        </Button>\n      </div>\n      */}\n    </aside>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/features/project/components/layout/ProjectParticipantsSidebar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/features/user/components/UserProfileForm.tsx","messages":[{"ruleId":"max-lines-per-function","severity":1,"message":"Function 'UserProfileForm' has too many lines (101). Maximum allowed is 100.","line":28,"column":8,"nodeType":"FunctionDeclaration","messageId":"exceed","endLine":142,"endColumn":2},{"ruleId":"id-length","severity":1,"message":"Identifier name 'e' is too short (< 2).","line":120,"column":44,"nodeType":"Identifier","messageId":"tooShort","endLine":120,"endColumn":45}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"output":"import { zodResolver } from '@hookform/resolvers/zod';\nimport { UploadCloud, UserCircle } from 'lucide-react';\nimport React, { useState } from 'react';\nimport { useForm } from 'react-hook-form';\nimport { toast } from 'sonner';\nimport { z } from 'zod';\n\nimport { Avatar, AvatarFallback, AvatarImage } from '@/presentation/ui/components/ui/avatar';\nimport { Button } from '@/presentation/ui/components/ui/button';\nimport { Form, FormControl, FormDescription, FormField, FormItem, FormLabel, FormMessage } from '@/presentation/ui/components/ui/form';\nimport { Input } from '@/presentation/ui/components/ui/input';\n\nimport { UserProfile, UserProfileFormData } from '@/shared/ipc-types'; // Import from shared types\n\ninterface UserProfileFormProps {\n  initialData: UserProfile | null;\n  onSubmit: (data: UserProfileFormData) => Promise<void>;\n  isSubmitting?: boolean;\n}\n\nconst profileFormSchema = z.object({\n  displayName: z.string().min(2, 'O nome deve ter pelo menos 2 caracteres.').max(50, 'O nome não pode exceder 50 caracteres.'),\n  // email: z.string().email('Email inválido.').optional(), // Email usually not editable by user\n  avatarUrl: z.string().url('URL do avatar inválida.').optional().or(z.literal('')), // For URL input, or handle File for upload\n});\n\n\nexport function UserProfileForm({ initialData, onSubmit, isSubmitting }: UserProfileFormProps) {\n  const [currentAvatarPreview, setCurrentAvatarPreview] = useState<string | null>(initialData?.avatarUrl || null);\n\n  const form = useForm<UserProfileFormData>({\n    resolver: zodResolver(profileFormSchema),\n    defaultValues: {\n      displayName: initialData?.displayName || '',\n      avatarUrl: initialData?.avatarUrl || '',\n    },\n  });\n\n  React.useEffect(() => {\n    if (initialData) {\n      form.reset({\n        displayName: initialData.displayName,\n        avatarUrl: initialData.avatarUrl || '',\n      });\n      setCurrentAvatarPreview(initialData.avatarUrl || null);\n    }\n  }, [initialData, form]);\n\n\n  const handleFormSubmit = async (data: UserProfileFormData) => {\n    // If handling file upload, a different logic would be needed here.\n    // For now, assuming avatarUrl is a string URL input.\n    await onSubmit(data);\n  };\n\n  const handleAvatarUrlChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const url = event.target.value;\n    form.setValue('avatarUrl', url, {shouldDirty: true, shouldValidate: true});\n    if (profileFormSchema.shape.avatarUrl.safeParse(url).success) {\n        setCurrentAvatarPreview(url);\n    } else {\n        setCurrentAvatarPreview(initialData?.avatarUrl || null); // Revert if URL is invalid immediately\n    }\n  };\n\n\n  return (\n    <div className=\"space-y-6\">\n        <div className=\"flex flex-col items-center space-y-3\">\n            <Avatar className=\"h-24 w-24 ring-2 ring-offset-2 dark:ring-offset-slate-900 ring-sky-500\">\n              <AvatarImage src={currentAvatarPreview || undefined} alt={form.watch('displayName')} />\n              <AvatarFallback className=\"text-3xl\">\n                {form.watch('displayName')?.substring(0, 1).toUpperCase() || <UserCircle size={40}/>}\n              </AvatarFallback>\n            </Avatar>\n            {/* This button is a placeholder for a more complex file upload UI */}\n            <Button variant=\"outline\" size=\"sm\" className=\"relative\" onClick={() => toast.info(\"Upload de avatar via seleção de arquivo não implementado. Insira uma URL.\")}>\n               <UploadCloud className=\"mr-2 h-4 w-4\" />\n              Alterar Avatar (URL)\n            </Button>\n        </div>\n\n        <Form {...form}>\n        <form onSubmit={form.handleSubmit(handleFormSubmit)} className=\"space-y-4\">\n            <FormField\n            control={form.control}\n            name=\"displayName\"\n            render={({ field }) => (\n                <FormItem>\n                <FormLabel>Nome de Exibição</FormLabel>\n                <FormControl>\n                    <Input placeholder=\"Seu nome\" {...field} />\n                </FormControl>\n                <FormDescription>Como seu nome aparecerá na aplicação.</FormDescription>\n                <FormMessage />\n                </FormItem>\n            )}\n            />\n\n            {initialData?.email && ( // Only show email if it exists, and make it read-only\n                 <FormItem>\n                    <FormLabel>Email</FormLabel>\n                    <FormControl>\n                    <Input type=\"email\" value={initialData.email} disabled readOnly />\n                    </FormControl>\n                    <FormDescription>Seu endereço de email (não pode ser alterado).</FormDescription>\n                </FormItem>\n            )}\n\n            <FormField\n                control={form.control}\n                name=\"avatarUrl\"\n                render={({ field }) => (\n                    <FormItem>\n                        <FormLabel>URL do Avatar (Opcional)</FormLabel>\n                        <FormControl>\n                            <Input\n                                placeholder=\"https://example.com/avatar.png\"\n                                {...field}\n                                onChange={(e) => {\n                                    field.onChange(e); // RHF internal update\n                                    handleAvatarUrlChange(e); // Custom handler for preview\n                                }}\n                            />\n                        </FormControl>\n                        <FormDescription>Insira a URL para sua imagem de avatar.</FormDescription>\n                        <FormMessage />\n                    </FormItem>\n                )}\n            />\n\n\n            <div className=\"flex justify-end pt-2\">\n            <Button type=\"submit\" disabled={isSubmitting || !form.formState.isDirty}>\n                {isSubmitting ? 'Salvando...' : 'Salvar Alterações'}\n            </Button>\n            </div>\n        </form>\n        </Form>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/features/user/components/UserSidebar.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'User' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":14},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Separator' is defined but never used. Allowed unused vars must match /^_/u.","line":8,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":8,"endColumn":19},{"ruleId":"@typescript-eslint/naming-convention","severity":1,"message":"Parameter name `Icon` must match one of the following formats: camelCase","line":19,"column":44,"nodeType":"Identifier","messageId":"doesNotMatchFormat","endLine":19,"endColumn":48},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":26,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":26,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[973,976],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[973,976],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"id-length","severity":1,"message":"Identifier name 'n' is too short (< 2).","line":46,"column":42,"nodeType":"Identifier","messageId":"tooShort","endLine":46,"endColumn":43},{"ruleId":"id-length","severity":1,"message":"Identifier name 'n' is too short (< 2).","line":125,"column":62,"nodeType":"Identifier","messageId":"tooShort","endLine":125,"endColumn":63}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Link } from '@tanstack/react-router';\nimport { User, MessageSquare, Settings, Plus, Users, Search } from 'lucide-react'; // Added Users, Search, Plus\nimport React from 'react';\n\nimport { Avatar, AvatarFallback, AvatarImage } from '@/presentation/ui/components/ui/avatar';\nimport { Button } from '@/presentation/ui/components/ui/button';\nimport { ScrollArea } from '@/presentation/ui/components/ui/scroll-area';\nimport { Separator } from '@/presentation/ui/components/ui/separator';\n\n\n// Helper for NavLink\ninterface UserNavLinkProps {\n  to: string;\n  children: React.ReactNode;\n  icon?: React.ElementType;\n  // Add other props like exact if needed for active state matching\n}\n\nfunction UserNavLink({ to, children, icon: Icon }: UserNavLinkProps) {\n  // Assuming user-specific routes might be prefixed, e.g., /user/profile\n  // For now, direct paths as passed.\n  const fullPath = to.startsWith('/') ? to : `/user/${to}`;\n\n  return (\n    <Link\n      to={fullPath as any}\n      className=\"flex items-center space-x-3 px-3 py-2 text-sm font-medium text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-md\"\n      activeProps={{ className: 'bg-slate-200 dark:bg-slate-700 text-slate-900 dark:text-slate-50 font-semibold' }}\n    >\n      {Icon && <Icon className=\"h-4 w-4\" />}\n      <span>{children}</span>\n    </Link>\n  );\n}\n\ninterface DirectMessageItemProps {\n  id: string;\n  name: string;\n  avatarUrl?: string;\n  status?: 'online' | 'offline' | 'idle'; // Example status\n  isActive?: boolean; // Example if this DM is currently active\n}\n\nfunction DirectMessageItem({ id, name, avatarUrl, status = 'offline', isActive }: DirectMessageItemProps) {\n    const basePath = '/user/dms'; // Placeholder base path for DMs\n    const initials = name.split(' ').map(n => n[0]).join('').substring(0,2).toUpperCase();\n    return (\n        <Link\n            to={`${basePath}/${id}`}\n            className={`flex items-center space-x-3 px-3 py-1.5 text-sm group rounded-md\n                        ${isActive\n                            ? 'bg-slate-200 dark:bg-slate-700 text-slate-900 dark:text-slate-50 font-medium'\n                            : 'text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-200 hover:bg-slate-100 dark:hover:bg-slate-800'}`}\n            activeProps={{ className: 'bg-slate-200 dark:bg-slate-700 text-slate-900 dark:text-slate-50 font-medium' }}\n        >\n            <Avatar className=\"h-6 w-6 text-xs\">\n                <AvatarImage src={avatarUrl} alt={name} />\n                <AvatarFallback className={`${status === 'online' ? 'border-2 border-green-500' : ''}`}>\n                    {initials}\n                </AvatarFallback>\n            </Avatar>\n            <span className=\"truncate flex-1\">{name}</span>\n            {/* Optional: Unread count or close button on hover */}\n            {/* <Button variant=\"ghost\" size=\"icon\" className=\"h-5 w-5 opacity-0 group-hover:opacity-100\">X</Button> */}\n        </Link>\n    );\n}\n\n\ninterface UserSidebarProps {\n  className?: string;\n}\n\nexport function UserSidebar({ className }: UserSidebarProps) {\n  // Placeholder data\n  const currentUser = {\n    name: 'Jules Agent',\n    avatarUrl: 'https://github.com/shadcn.png', // Example avatar\n    status: 'online',\n  };\n\n  const directMessages: DirectMessageItemProps[] = [\n    { id: '1', name: 'Alice Wonderland', avatarUrl: 'https://randomuser.me/api/portraits/women/44.jpg', status: 'online', isActive: true },\n    { id: '2', name: 'Bob The Builder', avatarUrl: 'https://randomuser.me/api/portraits/men/44.jpg', status: 'offline' },\n    { id: '3', name: 'Charlie Chaplin', avatarUrl: 'https://randomuser.me/api/portraits/men/46.jpg', status: 'idle' },\n  ];\n\n  return (\n    <div className={`flex flex-col h-full bg-slate-100 dark:bg-slate-800 text-slate-800 dark:text-slate-200 w-60 ${className || ''}`}>\n      {/* Top section (e.g., Search DMs or \"Find or start a conversation\") */}\n      <div className=\"p-3 border-b border-slate-200 dark:border-slate-700\">\n        <Button variant=\"secondary\" className=\"w-full justify-start text-sm text-slate-500 dark:text-slate-400\">\n            <Search className=\"h-4 w-4 mr-2\"/> Find or start a conversation\n        </Button>\n      </div>\n\n      <ScrollArea className=\"flex-grow px-2 py-2\">\n        <nav className=\"space-y-0.5\">\n          <UserNavLink to=\"/friends\" icon={Users}>Friends</UserNavLink>\n          {/* <UserNavLink to=\"/nitro\" icon={Zap}>Nitro</UserNavLink> Placeholder */}\n          <UserNavLink to=\"/shop\" icon={MessageSquare}>Shop</UserNavLink> {/* Using MessageSquare as placeholder */}\n        </nav>\n\n        <div className=\"mt-3 px-1\">\n            <div className=\"flex justify-between items-center mb-1\">\n                <h3 className=\"text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider px-2\">\n                    Direct Messages\n                </h3>\n                <Button variant=\"ghost\" size=\"icon\" className=\"h-6 w-6\">\n                    <Plus className=\"h-4 w-4 text-slate-500 dark:text-slate-400\" />\n                    <span className=\"sr-only\">Create DM</span>\n                </Button>\n            </div>\n            <div className=\"space-y-0.5\">\n                {directMessages.map(dm => <DirectMessageItem key={dm.id} {...dm} />)}\n            </div>\n        </div>\n      </ScrollArea>\n\n      {/* User Panel Footer */}\n      <div className=\"p-2 mt-auto border-t border-slate-200 dark:border-slate-700\">\n        <div className=\"flex items-center space-x-2\">\n          <Avatar className=\"h-8 w-8\">\n            <AvatarImage src={currentUser.avatarUrl} alt={currentUser.name} />\n            <AvatarFallback>{currentUser.name.split(' ').map(n => n[0]).join('').substring(0,2).toUpperCase()}</AvatarFallback>\n          </Avatar>\n          <div className=\"flex-1 truncate\">\n            <p className=\"text-sm font-medium truncate\">{currentUser.name}</p>\n            <p className=\"text-xs text-slate-500 dark:text-slate-400 truncate\">{currentUser.status}</p>\n          </div>\n          <Button variant=\"ghost\" size=\"icon\" className=\"h-7 w-7\">\n            <Settings className=\"h-4 w-4\" />\n            <span className=\"sr-only\">User Settings</span>\n          </Button>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default UserSidebar;\n","usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/features/user/components/layout/UserSidebar.tsx","messages":[{"ruleId":"max-lines-per-function","severity":1,"message":"Function 'UserSidebar' has too many lines (171). Maximum allowed is 100.","line":38,"column":8,"nodeType":"FunctionDeclaration","messageId":"exceed","endLine":229,"endColumn":2}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Link, useRouter } from '@tanstack/react-router';\nimport { Settings, UserCircle, MessageSquarePlus, Search, Palette, Bot as BotIcon, Loader2, AlertTriangle } from 'lucide-react'; // Added Loader2, AlertTriangle\nimport React, { useState, useMemo } from 'react'; // Added useMemo\nimport { toast } from 'sonner';\n\nimport { Avatar, AvatarFallback, AvatarImage } from '@/presentation/ui/components/ui/avatar';\nimport { Button } from '@/presentation/ui/components/ui/button';\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuTrigger,\n} from '@/presentation/ui/components/ui/dropdown-menu';\nimport { Input } from '@/presentation/ui/components/ui/input';\nimport { ScrollArea } from '@/presentation/ui/components/ui/scroll-area';\nimport { useIpcSubscription } from '@/presentation/ui/hooks/ipc/useIpcSubscription';\nimport { cn } from '@/presentation/ui/lib/utils';\n\nimport { IPC_CHANNELS } from '@/shared/ipc-channels';\nimport type { DirectMessageItem, GetDMConversationsListResponseData, DMConversationsUpdatedEventPayload } from '@/shared/ipc-types'; // Using types from shared\n\n\n// const mockDirectMessages: DirectMessageItem[] = [\n//   { id: 'userAlice', name: 'Alice (Designer)', avatarUrl: '/avatars/01.png', lastMessage: \"Hey! Viu o novo design?\", timestamp: \"10:30\", type: 'user', unreadCount: 2 },\n//   { id: 'agent001', name: 'CoderBot-Alpha', avatarUrl: '/avatars/agent-coder.png', lastMessage: \"Script finalizado.\", timestamp: \"09:15\", type: 'agent' },\n//   { id: 'userBob', name: 'Bob (Backend Dev)', avatarUrl: '/avatars/02.png', lastMessage: \"Preciso de ajuda com a API.\", timestamp: \"Ontem\", type: 'user' },\n//   { id: 'agent002', name: 'TestMaster-7000', avatarUrl: '/avatars/agent-qa.png', lastMessage: \"Testes concluídos.\", timestamp: \"Segunda\", type: 'agent', unreadCount: 0 },\n// ];\n\nconst currentUserMock = { // This can remain as it's UI specific for current user display\n  name: 'J. Doe',\n  email: 'j.doe@example.com',\n  avatarUrl: '/avatars/user-main.png',\n};\n\nexport function UserSidebar() {\n  const router = useRouter();\n  const [searchTerm, setSearchTerm] = useState('');\n\n  const { data: dmConversations, isLoading, error } = useIpcSubscription<\n    null, // No args for initial fetch\n    GetDMConversationsListResponseData, // Type for initial data\n    DMConversationsUpdatedEventPayload // Type for event payload\n  >(\n    IPC_CHANNELS.GET_DM_CONVERSATIONS_LIST,\n    null, // Args for initial fetch\n    IPC_CHANNELS.DM_CONVERSATION_UPDATED_EVENT,\n    {\n      // getSnapshot: (currentData, eventPayload) => eventPayload, // Replace current data with payload\n      // For more granular updates, one might merge or update specific items.\n      // For now, assuming eventPayload is the new full list as per shared/ipc-types.ts comment.\n      // If eventPayload is a single item, the getSnapshot logic would need to change.\n      // Let's assume payload is the full list:\n      getSnapshot: (_prevData, eventPayload) => eventPayload,\n      onError: (err) => {\n        toast.error(`Erro ao carregar DMs: ${err.message}`);\n      }\n    }\n  );\n  \n  const [selectedDmId, setSelectedDmId] = useState<string | null>(() => {\n    const currentPath = typeof window !== 'undefined' ? window.location.pathname : '';\n    const dmPathMatch = currentPath.match(/\\/user\\/dm\\/([^/]+)/);\n    // Set selectedDmId based on current route, fallback to first DM if available after loading\n    return dmPathMatch ? dmPathMatch[1] : null;\n  });\n\n  // Update selectedDmId if the current selection is no longer in the list or if nothing is selected and list is available\n  React.useEffect(() => {\n    if (dmConversations && dmConversations.length > 0) {\n      const currentSelectionExists = dmConversations.some(dm => dm.id === selectedDmId);\n      if (!currentSelectionExists && !selectedDmId) { // if nothing selected and list is there\n        setSelectedDmId(dmConversations[0].id);\n      } else if (!currentSelectionExists && selectedDmId) { // if current selection disappeared\n         setSelectedDmId(dmConversations[0].id); // select first one\n      }\n    } else if (dmConversations && dmConversations.length === 0) {\n        setSelectedDmId(null); // No DMs, nothing to select\n    }\n  }, [dmConversations, selectedDmId]);\n\n\n  const filteredDMs = useMemo(() => {\n    if (!dmConversations) return [];\n    return dmConversations.filter(dm =>\n      dm.name.toLowerCase().includes(searchTerm.toLowerCase())\n    );\n  }, [dmConversations, searchTerm]);\n\n  const handleNewDm = () => {\n    // This would ideally open a modal to select a user/agent or navigate to a \"new DM\" page\n    toast.info(\"Funcionalidade 'Nova Mensagem Direta' ainda não implementada.\");\n  };\n  \n  const renderDmList = () => {\n    if (isLoading) {\n      return (\n        <div className=\"flex flex-col items-center justify-center p-4 text-xs text-slate-500 dark:text-slate-400 h-full\">\n          <Loader2 className=\"h-6 w-6 animate-spin mb-2\" />\n          Carregando conversas...\n        </div>\n      );\n    }\n\n    if (error) {\n      return (\n         <div className=\"flex flex-col items-center justify-center p-4 text-xs text-red-600 dark:text-red-400 h-full\">\n          <AlertTriangle className=\"h-6 w-6 mb-2\" />\n          <span>Erro ao carregar DMs.</span>\n          {/* The hook itself already shows a toast, so a retry button might be more useful here if desired */}\n          {/* <Button variant=\"link\" size=\"sm\" className=\"mt-1 text-xs\" onClick={() => { /* TODO: refetch logic if hook supports it *\\/ }}>Tentar novamente</Button> */}\n        </div>\n      );\n    }\n    \n    if (!filteredDMs || filteredDMs.length === 0) {\n      return (\n        <p className=\"p-4 text-center text-xs text-slate-500 dark:text-slate-400\">\n          {searchTerm ? \"Nenhuma conversa encontrada.\" : \"Sem mensagens diretas ainda.\"}\n        </p>\n      );\n    }\n\n    return filteredDMs.map((dm: DirectMessageItem) => (\n      <Link\n        key={dm.id}\n        to=\"/user/dm/$conversationId\"\n        params={{ conversationId: dm.id }}\n        className={cn(\n          \"flex items-center gap-2.5 p-2 rounded-md text-left transition-colors group\",\n          selectedDmId === dm.id\n            ? \"bg-sky-100 dark:bg-sky-700/60 text-sky-700 dark:text-sky-200 font-medium\"\n            : \"text-slate-700 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-700/50\"\n        )}\n        onClick={() => setSelectedDmId(dm.id)}\n        activeProps={{ className: \"!bg-sky-100 dark:!bg-sky-700/60 !text-sky-700 dark:!text-sky-200 font-medium\" }}\n      >\n        <Avatar className=\"h-7 w-7 text-xs flex-shrink-0\">\n          <AvatarImage src={dm.avatarUrl} alt={dm.name} />\n          <AvatarFallback className={cn(\n            \"text-white\",\n            dm.type === 'agent' ? \"bg-emerald-500\" : \"bg-purple-500\"\n          )}>\n            {dm.type === 'agent' ? <BotIcon size={14}/> : dm.name.substring(0,1).toUpperCase()}\n          </AvatarFallback>\n        </Avatar>\n        <div className=\"flex-1 min-w-0\">\n          <div className=\"flex justify-between items-center\">\n            <span className=\"text-sm font-medium truncate group-hover:text-slate-800 dark:group-hover:text-slate-100\">{dm.name}</span>\n            {dm.timestamp && <span className=\"text-[10px] text-slate-400 dark:text-slate-500 flex-shrink-0\">{dm.timestamp}</span>}\n          </div>\n          <div className=\"flex justify-between items-center\">\n            {dm.lastMessage && <p className=\"text-xs text-slate-500 dark:text-slate-400 truncate mt-0.5\">{dm.lastMessage}</p>}\n            {dm.unreadCount && dm.unreadCount > 0 && (\n              <span className=\"ml-auto text-[10px] bg-red-500 text-white font-semibold rounded-full px-1.5 py-0.5 leading-none\">\n                {dm.unreadCount}\n              </span>\n            )}\n          </div>\n        </div>\n      </Link>\n    ));\n  };\n\n  return (\n    <aside className=\"w-72 flex-shrink-0 bg-slate-100 dark:bg-slate-800/70 flex flex-col border-r border-slate-200 dark:border-slate-700 h-full\">\n      {/* User Profile Dropdown */}\n      <div className=\"p-3 border-b border-slate-200 dark:border-slate-700\">\n        <DropdownMenu>\n          <DropdownMenuTrigger asChild>\n            <Button variant=\"ghost\" className=\"w-full justify-start items-center h-auto px-1 py-1\">\n              <Avatar className=\"h-8 w-8 mr-2\">\n                <AvatarImage src={currentUserMock.avatarUrl} alt={currentUserMock.name} />\n                <AvatarFallback>{currentUserMock.name.substring(0,1).toUpperCase()}</AvatarFallback>\n              </Avatar>\n              <div className=\"flex-1 min-w-0 text-left\">\n                <p className=\"text-sm font-semibold truncate text-slate-800 dark:text-slate-100\">{currentUserMock.name}</p>\n                <p className=\"text-xs text-slate-500 dark:text-slate-400 truncate\">{currentUserMock.email}</p>\n              </div>\n            </Button>\n          </DropdownMenuTrigger>\n          <DropdownMenuContent className=\"w-64 ml-1\" align=\"start\" side=\"bottom\">\n            <DropdownMenuLabel>Minha Conta</DropdownMenuLabel>\n            <DropdownMenuSeparator />\n            <DropdownMenuItem onSelect={() => router.navigate({ to: '/settings/profile' })}>\n              <UserCircle className=\"mr-2 h-4 w-4\" /> Perfil\n            </DropdownMenuItem>\n            <DropdownMenuItem onSelect={() => router.navigate({ to: '/settings/appearance' })}>\n              <Palette className=\"mr-2 h-4 w-4\" /> Aparência\n            </DropdownMenuItem>\n            <DropdownMenuItem onSelect={() => router.navigate({ to: '/settings' })}>\n              <Settings className=\"mr-2 h-4 w-4\" /> Todas Configurações\n            </DropdownMenuItem>\n            <DropdownMenuSeparator />\n            <DropdownMenuItem className=\"text-red-500 focus:text-red-500 dark:focus:text-red-500\">\n              Sair (Logout - N/I)\n            </DropdownMenuItem>\n          </DropdownMenuContent>\n        </DropdownMenu>\n      </div>\n\n      {/* Search and New DM Button */}\n      <div className=\"p-3 space-y-2 border-b border-slate-200 dark:border-slate-700 flex-shrink-0\">\n        <Button variant=\"outline\" size=\"sm\" className=\"w-full\" onClick={handleNewDm}>\n          <MessageSquarePlus className=\"mr-2 h-4 w-4\" /> Nova Mensagem Direta\n        </Button>\n        <div className=\"relative\">\n          <Search className=\"absolute left-2.5 top-1/2 -translate-y-1/2 h-3.5 w-3.5 text-slate-500 dark:text-slate-400\" />\n          <Input\n            type=\"search\"\n            placeholder=\"Buscar DMs ou iniciar nova...\"\n            className=\"h-8 pl-9\"\n            value={searchTerm}\n            onChange={(event) => setSearchTerm(event.target.value)}\n          />\n        </div>\n      </div>\n\n      {/* DM List Area */}\n      <ScrollArea className=\"flex-1\">\n        <nav className=\"p-2 space-y-0.5\">\n          {renderDmList()}\n        </nav>\n      </ScrollArea>\n    </aside>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/hooks/ipc/useIpcMutation.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/hooks/ipc/useIpcQuery.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/hooks/ipc/useIpcSubscription.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/hooks/use-mobile.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/hooks/useIPC.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'IElectronIPC' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":22}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// src_refactored/presentation/ui/hooks/useIPC.ts\n\nimport { ipcService } from '@/presentation/ui/services/ipc.service'; // Using path alias\nimport { IElectronIPC } from '@/presentation/ui/services/ipc.types'; // Using path alias\n\n/**\n * Custom React hook to access the IPC service for communicating\n * with the Electron main process.\n *\n * @returns The instance of the IPCService, providing methods like `invoke`, `on`, `send`.\n *          Refer to `ipc.service.ts` and `ipc.types.ts` for more details on the API.\n *\n * @example\n * const ipc = useIPC();\n *\n * // Invoking a channel\n * useEffect(() => {\n *   const fetchVersion = async () => {\n *     const result = await ipc.invoke<{ version: string }>('app:get-version');\n *     if (result.success && result.data) {\n *       console.log('App Version:', result.data.version);\n *     } else {\n *       console.error('Failed to get app version:', result.error);\n *     }\n *   };\n *   fetchVersion();\n * }, [ipc]);\n *\n * // Subscribing to an event\n * useEffect(() => {\n *   const handleUpdate = (message: any) => {\n *     console.log('Received update:', message);\n *   };\n *   const unsubscribe = ipc.on('app:update-available', handleUpdate);\n *   return () => unsubscribe(); // Cleanup on unmount\n * }, [ipc]);\n */\nexport function useIPC(): typeof ipcService {\n  // The ipcService is a singleton, so we just return it.\n  // No React-specific state or context is needed here unless we wanted to\n  // provide different mock implementations via context, which is not the current design.\n  return ipcService;\n}\n\n// Optional: If we want to expose the raw IElectronIPC interface directly via a hook,\n// which might be useful if the service adds too much opinion or for direct use.\n// However, the service layer provides better abstraction and error handling.\n\n/*\nimport { useState, useEffect } from 'react';\nimport { IElectronIPC } from '@/presentation/ui/services/ipc.types';\n\nexport function useRawElectronIPC(): IElectronIPC | null {\n  const [api, setApi] = useState<IElectronIPC | null>(null);\n\n  useEffect(() => {\n    if (window.electronIPC) {\n      setApi(window.electronIPC);\n    } else {\n      console.warn('[useRawElectronIPC] Electron IPC API not found on window.');\n    }\n  }, []);\n\n  return api;\n}\n*/\n","usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/lib/utils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/main.tsx","messages":[{"ruleId":"import/no-unresolved","severity":2,"message":"Unable to resolve path to module '@/styles/globals.css'.","line":3,"column":8,"nodeType":"Literal","endLine":3,"endColumn":30},{"ruleId":"import/order","severity":1,"message":"`@tanstack/react-router` import should occur before import of `react`","line":5,"column":1,"nodeType":"ImportDeclaration","endLine":5,"endColumn":71},{"ruleId":"import/no-unresolved","severity":2,"message":"Unable to resolve path to module './routeTree.gen'.","line":8,"column":27,"nodeType":"Literal","endLine":8,"endColumn":44}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport ReactDOMClient from 'react-dom/client';\nimport '@/styles/globals.css'; // Corrigido: Usando alias @/styles/\n// import { detectLocale, dynamicActivate } from '@/config/i18n'; // Usando alias @/config/ se i18n for re-adicionado\nimport { createRouter, RouterProvider } from '@tanstack/react-router';\n\n// Usando caminho relativo para routeTree.gen.ts para evitar problemas com alias e tempo de geração\nimport { routeTree } from './routeTree.gen';\n\n// Declaração de módulo para o TanStack Router (mantida)\ndeclare module '@tanstack/react-router' {\n  interface Register {\n    router: typeof router;\n  }\n}\n\nconst router = createRouter({ routeTree });\n\nconst rootElement = document.getElementById('root');\nif (!rootElement) {\n  throw new Error(\"Failed to find the root element\");\n}\nconst root = ReactDOMClient.createRoot(rootElement);\n\nroot.render(\n  <React.StrictMode>\n    <RouterProvider router={router} />\n  </React.StrictMode>\n);\n","usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/routes/(app)/_layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/routes/(public)/_layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/routes/(public)/home/index.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/services/ipc.service.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":40,"column":60,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":40,"endColumn":63,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1197,1200],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1197,1200],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":44,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":44,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1452,1455],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1452,1455],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":49,"column":58,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":49,"endColumn":61,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1603,1606],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1603,1606],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":62,"column":49,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":62,"endColumn":52,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2317,2320],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2317,2320],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":79,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":79,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2817,2820],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2817,2820],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":81,"column":14,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":81,"endColumn":17,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2857,2860],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2857,2860],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":89,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":89,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3146,3149],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3146,3149],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":102,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":102,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3497,3500],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3497,3500],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":114,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":114,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4090,4093],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4090,4093],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'wrappedListener' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":156,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":156,"endColumn":26},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":156,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":156,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6293,6296],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6293,6296],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":169,"column":72,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":169,"endColumn":75,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7268,7271],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7268,7271],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":11,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// src_refactored/presentation/ui/services/ipc.service.ts\n\nimport { IPCChannel } from '@/shared/ipc-channels';\nimport {\n  ChatSendMessagePayload,\n  ChatStreamEventPayload,\n  ChatStreamTokenPayload,\n  ChatStreamEndPayload,\n} from '@/shared/ipc-chat.types';\nimport { ProjectListItem } from '@/shared/ipc-project.types'; // Assuming this file and type exist\n\nimport { IElectronIPC, IPCResult } from './ipc.types';\n\nconst electronIPC = window.electronIPC;\n\nconst isElectronEnvironment = (): boolean => {\n  return !!electronIPC;\n};\n\n/**\n * A wrapper around Electron's IPC communication, providing typed methods\n * for interacting with the main process from the renderer.\n */\nclass IPCService {\n  private api: IElectronIPC | null = null;\n\n  constructor() {\n    if (isElectronEnvironment() && electronIPC) {\n      this.api = electronIPC;\n    } else {\n      console.warn(\n        '[IPCService] Electron IPC API not found. Using mock implementation. ' +\n        'Ensure preload script is correctly configured and loaded if running in Electron.',\n      );\n      this.api = this.createMockAPI();\n    }\n  }\n\n  private createMockAPI(): IElectronIPC {\n    const mockInvoke = async <T>(channel: string, ...args: any[]): Promise<T> => {\n      console.warn(`[MockIPC] Invoke: '${channel}' with args:`, args);\n      if (channel === IPCChannel.CHAT_SEND_MESSAGE) {\n        // Simulate sending message, no specific data needed for void promise\n        return undefined as any;\n      }\n      throw new Error(`MockIPC: Channel '${channel}' not implemented.`);\n    };\n\n    const mockOn = (channel: string, listener: (...args: any[]) => void): (() => void) => {\n      console.warn(`[MockIPC] Listener registered for channel: '${channel}'`, listener);\n      if (channel === IPCChannel.CHAT_STREAM_EVENT) {\n        // Simulate some stream events for chat for testing purposes\n        setTimeout(() => listener({ type: 'token', data: 'Hello' } as ChatStreamTokenPayload), 100);\n        setTimeout(() => listener({ type: 'token', data: ' world' } as ChatStreamTokenPayload), 200);\n        setTimeout(() => listener({ type: 'end' } as ChatStreamEndPayload), 300);\n      }\n      return () => {\n        console.warn(`[MockIPC] Listener removed for channel: '${channel}'`, listener);\n      };\n    };\n\n    const mockSend = (channel: string, ...args: any[]): void => {\n      console.warn(`[MockIPC] Send: '${channel}' with args:`, args);\n    };\n\n    return {\n      invoke: mockInvoke,\n      on: mockOn,\n      send: mockSend,\n      removeListener: (channel: string, listener) => {\n        console.warn(`[MockIPC] removeListener called for '${channel}'`, listener);\n      },\n      removeAllListeners: (channel: string) => {\n        console.warn(`[MockIPC] removeAllListeners called for '${channel}'`);\n      },\n    };\n  }\n\n  public async invoke<TData = any>(\n    channel: string,\n    ...args: any[]\n  ): Promise<IPCResult<TData>> {\n    if (!this.api) {\n      return { success: false, error: { message: 'IPC API not available' } };\n    }\n    try {\n      const result = await this.api.invoke<TData>(channel, ...args);\n      return { success: true, data: result };\n    } catch (error: any) {\n      console.error(`[IPCService] Error invoking channel '${channel}':`, error);\n      return {\n        success: false,\n        error: {\n          message: error.message || 'An unknown IPC error occurred',\n          name: error.name,\n          stack: error.stack,\n        },\n      };\n    }\n  }\n\n  public on(channel: string, listener: (...args: any[]) => void): () => void {\n    if (!this.api || !this.api.on) {\n      console.error('[IPCService] API not initialized for on.');\n      return () => { /* no-op */ };\n    }\n    // Assuming the listener passed to preload's `on` will handle the (event, ...data) signature\n    // and call our listener with just the data. If not, this wrapper is needed:\n    // const wrappedListener = (event: any, ...data: any[]) => listener(...data);\n    // For now, assume direct pass-through or that preload handles it.\n    return this.api.on(channel, listener);\n  }\n\n  public send(channel: string, ...args: any[]): void {\n    if (!this.api || !this.api.send) {\n      console.error('[IPCService] API not initialized for send.');\n      return;\n    }\n    this.api.send(channel, ...args);\n  }\n\n  // --- Chat Specific Methods ---\n\n  /**\n   * Sends a chat message to the main process.\n   * @param payload The chat message payload.\n   * @returns A promise that resolves with an IPCResult (void on success, or error).\n   *          The main process might return a job ID or some other acknowledgement.\n   *          For now, typed as Promise<IPCResult<void>> assuming no specific data on success.\n   */\n  public async sendChatMessage(payload: ChatSendMessagePayload): Promise<IPCResult<void>> {\n    return this.invoke<void>(IPCChannel.CHAT_SEND_MESSAGE, payload);\n  }\n\n  /**\n   * Subscribes to chat stream events from the main process.\n   * @param listener The callback function to execute when a chat stream event is received.\n   *                 The listener will be called with the ChatStreamEventPayload.\n   * @returns An unsubscribe function.\n   */\n  public onChatStreamEvent(listener: (payload: ChatStreamEventPayload) => void): () => void {\n    // The generic 'on' method's listener signature is (...args: any[]) => void.\n    // The actual data passed by Electron's ipcRenderer.on is (event, ...argsFromMain).\n    // The IElectronIPC interface's 'on' method is expected to be implemented in preload\n    // such that it calls the provided listener with only the relevant data payload(s),\n    // not the 'event' object, or that it expects a listener that can handle the event object.\n    //\n    // If preload does: contextBridge.exposeInMainWorld('electronIPC', { on: (ch, cb) => ipcRenderer.on(ch, (evt, data) => cb(data)) } )\n    // then our listener here will receive `data` as the first arg.\n    //\n    // If preload does: contextBridge.exposeInMainWorld('electronIPC', { on: (ch, cb) => ipcRenderer.on(ch, cb) } )\n    // then our listener here will receive `(event, data)`.\n    //\n    // The current IElectronIPC.on is typed as: (channel: string, listener: (...args: any[]) => void).\n    // To be safe and ensure our typed listener gets the correct payload, we wrap it.\n    const wrappedListener = (_event: any, payload: ChatStreamEventPayload) => {\n      // This assumes the main process sends the payload as the first argument after the event.\n      // If the main process sends multiple arguments, this would need to be adjusted.\n      // For chat stream, it's typical to send a single payload object.\n      listener(payload);\n    };\n\n    // If the `this.api.on` is already designed to pass only the payload, then `listener` can be passed directly.\n    // Given the generic nature of `this.api.on`, a wrapper is safer until preload is defined.\n    // However, if `window.electronIPC.on` is defined as `(channel, listener) => ipcRenderer.on(channel, (event, data) => listener(data))`,\n    // then our `listener` here would correctly receive just `data`.\n    // Let's assume the preload script will be written to simplify this for the renderer,\n    // meaning it calls the listener with only the data payload.\n    return this.on(IPCChannel.CHAT_STREAM_EVENT, listener as (...args: any[]) => void);\n  }\n  // --- Project Specific Methods ---\n\n  /**\n   * Fetches the list of projects from the main process.\n   * @returns A promise that resolves with an IPCResult containing ProjectListItem[] or an error.\n   */\n  public async listProjects(): Promise<IPCResult<ProjectListItem[]>> {\n    return this.invoke<ProjectListItem[]>(IPCChannel.PROJECT_LIST_QUERY);\n  }\n}\n\nexport const ipcService = new IPCService();\n","usedDeprecatedRules":[]},{"filePath":"/app/src_refactored/presentation/ui/services/ipc.types.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":15,"column":16,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":15,"endColumn":19,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[574,577],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[574,577],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":15,"column":47,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":15,"endColumn":50,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[605,608],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[605,608],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":24,"column":45,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":24,"endColumn":48,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1022,1025],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1022,1025],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":32,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":32,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1362,1365],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1362,1365],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":42,"column":58,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":42,"endColumn":61,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1849,1852],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1849,1852],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":73,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":73,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2875,2878],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2875,2878],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// src_refactored/presentation/ui/services/ipc.types.ts\n\n/**\n * Defines the structure of the API exposed by Electron's preload script\n * to the renderer process for IPC communication.\n */\nexport interface IElectronIPC {\n  /**\n   * Sends a message to the main process via `ipcRenderer.invoke` and returns a Promise\n   * that resolves with the response from the main process.\n   * @param channel The IPC channel to invoke.\n   * @param args Arguments to send to the main process.\n   * @returns A Promise that resolves with the result from the IPC handler.\n   */\n  invoke: <T = any>(channel: string, ...args: any[]) => Promise<T>;\n\n  /**\n   * Subscribes to an IPC channel for messages sent from the main process.\n   * @param channel The IPC channel to listen on.\n   * @param listener The function to call with messages from the main process.\n   *                 The listener receives `(event, ...args)`.\n   * @returns A function to unsubscribe the listener from the channel.\n   */\n  on: (channel: string, listener: (...args: any[]) => void) => () => void;\n\n  /**\n   * Sends a message to the main process via `ipcRenderer.send`. This is typically\n   * for one-way communication where no response is expected.\n   * @param channel The IPC channel to send the message on.\n   * @param args Arguments to send to the main process.\n   */\n  send: (channel: string, ...args: any[]) => void;\n\n  /**\n   * Removes a specific listener for an IPC channel.\n   * Note: This is less commonly exposed directly if `on` returns an unsubscribe function.\n   * However, including it for completeness based on some preload patterns.\n   * If `on` returns an unsubscribe function, that's generally preferred.\n   * @param channel The IPC channel.\n   * @param listener The exact listener function that was subscribed.\n   */\n  removeListener?: (channel: string, listener: (...args: any[]) => void) => void;\n\n  /**\n   * Removes all listeners for a specific IPC channel.\n   * @param channel The IPC channel.\n   */\n  removeAllListeners?: (channel: string) => void;\n}\n\n/**\n * It's common to expose the IPC API under a specific key on the window object.\n * This declares that key for TypeScript.\n */\ndeclare global {\n  interface Window {\n    electronIPC?: IElectronIPC; // Or 'api', 'coreAPI', etc. Matching the preload script.\n                                // Using 'electronIPC' as a placeholder name for the refactored version.\n  }\n}\n\n// It's also useful to define known IPC channel names.\n// These would ideally be shared between main, preload, and renderer.\n// For now, this is a placeholder. These should be based on actual use cases and main process handlers.\n// Example:\n// export enum IPCChannel {\n//   GET_APP_VERSION = 'app:get-version',\n//   CREATE_PROJECT = 'project:create',\n//   // ... other channels\n// }\n\n// Placeholder for IPC result structure, can be expanded.\nexport interface IPCResult<T = any> {\n  success: boolean;\n  data?: T;\n  error?: {\n    message: string;\n    name?: string;\n    stack?: string;\n  };\n}\n","usedDeprecatedRules":[]}]